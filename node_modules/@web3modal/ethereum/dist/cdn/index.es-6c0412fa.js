import{r as Pb,E as br}from"./__polyfill-node.events-d7c247dc.js";import{g as ti,c as _r,a as Pd}from"./bundle-fdcfd0d2.js";var Ou={},zo={},Ue={},Cd={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});function e(f,y){var p=f>>>16&65535,E=f&65535,A=y>>>16&65535,S=y&65535;return E*S+(p*S+E*A<<16>>>0)|0}n.mul=Math.imul||e;function t(f,y){return f+y|0}n.add=t;function s(f,y){return f-y|0}n.sub=s;function o(f,y){return f<<y|f>>>32-y}n.rotl=o;function c(f,y){return f<<32-y|f>>>y}n.rotr=c;function l(f){return typeof f=="number"&&isFinite(f)&&Math.floor(f)===f}n.isInteger=Number.isInteger||l,n.MAX_SAFE_INTEGER=9007199254740991,n.isSafeInteger=function(f){return n.isInteger(f)&&f>=-n.MAX_SAFE_INTEGER&&f<=n.MAX_SAFE_INTEGER}})(Cd);Object.defineProperty(Ue,"__esModule",{value:!0});var Ad=Cd;function Cb(n,e){return e===void 0&&(e=0),(n[e+0]<<8|n[e+1])<<16>>16}Ue.readInt16BE=Cb;function Ab(n,e){return e===void 0&&(e=0),(n[e+0]<<8|n[e+1])>>>0}Ue.readUint16BE=Ab;function Tb(n,e){return e===void 0&&(e=0),(n[e+1]<<8|n[e])<<16>>16}Ue.readInt16LE=Tb;function Rb(n,e){return e===void 0&&(e=0),(n[e+1]<<8|n[e])>>>0}Ue.readUint16LE=Rb;function Td(n,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=n>>>8,e[t+1]=n>>>0,e}Ue.writeUint16BE=Td;Ue.writeInt16BE=Td;function Rd(n,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=n>>>0,e[t+1]=n>>>8,e}Ue.writeUint16LE=Rd;Ue.writeInt16LE=Rd;function Gc(n,e){return e===void 0&&(e=0),n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]}Ue.readInt32BE=Gc;function Wc(n,e){return e===void 0&&(e=0),(n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3])>>>0}Ue.readUint32BE=Wc;function Yc(n,e){return e===void 0&&(e=0),n[e+3]<<24|n[e+2]<<16|n[e+1]<<8|n[e]}Ue.readInt32LE=Yc;function Jc(n,e){return e===void 0&&(e=0),(n[e+3]<<24|n[e+2]<<16|n[e+1]<<8|n[e])>>>0}Ue.readUint32LE=Jc;function Uo(n,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=n>>>24,e[t+1]=n>>>16,e[t+2]=n>>>8,e[t+3]=n>>>0,e}Ue.writeUint32BE=Uo;Ue.writeInt32BE=Uo;function jo(n,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=n>>>0,e[t+1]=n>>>8,e[t+2]=n>>>16,e[t+3]=n>>>24,e}Ue.writeUint32LE=jo;Ue.writeInt32LE=jo;function Nb(n,e){e===void 0&&(e=0);var t=Gc(n,e),s=Gc(n,e+4);return t*4294967296+s-(s>>31)*4294967296}Ue.readInt64BE=Nb;function $b(n,e){e===void 0&&(e=0);var t=Wc(n,e),s=Wc(n,e+4);return t*4294967296+s}Ue.readUint64BE=$b;function Fb(n,e){e===void 0&&(e=0);var t=Yc(n,e),s=Yc(n,e+4);return s*4294967296+t-(t>>31)*4294967296}Ue.readInt64LE=Fb;function Ub(n,e){e===void 0&&(e=0);var t=Jc(n,e),s=Jc(n,e+4);return s*4294967296+t}Ue.readUint64LE=Ub;function Nd(n,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),Uo(n/4294967296>>>0,e,t),Uo(n>>>0,e,t+4),e}Ue.writeUint64BE=Nd;Ue.writeInt64BE=Nd;function $d(n,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),jo(n>>>0,e,t),jo(n/4294967296>>>0,e,t+4),e}Ue.writeUint64LE=$d;Ue.writeInt64LE=$d;function jb(n,e,t){if(t===void 0&&(t=0),n%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(n/8>e.length-t)throw new Error("readUintBE: array is too short for the given bitLength");for(var s=0,o=1,c=n/8+t-1;c>=t;c--)s+=e[c]*o,o*=256;return s}Ue.readUintBE=jb;function Lb(n,e,t){if(t===void 0&&(t=0),n%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(n/8>e.length-t)throw new Error("readUintLE: array is too short for the given bitLength");for(var s=0,o=1,c=t;c<t+n/8;c++)s+=e[c]*o,o*=256;return s}Ue.readUintLE=Lb;function Mb(n,e,t,s){if(t===void 0&&(t=new Uint8Array(n/8)),s===void 0&&(s=0),n%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Ad.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var o=1,c=n/8+s-1;c>=s;c--)t[c]=e/o&255,o*=256;return t}Ue.writeUintBE=Mb;function Bb(n,e,t,s){if(t===void 0&&(t=new Uint8Array(n/8)),s===void 0&&(s=0),n%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Ad.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var o=1,c=s;c<s+n/8;c++)t[c]=e/o&255,o*=256;return t}Ue.writeUintLE=Bb;function qb(n,e){e===void 0&&(e=0);var t=new DataView(n.buffer,n.byteOffset,n.byteLength);return t.getFloat32(e)}Ue.readFloat32BE=qb;function zb(n,e){e===void 0&&(e=0);var t=new DataView(n.buffer,n.byteOffset,n.byteLength);return t.getFloat32(e,!0)}Ue.readFloat32LE=zb;function Hb(n,e){e===void 0&&(e=0);var t=new DataView(n.buffer,n.byteOffset,n.byteLength);return t.getFloat64(e)}Ue.readFloat64BE=Hb;function Kb(n,e){e===void 0&&(e=0);var t=new DataView(n.buffer,n.byteOffset,n.byteLength);return t.getFloat64(e,!0)}Ue.readFloat64LE=Kb;function Vb(n,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat32(t,n),e}Ue.writeFloat32BE=Vb;function kb(n,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat32(t,n,!0),e}Ue.writeFloat32LE=kb;function Gb(n,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat64(t,n),e}Ue.writeFloat64BE=Gb;function Wb(n,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat64(t,n,!0),e}Ue.writeFloat64LE=Wb;var Ir={};Object.defineProperty(Ir,"__esModule",{value:!0});function Yb(n){for(var e=0;e<n.length;e++)n[e]=0;return n}Ir.wipe=Yb;Object.defineProperty(zo,"__esModule",{value:!0});var Zt=Ue,Xc=Ir,Jb=20;function Xb(n,e,t){for(var s=1634760805,o=857760878,c=2036477234,l=1797285236,f=t[3]<<24|t[2]<<16|t[1]<<8|t[0],y=t[7]<<24|t[6]<<16|t[5]<<8|t[4],p=t[11]<<24|t[10]<<16|t[9]<<8|t[8],E=t[15]<<24|t[14]<<16|t[13]<<8|t[12],A=t[19]<<24|t[18]<<16|t[17]<<8|t[16],S=t[23]<<24|t[22]<<16|t[21]<<8|t[20],T=t[27]<<24|t[26]<<16|t[25]<<8|t[24],R=t[31]<<24|t[30]<<16|t[29]<<8|t[28],z=e[3]<<24|e[2]<<16|e[1]<<8|e[0],K=e[7]<<24|e[6]<<16|e[5]<<8|e[4],ie=e[11]<<24|e[10]<<16|e[9]<<8|e[8],$=e[15]<<24|e[14]<<16|e[13]<<8|e[12],j=s,x=o,C=c,w=l,u=f,b=y,G=p,W=E,se=A,ce=S,de=T,m=R,O=z,ee=K,X=ie,V=$,k=0;k<Jb;k+=2)j=j+u|0,O^=j,O=O>>>32-16|O<<16,se=se+O|0,u^=se,u=u>>>32-12|u<<12,x=x+b|0,ee^=x,ee=ee>>>32-16|ee<<16,ce=ce+ee|0,b^=ce,b=b>>>32-12|b<<12,C=C+G|0,X^=C,X=X>>>32-16|X<<16,de=de+X|0,G^=de,G=G>>>32-12|G<<12,w=w+W|0,V^=w,V=V>>>32-16|V<<16,m=m+V|0,W^=m,W=W>>>32-12|W<<12,C=C+G|0,X^=C,X=X>>>32-8|X<<8,de=de+X|0,G^=de,G=G>>>32-7|G<<7,w=w+W|0,V^=w,V=V>>>32-8|V<<8,m=m+V|0,W^=m,W=W>>>32-7|W<<7,x=x+b|0,ee^=x,ee=ee>>>32-8|ee<<8,ce=ce+ee|0,b^=ce,b=b>>>32-7|b<<7,j=j+u|0,O^=j,O=O>>>32-8|O<<8,se=se+O|0,u^=se,u=u>>>32-7|u<<7,j=j+b|0,V^=j,V=V>>>32-16|V<<16,de=de+V|0,b^=de,b=b>>>32-12|b<<12,x=x+G|0,O^=x,O=O>>>32-16|O<<16,m=m+O|0,G^=m,G=G>>>32-12|G<<12,C=C+W|0,ee^=C,ee=ee>>>32-16|ee<<16,se=se+ee|0,W^=se,W=W>>>32-12|W<<12,w=w+u|0,X^=w,X=X>>>32-16|X<<16,ce=ce+X|0,u^=ce,u=u>>>32-12|u<<12,C=C+W|0,ee^=C,ee=ee>>>32-8|ee<<8,se=se+ee|0,W^=se,W=W>>>32-7|W<<7,w=w+u|0,X^=w,X=X>>>32-8|X<<8,ce=ce+X|0,u^=ce,u=u>>>32-7|u<<7,x=x+G|0,O^=x,O=O>>>32-8|O<<8,m=m+O|0,G^=m,G=G>>>32-7|G<<7,j=j+b|0,V^=j,V=V>>>32-8|V<<8,de=de+V|0,b^=de,b=b>>>32-7|b<<7;Zt.writeUint32LE(j+s|0,n,0),Zt.writeUint32LE(x+o|0,n,4),Zt.writeUint32LE(C+c|0,n,8),Zt.writeUint32LE(w+l|0,n,12),Zt.writeUint32LE(u+f|0,n,16),Zt.writeUint32LE(b+y|0,n,20),Zt.writeUint32LE(G+p|0,n,24),Zt.writeUint32LE(W+E|0,n,28),Zt.writeUint32LE(se+A|0,n,32),Zt.writeUint32LE(ce+S|0,n,36),Zt.writeUint32LE(de+T|0,n,40),Zt.writeUint32LE(m+R|0,n,44),Zt.writeUint32LE(O+z|0,n,48),Zt.writeUint32LE(ee+K|0,n,52),Zt.writeUint32LE(X+ie|0,n,56),Zt.writeUint32LE(V+$|0,n,60)}function Fd(n,e,t,s,o){if(o===void 0&&(o=0),n.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(s.length<t.length)throw new Error("ChaCha: destination is shorter than source");var c,l;if(o===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");c=new Uint8Array(16),l=c.length-e.length,c.set(e,l)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");c=e,l=o}for(var f=new Uint8Array(64),y=0;y<t.length;y+=64){Xb(f,c,n);for(var p=y;p<y+64&&p<t.length;p++)s[p]=t[p]^f[p-y];Zb(c,0,l)}return Xc.wipe(f),o===0&&Xc.wipe(c),s}zo.streamXOR=Fd;function Qb(n,e,t,s){return s===void 0&&(s=0),Xc.wipe(t),Fd(n,e,t,t,s)}zo.stream=Qb;function Zb(n,e,t){for(var s=1;t--;)s=s+(n[e]&255)|0,n[e]=s&255,s>>>=8,e++;if(s>0)throw new Error("ChaCha: counter overflow")}var Ud={},Rn={};Object.defineProperty(Rn,"__esModule",{value:!0});function em(n,e,t){return~(n-1)&e|n-1&t}Rn.select=em;function tm(n,e){return(n|0)-(e|0)-1>>>31&1}Rn.lessOrEqual=tm;function jd(n,e){if(n.length!==e.length)return 0;for(var t=0,s=0;s<n.length;s++)t|=n[s]^e[s];return 1&t-1>>>8}Rn.compare=jd;function rm(n,e){return n.length===0||e.length===0?!1:jd(n,e)!==0}Rn.equal=rm;(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Rn,t=Ir;n.DIGEST_LENGTH=16;var s=function(){function l(f){this.digestLength=n.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var y=f[0]|f[1]<<8;this._r[0]=y&8191;var p=f[2]|f[3]<<8;this._r[1]=(y>>>13|p<<3)&8191;var E=f[4]|f[5]<<8;this._r[2]=(p>>>10|E<<6)&7939;var A=f[6]|f[7]<<8;this._r[3]=(E>>>7|A<<9)&8191;var S=f[8]|f[9]<<8;this._r[4]=(A>>>4|S<<12)&255,this._r[5]=S>>>1&8190;var T=f[10]|f[11]<<8;this._r[6]=(S>>>14|T<<2)&8191;var R=f[12]|f[13]<<8;this._r[7]=(T>>>11|R<<5)&8065;var z=f[14]|f[15]<<8;this._r[8]=(R>>>8|z<<8)&8191,this._r[9]=z>>>5&127,this._pad[0]=f[16]|f[17]<<8,this._pad[1]=f[18]|f[19]<<8,this._pad[2]=f[20]|f[21]<<8,this._pad[3]=f[22]|f[23]<<8,this._pad[4]=f[24]|f[25]<<8,this._pad[5]=f[26]|f[27]<<8,this._pad[6]=f[28]|f[29]<<8,this._pad[7]=f[30]|f[31]<<8}return l.prototype._blocks=function(f,y,p){for(var E=this._fin?0:2048,A=this._h[0],S=this._h[1],T=this._h[2],R=this._h[3],z=this._h[4],K=this._h[5],ie=this._h[6],$=this._h[7],j=this._h[8],x=this._h[9],C=this._r[0],w=this._r[1],u=this._r[2],b=this._r[3],G=this._r[4],W=this._r[5],se=this._r[6],ce=this._r[7],de=this._r[8],m=this._r[9];p>=16;){var O=f[y+0]|f[y+1]<<8;A+=O&8191;var ee=f[y+2]|f[y+3]<<8;S+=(O>>>13|ee<<3)&8191;var X=f[y+4]|f[y+5]<<8;T+=(ee>>>10|X<<6)&8191;var V=f[y+6]|f[y+7]<<8;R+=(X>>>7|V<<9)&8191;var k=f[y+8]|f[y+9]<<8;z+=(V>>>4|k<<12)&8191,K+=k>>>1&8191;var J=f[y+10]|f[y+11]<<8;ie+=(k>>>14|J<<2)&8191;var re=f[y+12]|f[y+13]<<8;$+=(J>>>11|re<<5)&8191;var me=f[y+14]|f[y+15]<<8;j+=(re>>>8|me<<8)&8191,x+=me>>>5|E;var oe=0,we=oe;we+=A*C,we+=S*(5*m),we+=T*(5*de),we+=R*(5*ce),we+=z*(5*se),oe=we>>>13,we&=8191,we+=K*(5*W),we+=ie*(5*G),we+=$*(5*b),we+=j*(5*u),we+=x*(5*w),oe+=we>>>13,we&=8191;var le=oe;le+=A*w,le+=S*C,le+=T*(5*m),le+=R*(5*de),le+=z*(5*ce),oe=le>>>13,le&=8191,le+=K*(5*se),le+=ie*(5*W),le+=$*(5*G),le+=j*(5*b),le+=x*(5*u),oe+=le>>>13,le&=8191;var ve=oe;ve+=A*u,ve+=S*w,ve+=T*C,ve+=R*(5*m),ve+=z*(5*de),oe=ve>>>13,ve&=8191,ve+=K*(5*ce),ve+=ie*(5*se),ve+=$*(5*W),ve+=j*(5*G),ve+=x*(5*b),oe+=ve>>>13,ve&=8191;var q=oe;q+=A*b,q+=S*u,q+=T*w,q+=R*C,q+=z*(5*m),oe=q>>>13,q&=8191,q+=K*(5*de),q+=ie*(5*ce),q+=$*(5*se),q+=j*(5*W),q+=x*(5*G),oe+=q>>>13,q&=8191;var B=oe;B+=A*G,B+=S*b,B+=T*u,B+=R*w,B+=z*C,oe=B>>>13,B&=8191,B+=K*(5*m),B+=ie*(5*de),B+=$*(5*ce),B+=j*(5*se),B+=x*(5*W),oe+=B>>>13,B&=8191;var F=oe;F+=A*W,F+=S*G,F+=T*b,F+=R*u,F+=z*w,oe=F>>>13,F&=8191,F+=K*C,F+=ie*(5*m),F+=$*(5*de),F+=j*(5*ce),F+=x*(5*se),oe+=F>>>13,F&=8191;var d=oe;d+=A*se,d+=S*W,d+=T*G,d+=R*b,d+=z*u,oe=d>>>13,d&=8191,d+=K*w,d+=ie*C,d+=$*(5*m),d+=j*(5*de),d+=x*(5*ce),oe+=d>>>13,d&=8191;var P=oe;P+=A*ce,P+=S*se,P+=T*W,P+=R*G,P+=z*b,oe=P>>>13,P&=8191,P+=K*u,P+=ie*w,P+=$*C,P+=j*(5*m),P+=x*(5*de),oe+=P>>>13,P&=8191;var ae=oe;ae+=A*de,ae+=S*ce,ae+=T*se,ae+=R*W,ae+=z*G,oe=ae>>>13,ae&=8191,ae+=K*b,ae+=ie*u,ae+=$*w,ae+=j*C,ae+=x*(5*m),oe+=ae>>>13,ae&=8191;var fe=oe;fe+=A*m,fe+=S*de,fe+=T*ce,fe+=R*se,fe+=z*W,oe=fe>>>13,fe&=8191,fe+=K*G,fe+=ie*b,fe+=$*u,fe+=j*w,fe+=x*C,oe+=fe>>>13,fe&=8191,oe=(oe<<2)+oe|0,oe=oe+we|0,we=oe&8191,oe=oe>>>13,le+=oe,A=we,S=le,T=ve,R=q,z=B,K=F,ie=d,$=P,j=ae,x=fe,y+=16,p-=16}this._h[0]=A,this._h[1]=S,this._h[2]=T,this._h[3]=R,this._h[4]=z,this._h[5]=K,this._h[6]=ie,this._h[7]=$,this._h[8]=j,this._h[9]=x},l.prototype.finish=function(f,y){y===void 0&&(y=0);var p=new Uint16Array(10),E,A,S,T;if(this._leftover){for(T=this._leftover,this._buffer[T++]=1;T<16;T++)this._buffer[T]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(E=this._h[1]>>>13,this._h[1]&=8191,T=2;T<10;T++)this._h[T]+=E,E=this._h[T]>>>13,this._h[T]&=8191;for(this._h[0]+=E*5,E=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=E,E=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=E,p[0]=this._h[0]+5,E=p[0]>>>13,p[0]&=8191,T=1;T<10;T++)p[T]=this._h[T]+E,E=p[T]>>>13,p[T]&=8191;for(p[9]-=1<<13,A=(E^1)-1,T=0;T<10;T++)p[T]&=A;for(A=~A,T=0;T<10;T++)this._h[T]=this._h[T]&A|p[T];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,S=this._h[0]+this._pad[0],this._h[0]=S&65535,T=1;T<8;T++)S=(this._h[T]+this._pad[T]|0)+(S>>>16)|0,this._h[T]=S&65535;return f[y+0]=this._h[0]>>>0,f[y+1]=this._h[0]>>>8,f[y+2]=this._h[1]>>>0,f[y+3]=this._h[1]>>>8,f[y+4]=this._h[2]>>>0,f[y+5]=this._h[2]>>>8,f[y+6]=this._h[3]>>>0,f[y+7]=this._h[3]>>>8,f[y+8]=this._h[4]>>>0,f[y+9]=this._h[4]>>>8,f[y+10]=this._h[5]>>>0,f[y+11]=this._h[5]>>>8,f[y+12]=this._h[6]>>>0,f[y+13]=this._h[6]>>>8,f[y+14]=this._h[7]>>>0,f[y+15]=this._h[7]>>>8,this._finished=!0,this},l.prototype.update=function(f){var y=0,p=f.length,E;if(this._leftover){E=16-this._leftover,E>p&&(E=p);for(var A=0;A<E;A++)this._buffer[this._leftover+A]=f[y+A];if(p-=E,y+=E,this._leftover+=E,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(p>=16&&(E=p-p%16,this._blocks(f,y,E),y+=E,p-=E),p){for(var A=0;A<p;A++)this._buffer[this._leftover+A]=f[y+A];this._leftover+=p}return this},l.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var f=new Uint8Array(16);return this.finish(f),f},l.prototype.clean=function(){return t.wipe(this._buffer),t.wipe(this._r),t.wipe(this._h),t.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},l}();n.Poly1305=s;function o(l,f){var y=new s(l);y.update(f);var p=y.digest();return y.clean(),p}n.oneTimeAuth=o;function c(l,f){return l.length!==n.DIGEST_LENGTH||f.length!==n.DIGEST_LENGTH?!1:e.equal(l,f)}n.equal=c})(Ud);(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=zo,t=Ud,s=Ir,o=Ue,c=Rn;n.KEY_LENGTH=32,n.NONCE_LENGTH=12,n.TAG_LENGTH=16;var l=new Uint8Array(16),f=function(){function y(p){if(this.nonceLength=n.NONCE_LENGTH,this.tagLength=n.TAG_LENGTH,p.length!==n.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(p)}return y.prototype.seal=function(p,E,A,S){if(p.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var T=new Uint8Array(16);T.set(p,T.length-p.length);var R=new Uint8Array(32);e.stream(this._key,T,R,4);var z=E.length+this.tagLength,K;if(S){if(S.length!==z)throw new Error("ChaCha20Poly1305: incorrect destination length");K=S}else K=new Uint8Array(z);return e.streamXOR(this._key,T,E,K,4),this._authenticate(K.subarray(K.length-this.tagLength,K.length),R,K.subarray(0,K.length-this.tagLength),A),s.wipe(T),K},y.prototype.open=function(p,E,A,S){if(p.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(E.length<this.tagLength)return null;var T=new Uint8Array(16);T.set(p,T.length-p.length);var R=new Uint8Array(32);e.stream(this._key,T,R,4);var z=new Uint8Array(this.tagLength);if(this._authenticate(z,R,E.subarray(0,E.length-this.tagLength),A),!c.equal(z,E.subarray(E.length-this.tagLength,E.length)))return null;var K=E.length-this.tagLength,ie;if(S){if(S.length!==K)throw new Error("ChaCha20Poly1305: incorrect destination length");ie=S}else ie=new Uint8Array(K);return e.streamXOR(this._key,T,E.subarray(0,E.length-this.tagLength),ie,4),s.wipe(T),ie},y.prototype.clean=function(){return s.wipe(this._key),this},y.prototype._authenticate=function(p,E,A,S){var T=new t.Poly1305(E);S&&(T.update(S),S.length%16>0&&T.update(l.subarray(S.length%16))),T.update(A),A.length%16>0&&T.update(l.subarray(A.length%16));var R=new Uint8Array(8);S&&o.writeUint64LE(S.length,R),T.update(R),o.writeUint64LE(A.length,R),T.update(R);for(var z=T.digest(),K=0;K<z.length;K++)p[K]=z[K];T.clean(),s.wipe(z),s.wipe(R)},y}();n.ChaCha20Poly1305=f})(Ou);var Ld={},bs={},Pu={};Object.defineProperty(Pu,"__esModule",{value:!0});function nm(n){return typeof n.saveState<"u"&&typeof n.restoreState<"u"&&typeof n.cleanSavedState<"u"}Pu.isSerializableHash=nm;Object.defineProperty(bs,"__esModule",{value:!0});var Qr=Pu,im=Rn,sm=Ir,Md=function(){function n(e,t){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var s=new Uint8Array(this.blockSize);t.length>this.blockSize?this._inner.update(t).finish(s).clean():s.set(t);for(var o=0;o<s.length;o++)s[o]^=54;this._inner.update(s);for(var o=0;o<s.length;o++)s[o]^=106;this._outer.update(s),Qr.isSerializableHash(this._inner)&&Qr.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),sm.wipe(s)}return n.prototype.reset=function(){if(!Qr.isSerializableHash(this._inner)||!Qr.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},n.prototype.clean=function(){Qr.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),Qr.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},n.prototype.update=function(e){return this._inner.update(e),this},n.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},n.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},n.prototype.saveState=function(){if(!Qr.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},n.prototype.restoreState=function(e){if(!Qr.isSerializableHash(this._inner)||!Qr.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},n.prototype.cleanSavedState=function(e){if(!Qr.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},n}();bs.HMAC=Md;function om(n,e,t){var s=new Md(n,e);s.update(t);var o=s.digest();return s.clean(),o}bs.hmac=om;bs.equal=im.equal;Object.defineProperty(Ld,"__esModule",{value:!0});var Wl=bs,Yl=Ir,am=function(){function n(e,t,s,o){s===void 0&&(s=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=o;var c=Wl.hmac(this._hash,s,t);this._hmac=new Wl.HMAC(e,c),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return n.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},n.prototype.expand=function(e){for(var t=new Uint8Array(e),s=0;s<t.length;s++)this._bufpos===this._buffer.length&&this._fillBuffer(),t[s]=this._buffer[this._bufpos++];return t},n.prototype.clean=function(){this._hmac.clean(),Yl.wipe(this._buffer),Yl.wipe(this._counter),this._bufpos=0},n}(),cm=Ld.HKDF=am,Ti={},Ho={},Ko={};Object.defineProperty(Ko,"__esModule",{value:!0});Ko.BrowserRandomSource=void 0;const Jl=65536;class um{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const t=new Uint8Array(e);for(let s=0;s<t.length;s+=Jl)this._crypto.getRandomValues(t.subarray(s,s+Math.min(t.length-s,Jl)));return t}}Ko.BrowserRandomSource=um;function hm(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Vo={},lm={},fm=Object.freeze({__proto__:null,default:lm}),dm=ti(fm);Object.defineProperty(Vo,"__esModule",{value:!0});Vo.NodeRandomSource=void 0;const pm=Ir;class gm{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof hm<"u"){const e=dm;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const s=new Uint8Array(e);for(let o=0;o<s.length;o++)s[o]=t[o];return(0,pm.wipe)(t),s}}Vo.NodeRandomSource=gm;Object.defineProperty(Ho,"__esModule",{value:!0});Ho.SystemRandomSource=void 0;const ym=Ko,_m=Vo;class vm{constructor(){if(this.isAvailable=!1,this.name="",this._source=new ym.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new _m.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}Ho.SystemRandomSource=vm;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.randomStringForEntropy=n.randomString=n.randomUint32=n.randomBytes=n.defaultRandomSource=void 0;const e=Ho,t=Ue,s=Ir;n.defaultRandomSource=new e.SystemRandomSource;function o(p,E=n.defaultRandomSource){return E.randomBytes(p)}n.randomBytes=o;function c(p=n.defaultRandomSource){const E=o(4,p),A=(0,t.readUint32LE)(E);return(0,s.wipe)(E),A}n.randomUint32=c;const l="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function f(p,E=l,A=n.defaultRandomSource){if(E.length<2)throw new Error("randomString charset is too short");if(E.length>256)throw new Error("randomString charset is too long");let S="";const T=E.length,R=256-256%T;for(;p>0;){const z=o(Math.ceil(p*256/R),A);for(let K=0;K<z.length&&p>0;K++){const ie=z[K];ie<R&&(S+=E.charAt(ie%T),p--)}(0,s.wipe)(z)}return S}n.randomString=f;function y(p,E=l,A=n.defaultRandomSource){const S=Math.ceil(p/(Math.log(E.length)/Math.LN2));return f(S,E,A)}n.randomStringForEntropy=y})(Ti);var ko={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Ue,t=Ir;n.DIGEST_LENGTH=32,n.BLOCK_SIZE=64;var s=function(){function f(){this.digestLength=n.DIGEST_LENGTH,this.blockSize=n.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return f.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},f.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},f.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._temp),this.reset()},f.prototype.update=function(y,p){if(p===void 0&&(p=y.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var E=0;if(this._bytesHashed+=p,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&p>0;)this._buffer[this._bufferLength++]=y[E++],p--;this._bufferLength===this.blockSize&&(c(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(p>=this.blockSize&&(E=c(this._temp,this._state,y,E,p),p%=this.blockSize);p>0;)this._buffer[this._bufferLength++]=y[E++],p--;return this},f.prototype.finish=function(y){if(!this._finished){var p=this._bytesHashed,E=this._bufferLength,A=p/536870912|0,S=p<<3,T=p%64<56?64:128;this._buffer[E]=128;for(var R=E+1;R<T-8;R++)this._buffer[R]=0;e.writeUint32BE(A,this._buffer,T-8),e.writeUint32BE(S,this._buffer,T-4),c(this._temp,this._state,this._buffer,0,T),this._finished=!0}for(var R=0;R<this.digestLength/4;R++)e.writeUint32BE(this._state[R],y,R*4);return this},f.prototype.digest=function(){var y=new Uint8Array(this.digestLength);return this.finish(y),y},f.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},f.prototype.restoreState=function(y){return this._state.set(y.state),this._bufferLength=y.bufferLength,y.buffer&&this._buffer.set(y.buffer),this._bytesHashed=y.bytesHashed,this._finished=!1,this},f.prototype.cleanSavedState=function(y){t.wipe(y.state),y.buffer&&t.wipe(y.buffer),y.bufferLength=0,y.bytesHashed=0},f}();n.SHA256=s;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function c(f,y,p,E,A){for(;A>=64;){for(var S=y[0],T=y[1],R=y[2],z=y[3],K=y[4],ie=y[5],$=y[6],j=y[7],x=0;x<16;x++){var C=E+x*4;f[x]=e.readUint32BE(p,C)}for(var x=16;x<64;x++){var w=f[x-2],u=(w>>>17|w<<32-17)^(w>>>19|w<<32-19)^w>>>10;w=f[x-15];var b=(w>>>7|w<<32-7)^(w>>>18|w<<32-18)^w>>>3;f[x]=(u+f[x-7]|0)+(b+f[x-16]|0)}for(var x=0;x<64;x++){var u=(((K>>>6|K<<26)^(K>>>11|K<<21)^(K>>>25|K<<7))+(K&ie^~K&$)|0)+(j+(o[x]+f[x]|0)|0)|0,b=((S>>>2|S<<32-2)^(S>>>13|S<<32-13)^(S>>>22|S<<32-22))+(S&T^S&R^T&R)|0;j=$,$=ie,ie=K,K=z+u|0,z=R,R=T,T=S,S=u+b|0}y[0]+=S,y[1]+=T,y[2]+=R,y[3]+=z,y[4]+=K,y[5]+=ie,y[6]+=$,y[7]+=j,E+=64,A-=64}return E}function l(f){var y=new s;y.update(f);var p=y.digest();return y.clean(),p}n.hash=l})(ko);var Cu={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.sharedKey=n.generateKeyPair=n.generateKeyPairFromSeed=n.scalarMultBase=n.scalarMult=n.SHARED_KEY_LENGTH=n.SECRET_KEY_LENGTH=n.PUBLIC_KEY_LENGTH=void 0;const e=Ti,t=Ir;n.PUBLIC_KEY_LENGTH=32,n.SECRET_KEY_LENGTH=32,n.SHARED_KEY_LENGTH=32;function s(x){const C=new Float64Array(16);if(x)for(let w=0;w<x.length;w++)C[w]=x[w];return C}const o=new Uint8Array(32);o[0]=9;const c=s([56129,1]);function l(x){let C=1;for(let w=0;w<16;w++){let u=x[w]+C+65535;C=Math.floor(u/65536),x[w]=u-C*65536}x[0]+=C-1+37*(C-1)}function f(x,C,w){const u=~(w-1);for(let b=0;b<16;b++){const G=u&(x[b]^C[b]);x[b]^=G,C[b]^=G}}function y(x,C){const w=s(),u=s();for(let b=0;b<16;b++)u[b]=C[b];l(u),l(u),l(u);for(let b=0;b<2;b++){w[0]=u[0]-65517;for(let W=1;W<15;W++)w[W]=u[W]-65535-(w[W-1]>>16&1),w[W-1]&=65535;w[15]=u[15]-32767-(w[14]>>16&1);const G=w[15]>>16&1;w[14]&=65535,f(u,w,1-G)}for(let b=0;b<16;b++)x[2*b]=u[b]&255,x[2*b+1]=u[b]>>8}function p(x,C){for(let w=0;w<16;w++)x[w]=C[2*w]+(C[2*w+1]<<8);x[15]&=32767}function E(x,C,w){for(let u=0;u<16;u++)x[u]=C[u]+w[u]}function A(x,C,w){for(let u=0;u<16;u++)x[u]=C[u]-w[u]}function S(x,C,w){let u,b,G=0,W=0,se=0,ce=0,de=0,m=0,O=0,ee=0,X=0,V=0,k=0,J=0,re=0,me=0,oe=0,we=0,le=0,ve=0,q=0,B=0,F=0,d=0,P=0,ae=0,fe=0,xe=0,ze=0,Ve=0,je=0,pt=0,gt=0,Me=w[0],Ie=w[1],Ne=w[2],$e=w[3],Be=w[4],Pe=w[5],Fe=w[6],Se=w[7],Ce=w[8],He=w[9],Oe=w[10],ke=w[11],We=w[12],et=w[13],tt=w[14],Je=w[15];u=C[0],G+=u*Me,W+=u*Ie,se+=u*Ne,ce+=u*$e,de+=u*Be,m+=u*Pe,O+=u*Fe,ee+=u*Se,X+=u*Ce,V+=u*He,k+=u*Oe,J+=u*ke,re+=u*We,me+=u*et,oe+=u*tt,we+=u*Je,u=C[1],W+=u*Me,se+=u*Ie,ce+=u*Ne,de+=u*$e,m+=u*Be,O+=u*Pe,ee+=u*Fe,X+=u*Se,V+=u*Ce,k+=u*He,J+=u*Oe,re+=u*ke,me+=u*We,oe+=u*et,we+=u*tt,le+=u*Je,u=C[2],se+=u*Me,ce+=u*Ie,de+=u*Ne,m+=u*$e,O+=u*Be,ee+=u*Pe,X+=u*Fe,V+=u*Se,k+=u*Ce,J+=u*He,re+=u*Oe,me+=u*ke,oe+=u*We,we+=u*et,le+=u*tt,ve+=u*Je,u=C[3],ce+=u*Me,de+=u*Ie,m+=u*Ne,O+=u*$e,ee+=u*Be,X+=u*Pe,V+=u*Fe,k+=u*Se,J+=u*Ce,re+=u*He,me+=u*Oe,oe+=u*ke,we+=u*We,le+=u*et,ve+=u*tt,q+=u*Je,u=C[4],de+=u*Me,m+=u*Ie,O+=u*Ne,ee+=u*$e,X+=u*Be,V+=u*Pe,k+=u*Fe,J+=u*Se,re+=u*Ce,me+=u*He,oe+=u*Oe,we+=u*ke,le+=u*We,ve+=u*et,q+=u*tt,B+=u*Je,u=C[5],m+=u*Me,O+=u*Ie,ee+=u*Ne,X+=u*$e,V+=u*Be,k+=u*Pe,J+=u*Fe,re+=u*Se,me+=u*Ce,oe+=u*He,we+=u*Oe,le+=u*ke,ve+=u*We,q+=u*et,B+=u*tt,F+=u*Je,u=C[6],O+=u*Me,ee+=u*Ie,X+=u*Ne,V+=u*$e,k+=u*Be,J+=u*Pe,re+=u*Fe,me+=u*Se,oe+=u*Ce,we+=u*He,le+=u*Oe,ve+=u*ke,q+=u*We,B+=u*et,F+=u*tt,d+=u*Je,u=C[7],ee+=u*Me,X+=u*Ie,V+=u*Ne,k+=u*$e,J+=u*Be,re+=u*Pe,me+=u*Fe,oe+=u*Se,we+=u*Ce,le+=u*He,ve+=u*Oe,q+=u*ke,B+=u*We,F+=u*et,d+=u*tt,P+=u*Je,u=C[8],X+=u*Me,V+=u*Ie,k+=u*Ne,J+=u*$e,re+=u*Be,me+=u*Pe,oe+=u*Fe,we+=u*Se,le+=u*Ce,ve+=u*He,q+=u*Oe,B+=u*ke,F+=u*We,d+=u*et,P+=u*tt,ae+=u*Je,u=C[9],V+=u*Me,k+=u*Ie,J+=u*Ne,re+=u*$e,me+=u*Be,oe+=u*Pe,we+=u*Fe,le+=u*Se,ve+=u*Ce,q+=u*He,B+=u*Oe,F+=u*ke,d+=u*We,P+=u*et,ae+=u*tt,fe+=u*Je,u=C[10],k+=u*Me,J+=u*Ie,re+=u*Ne,me+=u*$e,oe+=u*Be,we+=u*Pe,le+=u*Fe,ve+=u*Se,q+=u*Ce,B+=u*He,F+=u*Oe,d+=u*ke,P+=u*We,ae+=u*et,fe+=u*tt,xe+=u*Je,u=C[11],J+=u*Me,re+=u*Ie,me+=u*Ne,oe+=u*$e,we+=u*Be,le+=u*Pe,ve+=u*Fe,q+=u*Se,B+=u*Ce,F+=u*He,d+=u*Oe,P+=u*ke,ae+=u*We,fe+=u*et,xe+=u*tt,ze+=u*Je,u=C[12],re+=u*Me,me+=u*Ie,oe+=u*Ne,we+=u*$e,le+=u*Be,ve+=u*Pe,q+=u*Fe,B+=u*Se,F+=u*Ce,d+=u*He,P+=u*Oe,ae+=u*ke,fe+=u*We,xe+=u*et,ze+=u*tt,Ve+=u*Je,u=C[13],me+=u*Me,oe+=u*Ie,we+=u*Ne,le+=u*$e,ve+=u*Be,q+=u*Pe,B+=u*Fe,F+=u*Se,d+=u*Ce,P+=u*He,ae+=u*Oe,fe+=u*ke,xe+=u*We,ze+=u*et,Ve+=u*tt,je+=u*Je,u=C[14],oe+=u*Me,we+=u*Ie,le+=u*Ne,ve+=u*$e,q+=u*Be,B+=u*Pe,F+=u*Fe,d+=u*Se,P+=u*Ce,ae+=u*He,fe+=u*Oe,xe+=u*ke,ze+=u*We,Ve+=u*et,je+=u*tt,pt+=u*Je,u=C[15],we+=u*Me,le+=u*Ie,ve+=u*Ne,q+=u*$e,B+=u*Be,F+=u*Pe,d+=u*Fe,P+=u*Se,ae+=u*Ce,fe+=u*He,xe+=u*Oe,ze+=u*ke,Ve+=u*We,je+=u*et,pt+=u*tt,gt+=u*Je,G+=38*le,W+=38*ve,se+=38*q,ce+=38*B,de+=38*F,m+=38*d,O+=38*P,ee+=38*ae,X+=38*fe,V+=38*xe,k+=38*ze,J+=38*Ve,re+=38*je,me+=38*pt,oe+=38*gt,b=1,u=G+b+65535,b=Math.floor(u/65536),G=u-b*65536,u=W+b+65535,b=Math.floor(u/65536),W=u-b*65536,u=se+b+65535,b=Math.floor(u/65536),se=u-b*65536,u=ce+b+65535,b=Math.floor(u/65536),ce=u-b*65536,u=de+b+65535,b=Math.floor(u/65536),de=u-b*65536,u=m+b+65535,b=Math.floor(u/65536),m=u-b*65536,u=O+b+65535,b=Math.floor(u/65536),O=u-b*65536,u=ee+b+65535,b=Math.floor(u/65536),ee=u-b*65536,u=X+b+65535,b=Math.floor(u/65536),X=u-b*65536,u=V+b+65535,b=Math.floor(u/65536),V=u-b*65536,u=k+b+65535,b=Math.floor(u/65536),k=u-b*65536,u=J+b+65535,b=Math.floor(u/65536),J=u-b*65536,u=re+b+65535,b=Math.floor(u/65536),re=u-b*65536,u=me+b+65535,b=Math.floor(u/65536),me=u-b*65536,u=oe+b+65535,b=Math.floor(u/65536),oe=u-b*65536,u=we+b+65535,b=Math.floor(u/65536),we=u-b*65536,G+=b-1+37*(b-1),b=1,u=G+b+65535,b=Math.floor(u/65536),G=u-b*65536,u=W+b+65535,b=Math.floor(u/65536),W=u-b*65536,u=se+b+65535,b=Math.floor(u/65536),se=u-b*65536,u=ce+b+65535,b=Math.floor(u/65536),ce=u-b*65536,u=de+b+65535,b=Math.floor(u/65536),de=u-b*65536,u=m+b+65535,b=Math.floor(u/65536),m=u-b*65536,u=O+b+65535,b=Math.floor(u/65536),O=u-b*65536,u=ee+b+65535,b=Math.floor(u/65536),ee=u-b*65536,u=X+b+65535,b=Math.floor(u/65536),X=u-b*65536,u=V+b+65535,b=Math.floor(u/65536),V=u-b*65536,u=k+b+65535,b=Math.floor(u/65536),k=u-b*65536,u=J+b+65535,b=Math.floor(u/65536),J=u-b*65536,u=re+b+65535,b=Math.floor(u/65536),re=u-b*65536,u=me+b+65535,b=Math.floor(u/65536),me=u-b*65536,u=oe+b+65535,b=Math.floor(u/65536),oe=u-b*65536,u=we+b+65535,b=Math.floor(u/65536),we=u-b*65536,G+=b-1+37*(b-1),x[0]=G,x[1]=W,x[2]=se,x[3]=ce,x[4]=de,x[5]=m,x[6]=O,x[7]=ee,x[8]=X,x[9]=V,x[10]=k,x[11]=J,x[12]=re,x[13]=me,x[14]=oe,x[15]=we}function T(x,C){S(x,C,C)}function R(x,C){const w=s();for(let u=0;u<16;u++)w[u]=C[u];for(let u=253;u>=0;u--)T(w,w),u!==2&&u!==4&&S(w,w,C);for(let u=0;u<16;u++)x[u]=w[u]}function z(x,C){const w=new Uint8Array(32),u=new Float64Array(80),b=s(),G=s(),W=s(),se=s(),ce=s(),de=s();for(let X=0;X<31;X++)w[X]=x[X];w[31]=x[31]&127|64,w[0]&=248,p(u,C);for(let X=0;X<16;X++)G[X]=u[X];b[0]=se[0]=1;for(let X=254;X>=0;--X){const V=w[X>>>3]>>>(X&7)&1;f(b,G,V),f(W,se,V),E(ce,b,W),A(b,b,W),E(W,G,se),A(G,G,se),T(se,ce),T(de,b),S(b,W,b),S(W,G,ce),E(ce,b,W),A(b,b,W),T(G,b),A(W,se,de),S(b,W,c),E(b,b,se),S(W,W,b),S(b,se,de),S(se,G,u),T(G,ce),f(b,G,V),f(W,se,V)}for(let X=0;X<16;X++)u[X+16]=b[X],u[X+32]=W[X],u[X+48]=G[X],u[X+64]=se[X];const m=u.subarray(32),O=u.subarray(16);R(m,m),S(O,O,m);const ee=new Uint8Array(32);return y(ee,O),ee}n.scalarMult=z;function K(x){return z(x,o)}n.scalarMultBase=K;function ie(x){if(x.length!==n.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${n.SECRET_KEY_LENGTH} bytes`);const C=new Uint8Array(x);return{publicKey:K(C),secretKey:C}}n.generateKeyPairFromSeed=ie;function $(x){const C=(0,e.randomBytes)(32,x),w=ie(C);return(0,t.wipe)(C),w}n.generateKeyPair=$;function j(x,C,w=!1){if(x.length!==n.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(C.length!==n.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const u=z(x,C);if(w){let b=0;for(let G=0;G<u.length;G++)b|=u[G];if(b===0)throw new Error("X25519: invalid shared key")}return u}n.sharedKey=j})(Cu);function Au(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function Bd(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Au(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function Qc(n,e){e||(e=n.reduce((o,c)=>o+c.length,0));const t=Bd(e);let s=0;for(const o of n)t.set(o,s),s+=o.length;return Au(t)}function bm(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),s=0;s<t.length;s++)t[s]=255;for(var o=0;o<n.length;o++){var c=n.charAt(o),l=c.charCodeAt(0);if(t[l]!==255)throw new TypeError(c+" is ambiguous");t[l]=o}var f=n.length,y=n.charAt(0),p=Math.log(f)/Math.log(256),E=Math.log(256)/Math.log(f);function A(R){if(R instanceof Uint8Array||(ArrayBuffer.isView(R)?R=new Uint8Array(R.buffer,R.byteOffset,R.byteLength):Array.isArray(R)&&(R=Uint8Array.from(R))),!(R instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(R.length===0)return"";for(var z=0,K=0,ie=0,$=R.length;ie!==$&&R[ie]===0;)ie++,z++;for(var j=($-ie)*E+1>>>0,x=new Uint8Array(j);ie!==$;){for(var C=R[ie],w=0,u=j-1;(C!==0||w<K)&&u!==-1;u--,w++)C+=256*x[u]>>>0,x[u]=C%f>>>0,C=C/f>>>0;if(C!==0)throw new Error("Non-zero carry");K=w,ie++}for(var b=j-K;b!==j&&x[b]===0;)b++;for(var G=y.repeat(z);b<j;++b)G+=n.charAt(x[b]);return G}function S(R){if(typeof R!="string")throw new TypeError("Expected String");if(R.length===0)return new Uint8Array;var z=0;if(R[z]!==" "){for(var K=0,ie=0;R[z]===y;)K++,z++;for(var $=(R.length-z)*p+1>>>0,j=new Uint8Array($);R[z];){var x=t[R.charCodeAt(z)];if(x===255)return;for(var C=0,w=$-1;(x!==0||C<ie)&&w!==-1;w--,C++)x+=f*j[w]>>>0,j[w]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");ie=C,z++}if(R[z]!==" "){for(var u=$-ie;u!==$&&j[u]===0;)u++;for(var b=new Uint8Array(K+($-u)),G=K;u!==$;)b[G++]=j[u++];return b}}}function T(R){var z=S(R);if(z)return z;throw new Error(`Non-${e} character`)}return{encode:A,decodeUnsafe:S,decode:T}}var mm=bm,wm=mm;const Em=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},Dm=n=>new TextEncoder().encode(n),Sm=n=>new TextDecoder().decode(n);class xm{constructor(e,t,s){this.name=e,this.prefix=t,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Im{constructor(e,t,s){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return qd(this,e)}}class Om{constructor(e){this.decoders=e}or(e){return qd(this,e)}decode(e){const t=e[0],s=this.decoders[t];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const qd=(n,e)=>new Om({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}});class Pm{constructor(e,t,s,o){this.name=e,this.prefix=t,this.baseEncode=s,this.baseDecode=o,this.encoder=new xm(e,t,s),this.decoder=new Im(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Go=({name:n,prefix:e,encode:t,decode:s})=>new Pm(n,e,t,s),ms=({prefix:n,name:e,alphabet:t})=>{const{encode:s,decode:o}=wm(t,e);return Go({prefix:n,name:e,encode:s,decode:c=>Em(o(c))})},Cm=(n,e,t,s)=>{const o={};for(let E=0;E<e.length;++E)o[e[E]]=E;let c=n.length;for(;n[c-1]==="=";)--c;const l=new Uint8Array(c*t/8|0);let f=0,y=0,p=0;for(let E=0;E<c;++E){const A=o[n[E]];if(A===void 0)throw new SyntaxError(`Non-${s} character`);y=y<<t|A,f+=t,f>=8&&(f-=8,l[p++]=255&y>>f)}if(f>=t||255&y<<8-f)throw new SyntaxError("Unexpected end of data");return l},Am=(n,e,t)=>{const s=e[e.length-1]==="=",o=(1<<t)-1;let c="",l=0,f=0;for(let y=0;y<n.length;++y)for(f=f<<8|n[y],l+=8;l>t;)l-=t,c+=e[o&f>>l];if(l&&(c+=e[o&f<<t-l]),s)for(;c.length*t&7;)c+="=";return c},Yt=({name:n,prefix:e,bitsPerChar:t,alphabet:s})=>Go({prefix:e,name:n,encode(o){return Am(o,s,t)},decode(o){return Cm(o,s,t,n)}}),Tm=Go({prefix:"\0",name:"identity",encode:n=>Sm(n),decode:n=>Dm(n)});var Rm=Object.freeze({__proto__:null,identity:Tm});const Nm=Yt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var $m=Object.freeze({__proto__:null,base2:Nm});const Fm=Yt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Um=Object.freeze({__proto__:null,base8:Fm});const jm=ms({prefix:"9",name:"base10",alphabet:"0123456789"});var Lm=Object.freeze({__proto__:null,base10:jm});const Mm=Yt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Bm=Yt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var qm=Object.freeze({__proto__:null,base16:Mm,base16upper:Bm});const zm=Yt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Hm=Yt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Km=Yt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Vm=Yt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),km=Yt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Gm=Yt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Wm=Yt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Ym=Yt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Jm=Yt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Xm=Object.freeze({__proto__:null,base32:zm,base32hex:km,base32hexpad:Wm,base32hexpadupper:Ym,base32hexupper:Gm,base32pad:Km,base32padupper:Vm,base32upper:Hm,base32z:Jm});const Qm=ms({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Zm=ms({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var ew=Object.freeze({__proto__:null,base36:Qm,base36upper:Zm});const tw=ms({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),rw=ms({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var nw=Object.freeze({__proto__:null,base58btc:tw,base58flickr:rw});const iw=Yt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),sw=Yt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ow=Yt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),aw=Yt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var cw=Object.freeze({__proto__:null,base64:iw,base64pad:sw,base64url:ow,base64urlpad:aw});const zd=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),uw=zd.reduce((n,e,t)=>(n[t]=e,n),[]),hw=zd.reduce((n,e,t)=>(n[e.codePointAt(0)]=t,n),[]);function lw(n){return n.reduce((e,t)=>(e+=uw[t],e),"")}function fw(n){const e=[];for(const t of n){const s=hw[t.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(s)}return new Uint8Array(e)}const dw=Go({prefix:"\u{1F680}",name:"base256emoji",encode:lw,decode:fw});var pw=Object.freeze({__proto__:null,base256emoji:dw});new TextEncoder;new TextDecoder;const Xl={...Rm,...$m,...Um,...Lm,...qm,...Xm,...ew,...nw,...cw,...pw};function Hd(n,e,t,s){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:t},decoder:{decode:s}}}const Ql=Hd("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),Ic=Hd("ascii","a",n=>{let e="a";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return e},n=>{n=n.substring(1);const e=Bd(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}),Kd={utf8:Ql,"utf-8":Ql,hex:Xl.base16,latin1:Ic,ascii:Ic,binary:Ic,...Xl};function vr(n,e="utf8"){const t=Kd[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Au(globalThis.Buffer.from(n,"utf-8")):t.decoder.decode(`${t.prefix}${n}`)}function ur(n,e="utf8"){const t=Kd[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("utf8"):t.encoder.encode(n).substring(1)}var Zl=function(n,e,t){if(t||arguments.length===2)for(var s=0,o=e.length,c;s<o;s++)(c||!(s in e))&&(c||(c=Array.prototype.slice.call(e,0,s)),c[s]=e[s]);return n.concat(c||Array.prototype.slice.call(e))},gw=function(){function n(e,t,s){this.name=e,this.version=t,this.os=s,this.type="browser"}return n}(),yw=function(){function n(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return n}(),_w=function(){function n(e,t,s,o){this.name=e,this.version=t,this.os=s,this.bot=o,this.type="bot-device"}return n}(),vw=function(){function n(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return n}(),bw=function(){function n(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return n}(),mw=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,ww=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,ef=3,Ew=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",mw]],tf=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Dw(n){return n?rf(n):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new bw:typeof navigator<"u"?rf(navigator.userAgent):Iw()}function Sw(n){return n!==""&&Ew.reduce(function(e,t){var s=t[0],o=t[1];if(e)return e;var c=o.exec(n);return!!c&&[s,c]},!1)}function rf(n){var e=Sw(n);if(!e)return null;var t=e[0],s=e[1];if(t==="searchbot")return new vw;var o=s[1]&&s[1].split(".").join("_").split("_").slice(0,3);o?o.length<ef&&(o=Zl(Zl([],o,!0),Ow(ef-o.length),!0)):o=[];var c=o.join("."),l=xw(n),f=ww.exec(n);return f&&f[1]?new _w(t,c,l,f[1]):new gw(t,c,l)}function xw(n){for(var e=0,t=tf.length;e<t;e++){var s=tf[e],o=s[0],c=s[1],l=c.exec(n);if(l)return o}return null}function Iw(){var n=typeof process<"u"&&process.version;return n?new yw(process.version.slice(1)):null}function Ow(n){for(var e=[],t=0;t<n;t++)e.push("0");return e}var _e={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Zc=function(n,e){return Zc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)s.hasOwnProperty(o)&&(t[o]=s[o])},Zc(n,e)};function Pw(n,e){Zc(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var eu=function(){return eu=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},eu.apply(this,arguments)};function Cw(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(n);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(n,s[o])&&(t[s[o]]=n[s[o]]);return t}function Aw(n,e,t,s){var o=arguments.length,c=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(n,e,t,s);else for(var f=n.length-1;f>=0;f--)(l=n[f])&&(c=(o<3?l(c):o>3?l(e,t,c):l(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function Tw(n,e){return function(t,s){e(t,s,n)}}function Rw(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function Nw(n,e,t,s){function o(c){return c instanceof t?c:new t(function(l){l(c)})}return new(t||(t=Promise))(function(c,l){function f(E){try{p(s.next(E))}catch(A){l(A)}}function y(E){try{p(s.throw(E))}catch(A){l(A)}}function p(E){E.done?c(E.value):o(E.value).then(f,y)}p((s=s.apply(n,e||[])).next())})}function $w(n,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(p){return function(E){return y([p,E])}}function y(p){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,o&&(c=p[0]&2?o.return:p[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,p[1])).done)return c;switch(o=0,c&&(p=[p[0]&2,c.value]),p[0]){case 0:case 1:c=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,o=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!c||p[1]>c[0]&&p[1]<c[3])){t.label=p[1];break}if(p[0]===6&&t.label<c[1]){t.label=c[1],c=p;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(p);break}c[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(n,t)}catch(E){p=[6,E],o=0}finally{s=c=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function Fw(n,e,t,s){s===void 0&&(s=t),n[s]=e[t]}function Uw(n,e){for(var t in n)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function tu(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Vd(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var s=t.call(n),o,c=[],l;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)c.push(o.value)}catch(f){l={error:f}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(l)throw l.error}}return c}function jw(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(Vd(arguments[e]));return n}function Lw(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var s=Array(n),o=0,e=0;e<t;e++)for(var c=arguments[e],l=0,f=c.length;l<f;l++,o++)s[o]=c[l];return s}function fs(n){return this instanceof fs?(this.v=n,this):new fs(n)}function Mw(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),o,c=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(S){s[S]&&(o[S]=function(T){return new Promise(function(R,z){c.push([S,T,R,z])>1||f(S,T)})})}function f(S,T){try{y(s[S](T))}catch(R){A(c[0][3],R)}}function y(S){S.value instanceof fs?Promise.resolve(S.value.v).then(p,E):A(c[0][2],S)}function p(S){f("next",S)}function E(S){f("throw",S)}function A(S,T){S(T),c.shift(),c.length&&f(c[0][0],c[0][1])}}function Bw(n){var e,t;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,c){e[o]=n[o]?function(l){return(t=!t)?{value:fs(n[o](l)),done:o==="return"}:c?c(l):l}:c}}function qw(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof tu=="function"?tu(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(c){t[c]=n[c]&&function(l){return new Promise(function(f,y){l=n[c](l),o(f,y,l.done,l.value)})}}function o(c,l,f,y){Promise.resolve(y).then(function(p){c({value:p,done:f})},l)}}function zw(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function Hw(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function Kw(n){return n&&n.__esModule?n:{default:n}}function Vw(n,e){if(!e.has(n))throw new TypeError("attempted to get private field on non-instance");return e.get(n)}function kw(n,e,t){if(!e.has(n))throw new TypeError("attempted to set private field on non-instance");return e.set(n,t),t}var Gw=Object.freeze({__proto__:null,get __assign(){return eu},__asyncDelegator:Bw,__asyncGenerator:Mw,__asyncValues:qw,__await:fs,__awaiter:Nw,__classPrivateFieldGet:Vw,__classPrivateFieldSet:kw,__createBinding:Fw,__decorate:Aw,__exportStar:Uw,__extends:Pw,__generator:$w,__importDefault:Kw,__importStar:Hw,__makeTemplateObject:zw,__metadata:Rw,__param:Tw,__read:Vd,__rest:Cw,__spread:jw,__spreadArrays:Lw,__values:tu}),Wo=ti(Gw),Oc={},Zi={},nf;function Ww(){if(nf)return Zi;nf=1,Object.defineProperty(Zi,"__esModule",{value:!0}),Zi.delay=void 0;function n(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}return Zi.delay=n,Zi}var Yn={},Pc={},Jn={},sf;function Yw(){return sf||(sf=1,Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.ONE_THOUSAND=Jn.ONE_HUNDRED=void 0,Jn.ONE_HUNDRED=100,Jn.ONE_THOUSAND=1e3),Jn}var Cc={},of;function Jw(){return of||(of=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ONE_YEAR=n.FOUR_WEEKS=n.THREE_WEEKS=n.TWO_WEEKS=n.ONE_WEEK=n.THIRTY_DAYS=n.SEVEN_DAYS=n.FIVE_DAYS=n.THREE_DAYS=n.ONE_DAY=n.TWENTY_FOUR_HOURS=n.TWELVE_HOURS=n.SIX_HOURS=n.THREE_HOURS=n.ONE_HOUR=n.SIXTY_MINUTES=n.THIRTY_MINUTES=n.TEN_MINUTES=n.FIVE_MINUTES=n.ONE_MINUTE=n.SIXTY_SECONDS=n.THIRTY_SECONDS=n.TEN_SECONDS=n.FIVE_SECONDS=n.ONE_SECOND=void 0,n.ONE_SECOND=1,n.FIVE_SECONDS=5,n.TEN_SECONDS=10,n.THIRTY_SECONDS=30,n.SIXTY_SECONDS=60,n.ONE_MINUTE=n.SIXTY_SECONDS,n.FIVE_MINUTES=n.ONE_MINUTE*5,n.TEN_MINUTES=n.ONE_MINUTE*10,n.THIRTY_MINUTES=n.ONE_MINUTE*30,n.SIXTY_MINUTES=n.ONE_MINUTE*60,n.ONE_HOUR=n.SIXTY_MINUTES,n.THREE_HOURS=n.ONE_HOUR*3,n.SIX_HOURS=n.ONE_HOUR*6,n.TWELVE_HOURS=n.ONE_HOUR*12,n.TWENTY_FOUR_HOURS=n.ONE_HOUR*24,n.ONE_DAY=n.TWENTY_FOUR_HOURS,n.THREE_DAYS=n.ONE_DAY*3,n.FIVE_DAYS=n.ONE_DAY*5,n.SEVEN_DAYS=n.ONE_DAY*7,n.THIRTY_DAYS=n.ONE_DAY*30,n.ONE_WEEK=n.SEVEN_DAYS,n.TWO_WEEKS=n.ONE_WEEK*2,n.THREE_WEEKS=n.ONE_WEEK*3,n.FOUR_WEEKS=n.ONE_WEEK*4,n.ONE_YEAR=n.ONE_DAY*365}(Cc)),Cc}var af;function kd(){return af||(af=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=Wo;e.__exportStar(Yw(),n),e.__exportStar(Jw(),n)}(Pc)),Pc}var cf;function Xw(){if(cf)return Yn;cf=1,Object.defineProperty(Yn,"__esModule",{value:!0}),Yn.fromMiliseconds=Yn.toMiliseconds=void 0;const n=kd();function e(s){return s*n.ONE_THOUSAND}Yn.toMiliseconds=e;function t(s){return Math.floor(s/n.ONE_THOUSAND)}return Yn.fromMiliseconds=t,Yn}var uf;function Qw(){return uf||(uf=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=Wo;e.__exportStar(Ww(),n),e.__exportStar(Xw(),n)}(Oc)),Oc}var Ii={},hf;function Zw(){if(hf)return Ii;hf=1,Object.defineProperty(Ii,"__esModule",{value:!0}),Ii.Watch=void 0;class n{constructor(){this.timestamps=new Map}start(t){if(this.timestamps.has(t))throw new Error(`Watch already started for label: ${t}`);this.timestamps.set(t,{started:Date.now()})}stop(t){const s=this.get(t);if(typeof s.elapsed<"u")throw new Error(`Watch already stopped for label: ${t}`);const o=Date.now()-s.started;this.timestamps.set(t,{started:s.started,elapsed:o})}get(t){const s=this.timestamps.get(t);if(typeof s>"u")throw new Error(`No timestamp found for label: ${t}`);return s}elapsed(t){const s=this.get(t);return s.elapsed||Date.now()-s.started}}return Ii.Watch=n,Ii.default=n,Ii}var Ac={},es={},lf;function eE(){if(lf)return es;lf=1,Object.defineProperty(es,"__esModule",{value:!0}),es.IWatch=void 0;class n{}return es.IWatch=n,es}var ff;function tE(){return ff||(ff=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),Wo.__exportStar(eE(),n)}(Ac)),Ac}(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=Wo;e.__exportStar(Qw(),n),e.__exportStar(Zw(),n),e.__exportStar(tE(),n),e.__exportStar(kd(),n)})(_e);var lt={};Object.defineProperty(lt,"__esModule",{value:!0});lt.getLocalStorage=lt.getLocalStorageOrThrow=lt.getCrypto=lt.getCryptoOrThrow=Wd=lt.getLocation=lt.getLocationOrThrow=Tu=lt.getNavigator=lt.getNavigatorOrThrow=Gd=lt.getDocument=lt.getDocumentOrThrow=lt.getFromWindowOrThrow=lt.getFromWindow=void 0;function ri(n){let e;return typeof window<"u"&&typeof window[n]<"u"&&(e=window[n]),e}lt.getFromWindow=ri;function Ri(n){const e=ri(n);if(!e)throw new Error(`${n} is not defined in Window`);return e}lt.getFromWindowOrThrow=Ri;function rE(){return Ri("document")}lt.getDocumentOrThrow=rE;function nE(){return ri("document")}var Gd=lt.getDocument=nE;function iE(){return Ri("navigator")}lt.getNavigatorOrThrow=iE;function sE(){return ri("navigator")}var Tu=lt.getNavigator=sE;function oE(){return Ri("location")}lt.getLocationOrThrow=oE;function aE(){return ri("location")}var Wd=lt.getLocation=aE;function cE(){return Ri("crypto")}lt.getCryptoOrThrow=cE;function uE(){return ri("crypto")}lt.getCrypto=uE;function hE(){return Ri("localStorage")}lt.getLocalStorageOrThrow=hE;function lE(){return ri("localStorage")}lt.getLocalStorage=lE;var Ru={};Object.defineProperty(Ru,"__esModule",{value:!0});var Yd=Ru.getWindowMetadata=void 0;const df=lt;function fE(){let n,e;try{n=df.getDocumentOrThrow(),e=df.getLocationOrThrow()}catch{return null}function t(){const A=n.getElementsByTagName("link"),S=[];for(let T=0;T<A.length;T++){const R=A[T],z=R.getAttribute("rel");if(z&&z.toLowerCase().indexOf("icon")>-1){const K=R.getAttribute("href");if(K)if(K.toLowerCase().indexOf("https:")===-1&&K.toLowerCase().indexOf("http:")===-1&&K.indexOf("//")!==0){let ie=e.protocol+"//"+e.host;if(K.indexOf("/")===0)ie+=K;else{const $=e.pathname.split("/");$.pop();const j=$.join("/");ie+=j+"/"+K}S.push(ie)}else if(K.indexOf("//")===0){const ie=e.protocol+K;S.push(ie)}else S.push(K)}}return S}function s(...A){const S=n.getElementsByTagName("meta");for(let T=0;T<S.length;T++){const R=S[T],z=["itemprop","property","name"].map(K=>R.getAttribute(K)).filter(K=>K?A.includes(K):!1);if(z.length&&z){const K=R.getAttribute("content");if(K)return K}}return""}function o(){let A=s("name","og:site_name","og:title","twitter:title");return A||(A=n.title),A}function c(){return s("description","og:description","twitter:description","keywords")}const l=o(),f=c(),y=e.origin,p=t();return{description:f,url:y,icons:p,name:l}}Yd=Ru.getWindowMetadata=fE;var ds={},dE=n=>encodeURIComponent(n).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),Jd="%[a-f0-9]{2}",pf=new RegExp("("+Jd+")|([^%]+?)","gi"),gf=new RegExp("("+Jd+")+","gi");function ru(n,e){try{return[decodeURIComponent(n.join(""))]}catch{}if(n.length===1)return n;e=e||1;var t=n.slice(0,e),s=n.slice(e);return Array.prototype.concat.call([],ru(t),ru(s))}function pE(n){try{return decodeURIComponent(n)}catch{for(var e=n.match(pf)||[],t=1;t<e.length;t++)n=ru(e,t).join(""),e=n.match(pf)||[];return n}}function gE(n){for(var e={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},t=gf.exec(n);t;){try{e[t[0]]=decodeURIComponent(t[0])}catch{var s=pE(t[0]);s!==t[0]&&(e[t[0]]=s)}t=gf.exec(n)}e["%C2"]="\uFFFD";for(var o=Object.keys(e),c=0;c<o.length;c++){var l=o[c];n=n.replace(new RegExp(l,"g"),e[l])}return n}var yE=function(n){if(typeof n!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof n+"`");try{return n=n.replace(/\+/g," "),decodeURIComponent(n)}catch{return gE(n)}},_E=(n,e)=>{if(!(typeof n=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[n];const t=n.indexOf(e);return t===-1?[n]:[n.slice(0,t),n.slice(t+e.length)]},vE=function(n,e){for(var t={},s=Object.keys(n),o=Array.isArray(e),c=0;c<s.length;c++){var l=s[c],f=n[l];(o?e.indexOf(l)!==-1:e(l,f,n))&&(t[l]=f)}return t};(function(n){const e=dE,t=yE,s=_E,o=vE,c=$=>$==null,l=Symbol("encodeFragmentIdentifier");function f($){switch($.arrayFormat){case"index":return j=>(x,C)=>{const w=x.length;return C===void 0||$.skipNull&&C===null||$.skipEmptyString&&C===""?x:C===null?[...x,[E(j,$),"[",w,"]"].join("")]:[...x,[E(j,$),"[",E(w,$),"]=",E(C,$)].join("")]};case"bracket":return j=>(x,C)=>C===void 0||$.skipNull&&C===null||$.skipEmptyString&&C===""?x:C===null?[...x,[E(j,$),"[]"].join("")]:[...x,[E(j,$),"[]=",E(C,$)].join("")];case"colon-list-separator":return j=>(x,C)=>C===void 0||$.skipNull&&C===null||$.skipEmptyString&&C===""?x:C===null?[...x,[E(j,$),":list="].join("")]:[...x,[E(j,$),":list=",E(C,$)].join("")];case"comma":case"separator":case"bracket-separator":{const j=$.arrayFormat==="bracket-separator"?"[]=":"=";return x=>(C,w)=>w===void 0||$.skipNull&&w===null||$.skipEmptyString&&w===""?C:(w=w===null?"":w,C.length===0?[[E(x,$),j,E(w,$)].join("")]:[[C,E(w,$)].join($.arrayFormatSeparator)])}default:return j=>(x,C)=>C===void 0||$.skipNull&&C===null||$.skipEmptyString&&C===""?x:C===null?[...x,E(j,$)]:[...x,[E(j,$),"=",E(C,$)].join("")]}}function y($){let j;switch($.arrayFormat){case"index":return(x,C,w)=>{if(j=/\[(\d*)\]$/.exec(x),x=x.replace(/\[\d*\]$/,""),!j){w[x]=C;return}w[x]===void 0&&(w[x]={}),w[x][j[1]]=C};case"bracket":return(x,C,w)=>{if(j=/(\[\])$/.exec(x),x=x.replace(/\[\]$/,""),!j){w[x]=C;return}if(w[x]===void 0){w[x]=[C];return}w[x]=[].concat(w[x],C)};case"colon-list-separator":return(x,C,w)=>{if(j=/(:list)$/.exec(x),x=x.replace(/:list$/,""),!j){w[x]=C;return}if(w[x]===void 0){w[x]=[C];return}w[x]=[].concat(w[x],C)};case"comma":case"separator":return(x,C,w)=>{const u=typeof C=="string"&&C.includes($.arrayFormatSeparator),b=typeof C=="string"&&!u&&A(C,$).includes($.arrayFormatSeparator);C=b?A(C,$):C;const G=u||b?C.split($.arrayFormatSeparator).map(W=>A(W,$)):C===null?C:A(C,$);w[x]=G};case"bracket-separator":return(x,C,w)=>{const u=/(\[\])$/.test(x);if(x=x.replace(/\[\]$/,""),!u){w[x]=C&&A(C,$);return}const b=C===null?[]:C.split($.arrayFormatSeparator).map(G=>A(G,$));if(w[x]===void 0){w[x]=b;return}w[x]=[].concat(w[x],b)};default:return(x,C,w)=>{if(w[x]===void 0){w[x]=C;return}w[x]=[].concat(w[x],C)}}}function p($){if(typeof $!="string"||$.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function E($,j){return j.encode?j.strict?e($):encodeURIComponent($):$}function A($,j){return j.decode?t($):$}function S($){return Array.isArray($)?$.sort():typeof $=="object"?S(Object.keys($)).sort((j,x)=>Number(j)-Number(x)).map(j=>$[j]):$}function T($){const j=$.indexOf("#");return j!==-1&&($=$.slice(0,j)),$}function R($){let j="";const x=$.indexOf("#");return x!==-1&&(j=$.slice(x)),j}function z($){$=T($);const j=$.indexOf("?");return j===-1?"":$.slice(j+1)}function K($,j){return j.parseNumbers&&!Number.isNaN(Number($))&&typeof $=="string"&&$.trim()!==""?$=Number($):j.parseBooleans&&$!==null&&($.toLowerCase()==="true"||$.toLowerCase()==="false")&&($=$.toLowerCase()==="true"),$}function ie($,j){j=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},j),p(j.arrayFormatSeparator);const x=y(j),C=Object.create(null);if(typeof $!="string"||($=$.trim().replace(/^[?#&]/,""),!$))return C;for(const w of $.split("&")){if(w==="")continue;let[u,b]=s(j.decode?w.replace(/\+/g," "):w,"=");b=b===void 0?null:["comma","separator","bracket-separator"].includes(j.arrayFormat)?b:A(b,j),x(A(u,j),b,C)}for(const w of Object.keys(C)){const u=C[w];if(typeof u=="object"&&u!==null)for(const b of Object.keys(u))u[b]=K(u[b],j);else C[w]=K(u,j)}return j.sort===!1?C:(j.sort===!0?Object.keys(C).sort():Object.keys(C).sort(j.sort)).reduce((w,u)=>{const b=C[u];return Boolean(b)&&typeof b=="object"&&!Array.isArray(b)?w[u]=S(b):w[u]=b,w},Object.create(null))}n.extract=z,n.parse=ie,n.stringify=($,j)=>{if(!$)return"";j=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},j),p(j.arrayFormatSeparator);const x=b=>j.skipNull&&c($[b])||j.skipEmptyString&&$[b]==="",C=f(j),w={};for(const b of Object.keys($))x(b)||(w[b]=$[b]);const u=Object.keys(w);return j.sort!==!1&&u.sort(j.sort),u.map(b=>{const G=$[b];return G===void 0?"":G===null?E(b,j):Array.isArray(G)?G.length===0&&j.arrayFormat==="bracket-separator"?E(b,j)+"[]":G.reduce(C(b),[]).join("&"):E(b,j)+"="+E(G,j)}).filter(b=>b.length>0).join("&")},n.parseUrl=($,j)=>{j=Object.assign({decode:!0},j);const[x,C]=s($,"#");return Object.assign({url:x.split("?")[0]||"",query:ie(z($),j)},j&&j.parseFragmentIdentifier&&C?{fragmentIdentifier:A(C,j)}:{})},n.stringifyUrl=($,j)=>{j=Object.assign({encode:!0,strict:!0,[l]:!0},j);const x=T($.url).split("?")[0]||"",C=n.extract($.url),w=n.parse(C,{sort:!1}),u=Object.assign(w,$.query);let b=n.stringify(u,j);b&&(b=`?${b}`);let G=R($.url);return $.fragmentIdentifier&&(G=`#${j[l]?E($.fragmentIdentifier,j):$.fragmentIdentifier}`),`${x}${b}${G}`},n.pick=($,j,x)=>{x=Object.assign({parseFragmentIdentifier:!0,[l]:!1},x);const{url:C,query:w,fragmentIdentifier:u}=n.parseUrl($,x);return n.stringifyUrl({url:C,query:o(w,j),fragmentIdentifier:u},x)},n.exclude=($,j,x)=>{const C=Array.isArray(j)?w=>!j.includes(w):(w,u)=>!j(w,u);return n.pick($,C,x)}})(ds);const bE={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function mE(n,e=[]){const t=[];return Object.keys(n).forEach(s=>{if(e.length&&!e.includes(s))return;const o=n[s];t.push(...o.accounts)}),t}function Xd(n,e){return n.includes(":")?[n]:e.chains||[]}const Qd="base10",cr="base16",nu="base64pad",Nu="utf8",Zd=0,ni=1,wE=0,yf=1,iu=12,$u=32;function EE(){const n=Cu.generateKeyPair();return{privateKey:ur(n.secretKey,cr),publicKey:ur(n.publicKey,cr)}}function su(){const n=Ti.randomBytes($u);return ur(n,cr)}function DE(n,e){const t=Cu.sharedKey(vr(n,cr),vr(e,cr)),s=new cm(ko.SHA256,t).expand($u);return ur(s,cr)}function SE(n){const e=ko.hash(vr(n,cr));return ur(e,cr)}function Ci(n){const e=ko.hash(vr(n,Nu));return ur(e,cr)}function xE(n){return vr(`${n}`,Qd)}function ws(n){return Number(ur(n,Qd))}function IE(n){const e=xE(typeof n.type<"u"?n.type:Zd);if(ws(e)===ni&&typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof n.senderPublicKey<"u"?vr(n.senderPublicKey,cr):void 0,s=typeof n.iv<"u"?vr(n.iv,cr):Ti.randomBytes(iu),o=new Ou.ChaCha20Poly1305(vr(n.symKey,cr)).seal(s,vr(n.message,Nu));return PE({type:e,sealed:o,iv:s,senderPublicKey:t})}function OE(n){const e=new Ou.ChaCha20Poly1305(vr(n.symKey,cr)),{sealed:t,iv:s}=Lo(n.encoded),o=e.open(s,t);if(o===null)throw new Error("Failed to decrypt");return ur(o,Nu)}function PE(n){if(ws(n.type)===ni){if(typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return ur(Qc([n.type,n.senderPublicKey,n.iv,n.sealed]),nu)}return ur(Qc([n.type,n.iv,n.sealed]),nu)}function Lo(n){const e=vr(n,nu),t=e.slice(wE,yf),s=yf;if(ws(t)===ni){const f=s+$u,y=f+iu,p=e.slice(s,f),E=e.slice(f,y),A=e.slice(y);return{type:t,sealed:A,iv:E,senderPublicKey:p}}const o=s+iu,c=e.slice(s,o),l=e.slice(o);return{type:t,sealed:l,iv:c}}function CE(n,e){const t=Lo(n);return ep({type:ws(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?ur(t.senderPublicKey,cr):void 0,receiverPublicKey:e?.receiverPublicKey})}function ep(n){const e=n?.type||Zd;if(e===ni){if(typeof n?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof n?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:n?.senderPublicKey,receiverPublicKey:n?.receiverPublicKey}}function _f(n){return n.type===ni&&typeof n.senderPublicKey=="string"&&typeof n.receiverPublicKey=="string"}var AE=Object.defineProperty,vf=Object.getOwnPropertySymbols,TE=Object.prototype.hasOwnProperty,RE=Object.prototype.propertyIsEnumerable,bf=(n,e,t)=>e in n?AE(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,mf=(n,e)=>{for(var t in e||(e={}))TE.call(e,t)&&bf(n,t,e[t]);if(vf)for(var t of vf(e))RE.call(e,t)&&bf(n,t,e[t]);return n};const NE="ReactNative",Zn={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},$E="js";function Fu(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function tp(){return!Gd()&&!!Tu()&&navigator.product===NE}function Uu(){return!Fu()&&!!Tu()}function rp(){return tp()?Zn.reactNative:Fu()?Zn.node:Uu()?Zn.browser:Zn.unknown}function FE(n,e){let t=ds.parse(n);return t=mf(mf({},t),e),n=ds.stringify(t),n}function UE(){return Yd()||{name:"",description:"",url:"",icons:[""]}}function jE(){if(typeof(global==null?void 0:global.Platform)<"u"){const{OS:t,Version:s}=global.Platform;return[t,s].join("-")}const n=Dw();if(n===null)return"unknown";const e=n.os?n.os.replace(" ","").toLowerCase():"unknown";return n.type==="browser"?[e,n.name,n.version].join("-"):[e,n.version].join("-")}function LE(){var n;const e=rp();return e===Zn.browser?[e,((n=Wd())==null?void 0:n.host)||"unknown"].join(":"):e}function ME(n,e,t){const s=jE(),o=LE();return[[n,e].join("-"),[$E,t].join("-"),s,o].join("/")}function BE({protocol:n,version:e,relayUrl:t,sdkVersion:s,auth:o,projectId:c,useOnCloseEvent:l}){const f=t.split("?"),y=ME(n,e,s),p={auth:o,ua:y,projectId:c,useOnCloseEvent:l||void 0},E=FE(f[1]||"",p);return f[0]+"?"+E}function ei(n,e){return n.filter(t=>e.includes(t)).length===n.length}function np(n){return Object.fromEntries(n.entries())}function ip(n){return new Map(Object.entries(n))}function Oi(n=_e.FIVE_MINUTES,e){const t=_e.toMiliseconds(n||_e.FIVE_MINUTES);let s,o,c;return{resolve:l=>{c&&s&&(clearTimeout(c),s(l))},reject:l=>{c&&o&&(clearTimeout(c),o(l))},done:()=>new Promise((l,f)=>{c=setTimeout(()=>{f(new Error(e))},t),s=l,o=f})}}function Mo(n,e,t){return new Promise(async(s,o)=>{const c=setTimeout(()=>o(new Error(t)),e);try{const l=await n;s(l)}catch(l){o(l)}clearTimeout(c)})}function sp(n,e){if(typeof e=="string"&&e.startsWith(`${n}:`))return e;if(n.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(n.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${n}`)}function qE(n){return sp("topic",n)}function zE(n){return sp("id",n)}function op(n){const[e,t]=n.split(":"),s={id:void 0,topic:void 0};if(e==="topic"&&typeof t=="string")s.topic=t;else if(e==="id"&&Number.isInteger(Number(t)))s.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);return s}function tn(n,e){return _e.fromMiliseconds((e||Date.now())+_e.toMiliseconds(n))}function An(n){return Date.now()>=_e.toMiliseconds(n)}function zt(n,e){return`${n}${e?`:${e}`:""}`}function Tc(n=[],e=[]){return[...new Set([...n,...e])]}async function HE({id:n,topic:e,wcDeepLink:t}){try{if(!t)return;let o=(typeof t=="string"?JSON.parse(t):t)?.href;if(typeof o!="string")return;o.endsWith("/")&&(o=o.slice(0,-1));const c=`${o}/wc?requestId=${n}&sessionTopic=${e}`,l=rp();l===Zn.browser?window.open(c,"_self","noreferrer noopener"):l===Zn.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(c)}catch(s){console.error(s)}}const KE="irn";function ou(n){return n?.relay||{protocol:KE}}function No(n){const e=bE[n];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${n}`);return e}var VE=Object.defineProperty,wf=Object.getOwnPropertySymbols,kE=Object.prototype.hasOwnProperty,GE=Object.prototype.propertyIsEnumerable,Ef=(n,e,t)=>e in n?VE(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,WE=(n,e)=>{for(var t in e||(e={}))kE.call(e,t)&&Ef(n,t,e[t]);if(wf)for(var t of wf(e))GE.call(e,t)&&Ef(n,t,e[t]);return n};function YE(n,e="-"){const t={},s="relay"+e;return Object.keys(n).forEach(o=>{if(o.startsWith(s)){const c=o.replace(s,""),l=n[o];t[c]=l}}),t}function JE(n){const e=n.indexOf(":"),t=n.indexOf("?")!==-1?n.indexOf("?"):void 0,s=n.substring(0,e),o=n.substring(e+1,t).split("@"),c=typeof t<"u"?n.substring(t):"",l=ds.parse(c);return{protocol:s,topic:XE(o[0]),version:parseInt(o[1],10),symKey:l.symKey,relay:YE(l)}}function XE(n){return n.startsWith("//")?n.substring(2):n}function QE(n,e="-"){const t="relay",s={};return Object.keys(n).forEach(o=>{const c=t+e+o;n[o]&&(s[c]=n[o])}),s}function ZE(n){return`${n.protocol}:${n.topic}@${n.version}?`+ds.stringify(WE({symKey:n.symKey},QE(n.relay)))}function Ni(n){const e=[];return n.forEach(t=>{const[s,o]=t.split(":");e.push(`${s}:${o}`)}),e}function e3(n){const e=[];return Object.values(n).forEach(t=>{e.push(...Ni(t.accounts))}),e}function t3(n,e){const t=[];return Object.values(n).forEach(s=>{Ni(s.accounts).includes(e)&&t.push(...s.methods)}),t}function r3(n,e){const t=[];return Object.values(n).forEach(s=>{Ni(s.accounts).includes(e)&&t.push(...s.events)}),t}function n3(n,e){const t=Fo(n,e);if(t)throw new Error(t.message);const s={};for(const[o,c]of Object.entries(n))s[o]={methods:c.methods,events:c.events,chains:c.accounts.map(l=>`${l.split(":")[0]}:${l.split(":")[1]}`)};return s}function ap(n){return n.includes(":")}function $o(n){return ap(n)?n.split(":")[0]:n}const i3={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},s3={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function he(n,e){const{message:t,code:s}=s3[n];return{message:e?`${t} ${e}`:t,code:s}}function Nt(n,e){const{message:t,code:s}=i3[n];return{message:e?`${t} ${e}`:t,code:s}}function vn(n,e){return Array.isArray(n)?typeof e<"u"&&n.length?n.every(e):!0:!1}function Ai(n){return Object.getPrototypeOf(n)===Object.prototype&&Object.keys(n).length}function ar(n){return typeof n>"u"}function Gt(n,e){return e&&ar(n)?!0:typeof n=="string"&&!!n.trim().length}function ju(n,e){return e&&ar(n)?!0:typeof n=="number"&&!isNaN(n)}function o3(n,e){const{requiredNamespaces:t}=e,s=Object.keys(n.namespaces),o=Object.keys(t);let c=!0;return ei(o,s)?(s.forEach(l=>{const{accounts:f,methods:y,events:p}=n.namespaces[l],E=Ni(f),A=t[l];(!ei(Xd(l,A),E)||!ei(A.methods,y)||!ei(A.events,p))&&(c=!1)}),c):!1}function Lu(n){return Gt(n,!1)&&n.includes(":")?n.split(":").length===2:!1}function a3(n){if(Gt(n,!1)&&n.includes(":")){const e=n.split(":");if(e.length===3){const t=e[0]+":"+e[1];return!!e[2]&&Lu(t)}}return!1}function c3(n){if(Gt(n,!1))try{return typeof new URL(n)<"u"}catch{return!1}return!1}function u3(n){var e;return(e=n?.proposer)==null?void 0:e.publicKey}function h3(n){return n?.topic}function l3(n,e){let t=null;return Gt(n?.publicKey,!1)||(t=he("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}function Df(n){let e=!0;return vn(n)?n.length&&(e=n.every(t=>Gt(t,!1))):e=!1,e}function f3(n,e,t){let s=null;return vn(e)?e.forEach(o=>{s||(!Lu(o)||!o.includes(n))&&(s=Nt("UNSUPPORTED_CHAINS",`${t}, chain ${o} should be a string and conform to "namespace:chainId" format`))}):s=Nt("UNSUPPORTED_CHAINS",`${t}, chains ${e} should be an array of strings conforming to "namespace:chainId" format`),s}function d3(n,e){let t=null;return Object.entries(n).forEach(([s,o])=>{if(t)return;const c=f3(s,Xd(s,o),`${e} requiredNamespace`);c&&(t=c)}),t}function p3(n,e){let t=null;return vn(n)?n.forEach(s=>{t||a3(s)||(t=Nt("UNSUPPORTED_ACCOUNTS",`${e}, account ${s} should be a string and conform to "namespace:chainId:address" format`))}):t=Nt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function g3(n,e){let t=null;return Object.values(n).forEach(s=>{if(t)return;const o=p3(s?.accounts,`${e} namespace`);o&&(t=o)}),t}function y3(n,e){let t=null;return Df(n?.methods)?Df(n?.events)||(t=Nt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=Nt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}function cp(n,e){let t=null;return Object.values(n).forEach(s=>{if(t)return;const o=y3(s,`${e}, namespace`);o&&(t=o)}),t}function _3(n,e,t){let s=null;if(n&&Ai(n)){const o=cp(n,e);o&&(s=o);const c=d3(n,e);c&&(s=c)}else s=he("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return s}function Fo(n,e){let t=null;if(n&&Ai(n)){const s=cp(n,e);s&&(t=s);const o=g3(n,e);o&&(t=o)}else t=he("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function up(n){return Gt(n.protocol,!0)}function v3(n,e){let t=!1;return e&&!n?t=!0:n&&vn(n)&&n.length&&n.forEach(s=>{t=up(s)}),t}function b3(n){return typeof n=="number"}function yr(n){return typeof n<"u"&&typeof n!==null}function m3(n){return!(!n||typeof n!="object"||!n.code||!ju(n.code,!1)||!n.message||!Gt(n.message,!1))}function w3(n){return!(ar(n)||!Gt(n.method,!1))}function E3(n){return!(ar(n)||ar(n.result)&&ar(n.error)||!ju(n.id,!1)||!Gt(n.jsonrpc,!1))}function D3(n){return!(ar(n)||!Gt(n.name,!1))}function Sf(n,e){return!(!Lu(e)||!e3(n).includes(e))}function S3(n,e,t){return Gt(t,!1)?t3(n,e).includes(t):!1}function x3(n,e,t){return Gt(t,!1)?r3(n,e).includes(t):!1}function xf(n,e,t){let s=null;const o=I3(n),c=O3(e),l=Object.keys(o),f=Object.keys(c),y=If(Object.keys(n)),p=If(Object.keys(e)),E=y.filter(A=>!p.includes(A));return E.length&&(s=he("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${E.toString()}
      Received: ${Object.keys(e).toString()}`)),ei(l,f)||(s=he("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${l.toString()}
      Approved: ${f.toString()}`)),Object.keys(e).forEach(A=>{if(!A.includes(":")||s)return;const S=Ni(e[A].accounts);S.includes(A)||(s=he("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${A}
        Required: ${A}
        Approved: ${S.toString()}`))}),l.forEach(A=>{s||(ei(o[A].methods,c[A].methods)?ei(o[A].events,c[A].events)||(s=he("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${A}`)):s=he("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${A}`))}),s}function I3(n){const e={};return Object.keys(n).forEach(t=>{var s;t.includes(":")?e[t]=n[t]:(s=n[t].chains)==null||s.forEach(o=>{e[o]={methods:n[t].methods,events:n[t].events}})}),e}function If(n){return[...new Set(n.map(e=>e.includes(":")?e.split(":")[0]:e))]}function O3(n){const e={};return Object.keys(n).forEach(t=>{t.includes(":")?e[t]=n[t]:Ni(n[t].accounts)?.forEach(o=>{e[o]={accounts:n[t].accounts.filter(c=>c.includes(`${o}:`)),methods:n[t].methods,events:n[t].events}})}),e}function P3(n,e){return ju(n,!1)&&n<=e.max&&n>=e.min}var Yo={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var au=function(n,e){return au=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)s.hasOwnProperty(o)&&(t[o]=s[o])},au(n,e)};function C3(n,e){au(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var cu=function(){return cu=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},cu.apply(this,arguments)};function A3(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(n);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(n,s[o])&&(t[s[o]]=n[s[o]]);return t}function T3(n,e,t,s){var o=arguments.length,c=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(n,e,t,s);else for(var f=n.length-1;f>=0;f--)(l=n[f])&&(c=(o<3?l(c):o>3?l(e,t,c):l(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function R3(n,e){return function(t,s){e(t,s,n)}}function N3(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function $3(n,e,t,s){function o(c){return c instanceof t?c:new t(function(l){l(c)})}return new(t||(t=Promise))(function(c,l){function f(E){try{p(s.next(E))}catch(A){l(A)}}function y(E){try{p(s.throw(E))}catch(A){l(A)}}function p(E){E.done?c(E.value):o(E.value).then(f,y)}p((s=s.apply(n,e||[])).next())})}function F3(n,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(p){return function(E){return y([p,E])}}function y(p){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,o&&(c=p[0]&2?o.return:p[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,p[1])).done)return c;switch(o=0,c&&(p=[p[0]&2,c.value]),p[0]){case 0:case 1:c=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,o=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!c||p[1]>c[0]&&p[1]<c[3])){t.label=p[1];break}if(p[0]===6&&t.label<c[1]){t.label=c[1],c=p;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(p);break}c[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(n,t)}catch(E){p=[6,E],o=0}finally{s=c=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function U3(n,e,t,s){s===void 0&&(s=t),n[s]=e[t]}function j3(n,e){for(var t in n)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function uu(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function hp(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var s=t.call(n),o,c=[],l;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)c.push(o.value)}catch(f){l={error:f}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(l)throw l.error}}return c}function L3(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(hp(arguments[e]));return n}function M3(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var s=Array(n),o=0,e=0;e<t;e++)for(var c=arguments[e],l=0,f=c.length;l<f;l++,o++)s[o]=c[l];return s}function ps(n){return this instanceof ps?(this.v=n,this):new ps(n)}function B3(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),o,c=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(S){s[S]&&(o[S]=function(T){return new Promise(function(R,z){c.push([S,T,R,z])>1||f(S,T)})})}function f(S,T){try{y(s[S](T))}catch(R){A(c[0][3],R)}}function y(S){S.value instanceof ps?Promise.resolve(S.value.v).then(p,E):A(c[0][2],S)}function p(S){f("next",S)}function E(S){f("throw",S)}function A(S,T){S(T),c.shift(),c.length&&f(c[0][0],c[0][1])}}function q3(n){var e,t;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,c){e[o]=n[o]?function(l){return(t=!t)?{value:ps(n[o](l)),done:o==="return"}:c?c(l):l}:c}}function z3(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof uu=="function"?uu(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(c){t[c]=n[c]&&function(l){return new Promise(function(f,y){l=n[c](l),o(f,y,l.done,l.value)})}}function o(c,l,f,y){Promise.resolve(y).then(function(p){c({value:p,done:f})},l)}}function H3(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function K3(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function V3(n){return n&&n.__esModule?n:{default:n}}function k3(n,e){if(!e.has(n))throw new TypeError("attempted to get private field on non-instance");return e.get(n)}function G3(n,e,t){if(!e.has(n))throw new TypeError("attempted to set private field on non-instance");return e.set(n,t),t}var W3=Object.freeze({__proto__:null,get __assign(){return cu},__asyncDelegator:q3,__asyncGenerator:B3,__asyncValues:z3,__await:ps,__awaiter:$3,__classPrivateFieldGet:k3,__classPrivateFieldSet:G3,__createBinding:U3,__decorate:T3,__exportStar:j3,__extends:C3,__generator:F3,__importDefault:V3,__importStar:K3,__makeTemplateObject:H3,__metadata:N3,__param:R3,__read:hp,__rest:A3,__spread:L3,__spreadArrays:M3,__values:uu}),lp=ti(W3),Es={};Object.defineProperty(Es,"__esModule",{value:!0});function Y3(n){if(typeof n!="string")throw new Error(`Cannot safe json parse value of type ${typeof n}`);try{return JSON.parse(n)}catch{return n}}Es.safeJsonParse=Y3;function J3(n){return typeof n=="string"?n:JSON.stringify(n,(e,t)=>typeof t>"u"?null:t)}Es.safeJsonStringify=J3;var ts={exports:{}},Of;function X3(){return Of||(Of=1,function(){let n;function e(){}n=e,n.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},n.prototype.setItem=function(t,s){this[t]=String(s)},n.prototype.removeItem=function(t){delete this[t]},n.prototype.clear=function(){const t=this;Object.keys(t).forEach(function(s){t[s]=void 0,delete t[s]})},n.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},n.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof _r<"u"&&_r.localStorage?ts.exports=_r.localStorage:typeof window<"u"&&window.localStorage?ts.exports=window.localStorage:ts.exports=new e}()),ts.exports}var Rc={},rs={},Pf;function Q3(){if(Pf)return rs;Pf=1,Object.defineProperty(rs,"__esModule",{value:!0}),rs.IKeyValueStorage=void 0;class n{}return rs.IKeyValueStorage=n,rs}var ns={},Cf;function Z3(){if(Cf)return ns;Cf=1,Object.defineProperty(ns,"__esModule",{value:!0}),ns.parseEntry=void 0;const n=Es;function e(t){var s;return[t[0],n.safeJsonParse((s=t[1])!==null&&s!==void 0?s:"")]}return ns.parseEntry=e,ns}var Af;function e6(){return Af||(Af=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=lp;e.__exportStar(Q3(),n),e.__exportStar(Z3(),n)}(Rc)),Rc}Object.defineProperty(Yo,"__esModule",{value:!0});Yo.KeyValueStorage=void 0;const Pi=lp,Tf=Es,t6=Pi.__importDefault(X3()),r6=e6();class fp{constructor(){this.localStorage=t6.default}getKeys(){return Pi.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return Pi.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(r6.parseEntry)})}getItem(e){return Pi.__awaiter(this,void 0,void 0,function*(){const t=this.localStorage.getItem(e);if(t!==null)return Tf.safeJsonParse(t)})}setItem(e,t){return Pi.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(e,Tf.safeJsonStringify(t))})}removeItem(e){return Pi.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(e)})}}Yo.KeyValueStorage=fp;var n6=Yo.default=fp,Ds={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var hu=function(n,e){return hu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)s.hasOwnProperty(o)&&(t[o]=s[o])},hu(n,e)};function i6(n,e){hu(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var lu=function(){return lu=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},lu.apply(this,arguments)};function s6(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(n);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(n,s[o])&&(t[s[o]]=n[s[o]]);return t}function o6(n,e,t,s){var o=arguments.length,c=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(n,e,t,s);else for(var f=n.length-1;f>=0;f--)(l=n[f])&&(c=(o<3?l(c):o>3?l(e,t,c):l(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function a6(n,e){return function(t,s){e(t,s,n)}}function c6(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function u6(n,e,t,s){function o(c){return c instanceof t?c:new t(function(l){l(c)})}return new(t||(t=Promise))(function(c,l){function f(E){try{p(s.next(E))}catch(A){l(A)}}function y(E){try{p(s.throw(E))}catch(A){l(A)}}function p(E){E.done?c(E.value):o(E.value).then(f,y)}p((s=s.apply(n,e||[])).next())})}function h6(n,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(p){return function(E){return y([p,E])}}function y(p){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,o&&(c=p[0]&2?o.return:p[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,p[1])).done)return c;switch(o=0,c&&(p=[p[0]&2,c.value]),p[0]){case 0:case 1:c=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,o=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!c||p[1]>c[0]&&p[1]<c[3])){t.label=p[1];break}if(p[0]===6&&t.label<c[1]){t.label=c[1],c=p;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(p);break}c[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(n,t)}catch(E){p=[6,E],o=0}finally{s=c=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function l6(n,e,t,s){s===void 0&&(s=t),n[s]=e[t]}function f6(n,e){for(var t in n)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function fu(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function dp(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var s=t.call(n),o,c=[],l;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)c.push(o.value)}catch(f){l={error:f}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(l)throw l.error}}return c}function d6(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(dp(arguments[e]));return n}function p6(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var s=Array(n),o=0,e=0;e<t;e++)for(var c=arguments[e],l=0,f=c.length;l<f;l++,o++)s[o]=c[l];return s}function gs(n){return this instanceof gs?(this.v=n,this):new gs(n)}function g6(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),o,c=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(S){s[S]&&(o[S]=function(T){return new Promise(function(R,z){c.push([S,T,R,z])>1||f(S,T)})})}function f(S,T){try{y(s[S](T))}catch(R){A(c[0][3],R)}}function y(S){S.value instanceof gs?Promise.resolve(S.value.v).then(p,E):A(c[0][2],S)}function p(S){f("next",S)}function E(S){f("throw",S)}function A(S,T){S(T),c.shift(),c.length&&f(c[0][0],c[0][1])}}function y6(n){var e,t;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,c){e[o]=n[o]?function(l){return(t=!t)?{value:gs(n[o](l)),done:o==="return"}:c?c(l):l}:c}}function _6(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof fu=="function"?fu(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(c){t[c]=n[c]&&function(l){return new Promise(function(f,y){l=n[c](l),o(f,y,l.done,l.value)})}}function o(c,l,f,y){Promise.resolve(y).then(function(p){c({value:p,done:f})},l)}}function v6(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function b6(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function m6(n){return n&&n.__esModule?n:{default:n}}function w6(n,e){if(!e.has(n))throw new TypeError("attempted to get private field on non-instance");return e.get(n)}function E6(n,e,t){if(!e.has(n))throw new TypeError("attempted to set private field on non-instance");return e.set(n,t),t}var D6=Object.freeze({__proto__:null,get __assign(){return lu},__asyncDelegator:y6,__asyncGenerator:g6,__asyncValues:_6,__await:gs,__awaiter:u6,__classPrivateFieldGet:w6,__classPrivateFieldSet:E6,__createBinding:l6,__decorate:o6,__exportStar:f6,__extends:i6,__generator:h6,__importDefault:m6,__importStar:b6,__makeTemplateObject:v6,__metadata:c6,__param:a6,__read:dp,__rest:s6,__spread:d6,__spreadArrays:p6,__values:fu}),Jo=ti(D6),is={},Nc={},ss={};let ii=class{};var S6=Object.freeze({__proto__:null,IEvents:ii}),x6=ti(S6),Rf;function I6(){if(Rf)return ss;Rf=1,Object.defineProperty(ss,"__esModule",{value:!0}),ss.IHeartBeat=void 0;const n=x6;class e extends n.IEvents{constructor(s){super()}}return ss.IHeartBeat=e,ss}var Nf;function pp(){return Nf||(Nf=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),Jo.__exportStar(I6(),n)}(Nc)),Nc}var $c={},Xn={},$f;function O6(){if($f)return Xn;$f=1,Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.HEARTBEAT_EVENTS=Xn.HEARTBEAT_INTERVAL=void 0;const n=_e;return Xn.HEARTBEAT_INTERVAL=n.FIVE_SECONDS,Xn.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},Xn}var Ff;function gp(){return Ff||(Ff=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),Jo.__exportStar(O6(),n)}($c)),$c}var Uf;function P6(){if(Uf)return is;Uf=1,Object.defineProperty(is,"__esModule",{value:!0}),is.HeartBeat=void 0;const n=Jo,e=Pb,t=_e,s=pp(),o=gp();class c extends s.IHeartBeat{constructor(f){super(f),this.events=new e.EventEmitter,this.interval=o.HEARTBEAT_INTERVAL,this.interval=f?.interval||o.HEARTBEAT_INTERVAL}static init(f){return n.__awaiter(this,void 0,void 0,function*(){const y=new c(f);return yield y.init(),y})}init(){return n.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(f,y){this.events.on(f,y)}once(f,y){this.events.once(f,y)}off(f,y){this.events.off(f,y)}removeListener(f,y){this.events.removeListener(f,y)}initialize(){return n.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),t.toMiliseconds(this.interval))})}pulse(){this.events.emit(o.HEARTBEAT_EVENTS.pulse)}}return is.HeartBeat=c,is}(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=Jo;e.__exportStar(P6(),n),e.__exportStar(pp(),n),e.__exportStar(gp(),n)})(Ds);var Ze={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var du=function(n,e){return du=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)s.hasOwnProperty(o)&&(t[o]=s[o])},du(n,e)};function C6(n,e){du(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var pu=function(){return pu=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},pu.apply(this,arguments)};function A6(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(n);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(n,s[o])&&(t[s[o]]=n[s[o]]);return t}function T6(n,e,t,s){var o=arguments.length,c=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(n,e,t,s);else for(var f=n.length-1;f>=0;f--)(l=n[f])&&(c=(o<3?l(c):o>3?l(e,t,c):l(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function R6(n,e){return function(t,s){e(t,s,n)}}function N6(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function $6(n,e,t,s){function o(c){return c instanceof t?c:new t(function(l){l(c)})}return new(t||(t=Promise))(function(c,l){function f(E){try{p(s.next(E))}catch(A){l(A)}}function y(E){try{p(s.throw(E))}catch(A){l(A)}}function p(E){E.done?c(E.value):o(E.value).then(f,y)}p((s=s.apply(n,e||[])).next())})}function F6(n,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(p){return function(E){return y([p,E])}}function y(p){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,o&&(c=p[0]&2?o.return:p[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,p[1])).done)return c;switch(o=0,c&&(p=[p[0]&2,c.value]),p[0]){case 0:case 1:c=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,o=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!c||p[1]>c[0]&&p[1]<c[3])){t.label=p[1];break}if(p[0]===6&&t.label<c[1]){t.label=c[1],c=p;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(p);break}c[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(n,t)}catch(E){p=[6,E],o=0}finally{s=c=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function U6(n,e,t,s){s===void 0&&(s=t),n[s]=e[t]}function j6(n,e){for(var t in n)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function gu(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function yp(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var s=t.call(n),o,c=[],l;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)c.push(o.value)}catch(f){l={error:f}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(l)throw l.error}}return c}function L6(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(yp(arguments[e]));return n}function M6(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var s=Array(n),o=0,e=0;e<t;e++)for(var c=arguments[e],l=0,f=c.length;l<f;l++,o++)s[o]=c[l];return s}function ys(n){return this instanceof ys?(this.v=n,this):new ys(n)}function B6(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),o,c=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(S){s[S]&&(o[S]=function(T){return new Promise(function(R,z){c.push([S,T,R,z])>1||f(S,T)})})}function f(S,T){try{y(s[S](T))}catch(R){A(c[0][3],R)}}function y(S){S.value instanceof ys?Promise.resolve(S.value.v).then(p,E):A(c[0][2],S)}function p(S){f("next",S)}function E(S){f("throw",S)}function A(S,T){S(T),c.shift(),c.length&&f(c[0][0],c[0][1])}}function q6(n){var e,t;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,c){e[o]=n[o]?function(l){return(t=!t)?{value:ys(n[o](l)),done:o==="return"}:c?c(l):l}:c}}function z6(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof gu=="function"?gu(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(c){t[c]=n[c]&&function(l){return new Promise(function(f,y){l=n[c](l),o(f,y,l.done,l.value)})}}function o(c,l,f,y){Promise.resolve(y).then(function(p){c({value:p,done:f})},l)}}function H6(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function K6(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function V6(n){return n&&n.__esModule?n:{default:n}}function k6(n,e){if(!e.has(n))throw new TypeError("attempted to get private field on non-instance");return e.get(n)}function G6(n,e,t){if(!e.has(n))throw new TypeError("attempted to set private field on non-instance");return e.set(n,t),t}var W6=Object.freeze({__proto__:null,get __assign(){return pu},__asyncDelegator:q6,__asyncGenerator:B6,__asyncValues:z6,__await:ys,__awaiter:$6,__classPrivateFieldGet:k6,__classPrivateFieldSet:G6,__createBinding:U6,__decorate:T6,__exportStar:j6,__extends:C6,__generator:F6,__importDefault:V6,__importStar:K6,__makeTemplateObject:H6,__metadata:N6,__param:R6,__read:yp,__rest:A6,__spread:L6,__spreadArrays:M6,__values:gu}),Y6=ti(W6),Fc,jf;function J6(){if(jf)return Fc;jf=1;function n(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}Fc=e;function e(t,s,o){var c=o&&o.stringify||n,l=1;if(typeof t=="object"&&t!==null){var f=s.length+l;if(f===1)return t;var y=new Array(f);y[0]=c(t);for(var p=1;p<f;p++)y[p]=c(s[p]);return y.join(" ")}if(typeof t!="string")return t;var E=s.length;if(E===0)return t;for(var A="",S=1-l,T=-1,R=t&&t.length||0,z=0;z<R;){if(t.charCodeAt(z)===37&&z+1<R){switch(T=T>-1?T:0,t.charCodeAt(z+1)){case 100:case 102:if(S>=E||s[S]==null)break;T<z&&(A+=t.slice(T,z)),A+=Number(s[S]),T=z+2,z++;break;case 105:if(S>=E||s[S]==null)break;T<z&&(A+=t.slice(T,z)),A+=Math.floor(Number(s[S])),T=z+2,z++;break;case 79:case 111:case 106:if(S>=E||s[S]===void 0)break;T<z&&(A+=t.slice(T,z));var K=typeof s[S];if(K==="string"){A+="'"+s[S]+"'",T=z+2,z++;break}if(K==="function"){A+=s[S].name||"<anonymous>",T=z+2,z++;break}A+=c(s[S]),T=z+2,z++;break;case 115:if(S>=E)break;T<z&&(A+=t.slice(T,z)),A+=String(s[S]),T=z+2,z++;break;case 37:T<z&&(A+=t.slice(T,z)),A+="%",T=z+2,z++,S--;break}++S}++z}return T===-1?t:(T<R&&(A+=t.slice(T)),A)}return Fc}var Uc,Lf;function X6(){if(Lf)return Uc;Lf=1;const n=J6();Uc=o;const e=C().console||{},t={mapHttpRequest:R,mapHttpResponse:R,wrapRequestSerializer:z,wrapResponseSerializer:z,wrapErrorSerializer:z,req:R,res:R,err:S};function s(w,u){return Array.isArray(w)?w.filter(function(G){return G!=="!stdSerializers.err"}):w===!0?Object.keys(u):!1}function o(w){w=w||{},w.browser=w.browser||{};const u=w.browser.transmit;if(u&&typeof u.send!="function")throw Error("pino: transmit option must have a send function");const b=w.browser.write||e;w.browser.write&&(w.browser.asObject=!0);const G=w.serializers||{},W=s(w.browser.serialize,G);let se=w.browser.serialize;Array.isArray(w.browser.serialize)&&w.browser.serialize.indexOf("!stdSerializers.err")>-1&&(se=!1);const ce=["error","fatal","warn","info","debug","trace"];typeof b=="function"&&(b.error=b.fatal=b.warn=b.info=b.debug=b.trace=b),w.enabled===!1&&(w.level="silent");const de=w.level||"info",m=Object.create(b);m.log||(m.log=K),Object.defineProperty(m,"levelVal",{get:ee}),Object.defineProperty(m,"level",{get:X,set:V});const O={transmit:u,serialize:W,asObject:w.browser.asObject,levels:ce,timestamp:T(w)};m.levels=o.levels,m.level=de,m.setMaxListeners=m.getMaxListeners=m.emit=m.addListener=m.on=m.prependListener=m.once=m.prependOnceListener=m.removeListener=m.removeAllListeners=m.listeners=m.listenerCount=m.eventNames=m.write=m.flush=K,m.serializers=G,m._serialize=W,m._stdErrSerialize=se,m.child=k,u&&(m._logEvent=A());function ee(){return this.level==="silent"?1/0:this.levels.values[this.level]}function X(){return this._level}function V(J){if(J!=="silent"&&!this.levels.values[J])throw Error("unknown level "+J);this._level=J,c(O,m,"error","log"),c(O,m,"fatal","error"),c(O,m,"warn","error"),c(O,m,"info","log"),c(O,m,"debug","log"),c(O,m,"trace","log")}function k(J,re){if(!J)throw new Error("missing bindings for child Pino");re=re||{},W&&J.serializers&&(re.serializers=J.serializers);const me=re.serializers;if(W&&me){var oe=Object.assign({},G,me),we=w.browser.serialize===!0?Object.keys(oe):W;delete J.serializers,y([J],we,oe,this._stdErrSerialize)}function le(ve){this._childLevel=(ve._childLevel|0)+1,this.error=p(ve,J,"error"),this.fatal=p(ve,J,"fatal"),this.warn=p(ve,J,"warn"),this.info=p(ve,J,"info"),this.debug=p(ve,J,"debug"),this.trace=p(ve,J,"trace"),oe&&(this.serializers=oe,this._serialize=we),u&&(this._logEvent=A([].concat(ve._logEvent.bindings,J)))}return le.prototype=this,new le(this)}return m}o.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},o.stdSerializers=t,o.stdTimeFunctions=Object.assign({},{nullTime:ie,epochTime:$,unixTime:j,isoTime:x});function c(w,u,b,G){const W=Object.getPrototypeOf(u);u[b]=u.levelVal>u.levels.values[b]?K:W[b]?W[b]:e[b]||e[G]||K,l(w,u,b)}function l(w,u,b){!w.transmit&&u[b]===K||(u[b]=function(G){return function(){const se=w.timestamp(),ce=new Array(arguments.length),de=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var m=0;m<ce.length;m++)ce[m]=arguments[m];if(w.serialize&&!w.asObject&&y(ce,this._serialize,this.serializers,this._stdErrSerialize),w.asObject?G.call(de,f(this,b,ce,se)):G.apply(de,ce),w.transmit){const O=w.transmit.level||u.level,ee=o.levels.values[O],X=o.levels.values[b];if(X<ee)return;E(this,{ts:se,methodLevel:b,methodValue:X,transmitLevel:O,transmitValue:o.levels.values[w.transmit.level||u.level],send:w.transmit.send,val:u.levelVal},ce)}}}(u[b]))}function f(w,u,b,G){w._serialize&&y(b,w._serialize,w.serializers,w._stdErrSerialize);const W=b.slice();let se=W[0];const ce={};G&&(ce.time=G),ce.level=o.levels.values[u];let de=(w._childLevel|0)+1;if(de<1&&(de=1),se!==null&&typeof se=="object"){for(;de--&&typeof W[0]=="object";)Object.assign(ce,W.shift());se=W.length?n(W.shift(),W):void 0}else typeof se=="string"&&(se=n(W.shift(),W));return se!==void 0&&(ce.msg=se),ce}function y(w,u,b,G){for(const W in w)if(G&&w[W]instanceof Error)w[W]=o.stdSerializers.err(w[W]);else if(typeof w[W]=="object"&&!Array.isArray(w[W]))for(const se in w[W])u&&u.indexOf(se)>-1&&se in b&&(w[W][se]=b[se](w[W][se]))}function p(w,u,b){return function(){const G=new Array(1+arguments.length);G[0]=u;for(var W=1;W<G.length;W++)G[W]=arguments[W-1];return w[b].apply(this,G)}}function E(w,u,b){const G=u.send,W=u.ts,se=u.methodLevel,ce=u.methodValue,de=u.val,m=w._logEvent.bindings;y(b,w._serialize||Object.keys(w.serializers),w.serializers,w._stdErrSerialize===void 0?!0:w._stdErrSerialize),w._logEvent.ts=W,w._logEvent.messages=b.filter(function(O){return m.indexOf(O)===-1}),w._logEvent.level.label=se,w._logEvent.level.value=ce,G(se,w._logEvent,de),w._logEvent=A(m)}function A(w){return{ts:0,messages:[],bindings:w||[],level:{label:"",value:0}}}function S(w){const u={type:w.constructor.name,msg:w.message,stack:w.stack};for(const b in w)u[b]===void 0&&(u[b]=w[b]);return u}function T(w){return typeof w.timestamp=="function"?w.timestamp:w.timestamp===!1?ie:$}function R(){return{}}function z(w){return w}function K(){}function ie(){return!1}function $(){return Date.now()}function j(){return Math.round(Date.now()/1e3)}function x(){return new Date(Date.now()).toISOString()}function C(){function w(u){return typeof u<"u"&&u}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return w(self)||w(window)||w(this)||{}}}return Uc}var Qn={},Mf;function _p(){return Mf||(Mf=1,Object.defineProperty(Qn,"__esModule",{value:!0}),Qn.PINO_CUSTOM_CONTEXT_KEY=Qn.PINO_LOGGER_DEFAULTS=void 0,Qn.PINO_LOGGER_DEFAULTS={level:"info"},Qn.PINO_CUSTOM_CONTEXT_KEY="custom_context"),Qn}var or={},Bf;function Q6(){if(Bf)return or;Bf=1,Object.defineProperty(or,"__esModule",{value:!0}),or.generateChildLogger=or.formatChildLoggerContext=or.getLoggerContext=or.setBrowserLoggerContext=or.getBrowserLoggerContext=or.getDefaultLoggerOptions=void 0;const n=_p();function e(f){return Object.assign(Object.assign({},f),{level:f?.level||n.PINO_LOGGER_DEFAULTS.level})}or.getDefaultLoggerOptions=e;function t(f,y=n.PINO_CUSTOM_CONTEXT_KEY){return f[y]||""}or.getBrowserLoggerContext=t;function s(f,y,p=n.PINO_CUSTOM_CONTEXT_KEY){return f[p]=y,f}or.setBrowserLoggerContext=s;function o(f,y=n.PINO_CUSTOM_CONTEXT_KEY){let p="";return typeof f.bindings>"u"?p=t(f,y):p=f.bindings().context||"",p}or.getLoggerContext=o;function c(f,y,p=n.PINO_CUSTOM_CONTEXT_KEY){const E=o(f,p);return E.trim()?`${E}/${y}`:y}or.formatChildLoggerContext=c;function l(f,y,p=n.PINO_CUSTOM_CONTEXT_KEY){const E=c(f,y,p),A=f.child({context:E});return s(A,E,p)}return or.generateChildLogger=l,or}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.pino=void 0;const e=Y6,t=e.__importDefault(X6());Object.defineProperty(n,"pino",{enumerable:!0,get:function(){return t.default}}),e.__exportStar(_p(),n),e.__exportStar(Q6(),n)})(Ze);class Z6 extends ii{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class e2 extends ii{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}}class t2{constructor(e,t){this.logger=e,this.core=t}}let r2=class extends ii{constructor(e,t){super(),this.relayer=e,this.logger=t}},n2=class extends ii{constructor(e){super()}},i2=class{constructor(e,t,s,o){this.core=e,this.logger=t,this.name=s}};class s2 extends ii{constructor(e,t){super(),this.relayer=e,this.logger=t}}class o2 extends ii{constructor(e,t){super(),this.core=e,this.logger=t}}let a2=class{constructor(e,t){this.projectId=e,this.logger=t}},c2=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}};class u2{constructor(e){this.client=e}}const h2=n=>JSON.stringify(n,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),l2=n=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=n.replace(e,'$1"$2n"$3');return JSON.parse(t,(s,o)=>typeof o=="string"&&o.match(/^\d+n$/)?BigInt(o.substring(0,o.length-1)):o)};function Mu(n){if(typeof n!="string")throw new Error(`Cannot safe json parse value of type ${typeof n}`);try{return l2(n)}catch{return n}}function _s(n){return typeof n=="string"?n:h2(n)||""}var Bu={},vp={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Ue,t=Ir;n.DIGEST_LENGTH=64,n.BLOCK_SIZE=128;var s=function(){function f(){this.digestLength=n.DIGEST_LENGTH,this.blockSize=n.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return f.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},f.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},f.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._tempHi),t.wipe(this._tempLo),this.reset()},f.prototype.update=function(y,p){if(p===void 0&&(p=y.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var E=0;if(this._bytesHashed+=p,this._bufferLength>0){for(;this._bufferLength<n.BLOCK_SIZE&&p>0;)this._buffer[this._bufferLength++]=y[E++],p--;this._bufferLength===this.blockSize&&(c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(p>=this.blockSize&&(E=c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,y,E,p),p%=this.blockSize);p>0;)this._buffer[this._bufferLength++]=y[E++],p--;return this},f.prototype.finish=function(y){if(!this._finished){var p=this._bytesHashed,E=this._bufferLength,A=p/536870912|0,S=p<<3,T=p%128<112?128:256;this._buffer[E]=128;for(var R=E+1;R<T-8;R++)this._buffer[R]=0;e.writeUint32BE(A,this._buffer,T-8),e.writeUint32BE(S,this._buffer,T-4),c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,T),this._finished=!0}for(var R=0;R<this.digestLength/8;R++)e.writeUint32BE(this._stateHi[R],y,R*8),e.writeUint32BE(this._stateLo[R],y,R*8+4);return this},f.prototype.digest=function(){var y=new Uint8Array(this.digestLength);return this.finish(y),y},f.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},f.prototype.restoreState=function(y){return this._stateHi.set(y.stateHi),this._stateLo.set(y.stateLo),this._bufferLength=y.bufferLength,y.buffer&&this._buffer.set(y.buffer),this._bytesHashed=y.bytesHashed,this._finished=!1,this},f.prototype.cleanSavedState=function(y){t.wipe(y.stateHi),t.wipe(y.stateLo),y.buffer&&t.wipe(y.buffer),y.bufferLength=0,y.bytesHashed=0},f}();n.SHA512=s;var o=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function c(f,y,p,E,A,S,T){for(var R=p[0],z=p[1],K=p[2],ie=p[3],$=p[4],j=p[5],x=p[6],C=p[7],w=E[0],u=E[1],b=E[2],G=E[3],W=E[4],se=E[5],ce=E[6],de=E[7],m,O,ee,X,V,k,J,re;T>=128;){for(var me=0;me<16;me++){var oe=8*me+S;f[me]=e.readUint32BE(A,oe),y[me]=e.readUint32BE(A,oe+4)}for(var me=0;me<80;me++){var we=R,le=z,ve=K,q=ie,B=$,F=j,d=x,P=C,ae=w,fe=u,xe=b,ze=G,Ve=W,je=se,pt=ce,gt=de;if(m=C,O=de,V=O&65535,k=O>>>16,J=m&65535,re=m>>>16,m=($>>>14|W<<32-14)^($>>>18|W<<32-18)^(W>>>41-32|$<<32-(41-32)),O=(W>>>14|$<<32-14)^(W>>>18|$<<32-18)^($>>>41-32|W<<32-(41-32)),V+=O&65535,k+=O>>>16,J+=m&65535,re+=m>>>16,m=$&j^~$&x,O=W&se^~W&ce,V+=O&65535,k+=O>>>16,J+=m&65535,re+=m>>>16,m=o[me*2],O=o[me*2+1],V+=O&65535,k+=O>>>16,J+=m&65535,re+=m>>>16,m=f[me%16],O=y[me%16],V+=O&65535,k+=O>>>16,J+=m&65535,re+=m>>>16,k+=V>>>16,J+=k>>>16,re+=J>>>16,ee=J&65535|re<<16,X=V&65535|k<<16,m=ee,O=X,V=O&65535,k=O>>>16,J=m&65535,re=m>>>16,m=(R>>>28|w<<32-28)^(w>>>34-32|R<<32-(34-32))^(w>>>39-32|R<<32-(39-32)),O=(w>>>28|R<<32-28)^(R>>>34-32|w<<32-(34-32))^(R>>>39-32|w<<32-(39-32)),V+=O&65535,k+=O>>>16,J+=m&65535,re+=m>>>16,m=R&z^R&K^z&K,O=w&u^w&b^u&b,V+=O&65535,k+=O>>>16,J+=m&65535,re+=m>>>16,k+=V>>>16,J+=k>>>16,re+=J>>>16,P=J&65535|re<<16,gt=V&65535|k<<16,m=q,O=ze,V=O&65535,k=O>>>16,J=m&65535,re=m>>>16,m=ee,O=X,V+=O&65535,k+=O>>>16,J+=m&65535,re+=m>>>16,k+=V>>>16,J+=k>>>16,re+=J>>>16,q=J&65535|re<<16,ze=V&65535|k<<16,z=we,K=le,ie=ve,$=q,j=B,x=F,C=d,R=P,u=ae,b=fe,G=xe,W=ze,se=Ve,ce=je,de=pt,w=gt,me%16===15)for(var oe=0;oe<16;oe++)m=f[oe],O=y[oe],V=O&65535,k=O>>>16,J=m&65535,re=m>>>16,m=f[(oe+9)%16],O=y[(oe+9)%16],V+=O&65535,k+=O>>>16,J+=m&65535,re+=m>>>16,ee=f[(oe+1)%16],X=y[(oe+1)%16],m=(ee>>>1|X<<32-1)^(ee>>>8|X<<32-8)^ee>>>7,O=(X>>>1|ee<<32-1)^(X>>>8|ee<<32-8)^(X>>>7|ee<<32-7),V+=O&65535,k+=O>>>16,J+=m&65535,re+=m>>>16,ee=f[(oe+14)%16],X=y[(oe+14)%16],m=(ee>>>19|X<<32-19)^(X>>>61-32|ee<<32-(61-32))^ee>>>6,O=(X>>>19|ee<<32-19)^(ee>>>61-32|X<<32-(61-32))^(X>>>6|ee<<32-6),V+=O&65535,k+=O>>>16,J+=m&65535,re+=m>>>16,k+=V>>>16,J+=k>>>16,re+=J>>>16,f[oe]=J&65535|re<<16,y[oe]=V&65535|k<<16}m=R,O=w,V=O&65535,k=O>>>16,J=m&65535,re=m>>>16,m=p[0],O=E[0],V+=O&65535,k+=O>>>16,J+=m&65535,re+=m>>>16,k+=V>>>16,J+=k>>>16,re+=J>>>16,p[0]=R=J&65535|re<<16,E[0]=w=V&65535|k<<16,m=z,O=u,V=O&65535,k=O>>>16,J=m&65535,re=m>>>16,m=p[1],O=E[1],V+=O&65535,k+=O>>>16,J+=m&65535,re+=m>>>16,k+=V>>>16,J+=k>>>16,re+=J>>>16,p[1]=z=J&65535|re<<16,E[1]=u=V&65535|k<<16,m=K,O=b,V=O&65535,k=O>>>16,J=m&65535,re=m>>>16,m=p[2],O=E[2],V+=O&65535,k+=O>>>16,J+=m&65535,re+=m>>>16,k+=V>>>16,J+=k>>>16,re+=J>>>16,p[2]=K=J&65535|re<<16,E[2]=b=V&65535|k<<16,m=ie,O=G,V=O&65535,k=O>>>16,J=m&65535,re=m>>>16,m=p[3],O=E[3],V+=O&65535,k+=O>>>16,J+=m&65535,re+=m>>>16,k+=V>>>16,J+=k>>>16,re+=J>>>16,p[3]=ie=J&65535|re<<16,E[3]=G=V&65535|k<<16,m=$,O=W,V=O&65535,k=O>>>16,J=m&65535,re=m>>>16,m=p[4],O=E[4],V+=O&65535,k+=O>>>16,J+=m&65535,re+=m>>>16,k+=V>>>16,J+=k>>>16,re+=J>>>16,p[4]=$=J&65535|re<<16,E[4]=W=V&65535|k<<16,m=j,O=se,V=O&65535,k=O>>>16,J=m&65535,re=m>>>16,m=p[5],O=E[5],V+=O&65535,k+=O>>>16,J+=m&65535,re+=m>>>16,k+=V>>>16,J+=k>>>16,re+=J>>>16,p[5]=j=J&65535|re<<16,E[5]=se=V&65535|k<<16,m=x,O=ce,V=O&65535,k=O>>>16,J=m&65535,re=m>>>16,m=p[6],O=E[6],V+=O&65535,k+=O>>>16,J+=m&65535,re+=m>>>16,k+=V>>>16,J+=k>>>16,re+=J>>>16,p[6]=x=J&65535|re<<16,E[6]=ce=V&65535|k<<16,m=C,O=de,V=O&65535,k=O>>>16,J=m&65535,re=m>>>16,m=p[7],O=E[7],V+=O&65535,k+=O>>>16,J+=m&65535,re+=m>>>16,k+=V>>>16,J+=k>>>16,re+=J>>>16,p[7]=C=J&65535|re<<16,E[7]=de=V&65535|k<<16,S+=128,T-=128}return S}function l(f){var y=new s;y.update(f);var p=y.digest();return y.clean(),p}n.hash=l})(vp);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.convertSecretKeyToX25519=n.convertPublicKeyToX25519=n.verify=n.sign=n.extractPublicKeyFromSecretKey=n.generateKeyPair=n.generateKeyPairFromSeed=n.SEED_LENGTH=n.SECRET_KEY_LENGTH=n.PUBLIC_KEY_LENGTH=n.SIGNATURE_LENGTH=void 0;const e=Ti,t=vp,s=Ir;n.SIGNATURE_LENGTH=64,n.PUBLIC_KEY_LENGTH=32,n.SECRET_KEY_LENGTH=64,n.SEED_LENGTH=32;function o(q){const B=new Float64Array(16);if(q)for(let F=0;F<q.length;F++)B[F]=q[F];return B}const c=new Uint8Array(32);c[0]=9;const l=o(),f=o([1]),y=o([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),p=o([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),E=o([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),A=o([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),S=o([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function T(q,B){for(let F=0;F<16;F++)q[F]=B[F]|0}function R(q){let B=1;for(let F=0;F<16;F++){let d=q[F]+B+65535;B=Math.floor(d/65536),q[F]=d-B*65536}q[0]+=B-1+37*(B-1)}function z(q,B,F){const d=~(F-1);for(let P=0;P<16;P++){const ae=d&(q[P]^B[P]);q[P]^=ae,B[P]^=ae}}function K(q,B){const F=o(),d=o();for(let P=0;P<16;P++)d[P]=B[P];R(d),R(d),R(d);for(let P=0;P<2;P++){F[0]=d[0]-65517;for(let fe=1;fe<15;fe++)F[fe]=d[fe]-65535-(F[fe-1]>>16&1),F[fe-1]&=65535;F[15]=d[15]-32767-(F[14]>>16&1);const ae=F[15]>>16&1;F[14]&=65535,z(d,F,1-ae)}for(let P=0;P<16;P++)q[2*P]=d[P]&255,q[2*P+1]=d[P]>>8}function ie(q,B){let F=0;for(let d=0;d<32;d++)F|=q[d]^B[d];return(1&F-1>>>8)-1}function $(q,B){const F=new Uint8Array(32),d=new Uint8Array(32);return K(F,q),K(d,B),ie(F,d)}function j(q){const B=new Uint8Array(32);return K(B,q),B[0]&1}function x(q,B){for(let F=0;F<16;F++)q[F]=B[2*F]+(B[2*F+1]<<8);q[15]&=32767}function C(q,B,F){for(let d=0;d<16;d++)q[d]=B[d]+F[d]}function w(q,B,F){for(let d=0;d<16;d++)q[d]=B[d]-F[d]}function u(q,B,F){let d,P,ae=0,fe=0,xe=0,ze=0,Ve=0,je=0,pt=0,gt=0,Me=0,Ie=0,Ne=0,$e=0,Be=0,Pe=0,Fe=0,Se=0,Ce=0,He=0,Oe=0,ke=0,We=0,et=0,tt=0,Je=0,er=0,hr=0,kr=0,tr=0,rn=0,bn=0,Fn=0,wt=F[0],yt=F[1],Et=F[2],Dt=F[3],bt=F[4],_t=F[5],Ft=F[6],Ut=F[7],St=F[8],jt=F[9],xt=F[10],Ct=F[11],It=F[12],ht=F[13],Lt=F[14],Mt=F[15];d=B[0],ae+=d*wt,fe+=d*yt,xe+=d*Et,ze+=d*Dt,Ve+=d*bt,je+=d*_t,pt+=d*Ft,gt+=d*Ut,Me+=d*St,Ie+=d*jt,Ne+=d*xt,$e+=d*Ct,Be+=d*It,Pe+=d*ht,Fe+=d*Lt,Se+=d*Mt,d=B[1],fe+=d*wt,xe+=d*yt,ze+=d*Et,Ve+=d*Dt,je+=d*bt,pt+=d*_t,gt+=d*Ft,Me+=d*Ut,Ie+=d*St,Ne+=d*jt,$e+=d*xt,Be+=d*Ct,Pe+=d*It,Fe+=d*ht,Se+=d*Lt,Ce+=d*Mt,d=B[2],xe+=d*wt,ze+=d*yt,Ve+=d*Et,je+=d*Dt,pt+=d*bt,gt+=d*_t,Me+=d*Ft,Ie+=d*Ut,Ne+=d*St,$e+=d*jt,Be+=d*xt,Pe+=d*Ct,Fe+=d*It,Se+=d*ht,Ce+=d*Lt,He+=d*Mt,d=B[3],ze+=d*wt,Ve+=d*yt,je+=d*Et,pt+=d*Dt,gt+=d*bt,Me+=d*_t,Ie+=d*Ft,Ne+=d*Ut,$e+=d*St,Be+=d*jt,Pe+=d*xt,Fe+=d*Ct,Se+=d*It,Ce+=d*ht,He+=d*Lt,Oe+=d*Mt,d=B[4],Ve+=d*wt,je+=d*yt,pt+=d*Et,gt+=d*Dt,Me+=d*bt,Ie+=d*_t,Ne+=d*Ft,$e+=d*Ut,Be+=d*St,Pe+=d*jt,Fe+=d*xt,Se+=d*Ct,Ce+=d*It,He+=d*ht,Oe+=d*Lt,ke+=d*Mt,d=B[5],je+=d*wt,pt+=d*yt,gt+=d*Et,Me+=d*Dt,Ie+=d*bt,Ne+=d*_t,$e+=d*Ft,Be+=d*Ut,Pe+=d*St,Fe+=d*jt,Se+=d*xt,Ce+=d*Ct,He+=d*It,Oe+=d*ht,ke+=d*Lt,We+=d*Mt,d=B[6],pt+=d*wt,gt+=d*yt,Me+=d*Et,Ie+=d*Dt,Ne+=d*bt,$e+=d*_t,Be+=d*Ft,Pe+=d*Ut,Fe+=d*St,Se+=d*jt,Ce+=d*xt,He+=d*Ct,Oe+=d*It,ke+=d*ht,We+=d*Lt,et+=d*Mt,d=B[7],gt+=d*wt,Me+=d*yt,Ie+=d*Et,Ne+=d*Dt,$e+=d*bt,Be+=d*_t,Pe+=d*Ft,Fe+=d*Ut,Se+=d*St,Ce+=d*jt,He+=d*xt,Oe+=d*Ct,ke+=d*It,We+=d*ht,et+=d*Lt,tt+=d*Mt,d=B[8],Me+=d*wt,Ie+=d*yt,Ne+=d*Et,$e+=d*Dt,Be+=d*bt,Pe+=d*_t,Fe+=d*Ft,Se+=d*Ut,Ce+=d*St,He+=d*jt,Oe+=d*xt,ke+=d*Ct,We+=d*It,et+=d*ht,tt+=d*Lt,Je+=d*Mt,d=B[9],Ie+=d*wt,Ne+=d*yt,$e+=d*Et,Be+=d*Dt,Pe+=d*bt,Fe+=d*_t,Se+=d*Ft,Ce+=d*Ut,He+=d*St,Oe+=d*jt,ke+=d*xt,We+=d*Ct,et+=d*It,tt+=d*ht,Je+=d*Lt,er+=d*Mt,d=B[10],Ne+=d*wt,$e+=d*yt,Be+=d*Et,Pe+=d*Dt,Fe+=d*bt,Se+=d*_t,Ce+=d*Ft,He+=d*Ut,Oe+=d*St,ke+=d*jt,We+=d*xt,et+=d*Ct,tt+=d*It,Je+=d*ht,er+=d*Lt,hr+=d*Mt,d=B[11],$e+=d*wt,Be+=d*yt,Pe+=d*Et,Fe+=d*Dt,Se+=d*bt,Ce+=d*_t,He+=d*Ft,Oe+=d*Ut,ke+=d*St,We+=d*jt,et+=d*xt,tt+=d*Ct,Je+=d*It,er+=d*ht,hr+=d*Lt,kr+=d*Mt,d=B[12],Be+=d*wt,Pe+=d*yt,Fe+=d*Et,Se+=d*Dt,Ce+=d*bt,He+=d*_t,Oe+=d*Ft,ke+=d*Ut,We+=d*St,et+=d*jt,tt+=d*xt,Je+=d*Ct,er+=d*It,hr+=d*ht,kr+=d*Lt,tr+=d*Mt,d=B[13],Pe+=d*wt,Fe+=d*yt,Se+=d*Et,Ce+=d*Dt,He+=d*bt,Oe+=d*_t,ke+=d*Ft,We+=d*Ut,et+=d*St,tt+=d*jt,Je+=d*xt,er+=d*Ct,hr+=d*It,kr+=d*ht,tr+=d*Lt,rn+=d*Mt,d=B[14],Fe+=d*wt,Se+=d*yt,Ce+=d*Et,He+=d*Dt,Oe+=d*bt,ke+=d*_t,We+=d*Ft,et+=d*Ut,tt+=d*St,Je+=d*jt,er+=d*xt,hr+=d*Ct,kr+=d*It,tr+=d*ht,rn+=d*Lt,bn+=d*Mt,d=B[15],Se+=d*wt,Ce+=d*yt,He+=d*Et,Oe+=d*Dt,ke+=d*bt,We+=d*_t,et+=d*Ft,tt+=d*Ut,Je+=d*St,er+=d*jt,hr+=d*xt,kr+=d*Ct,tr+=d*It,rn+=d*ht,bn+=d*Lt,Fn+=d*Mt,ae+=38*Ce,fe+=38*He,xe+=38*Oe,ze+=38*ke,Ve+=38*We,je+=38*et,pt+=38*tt,gt+=38*Je,Me+=38*er,Ie+=38*hr,Ne+=38*kr,$e+=38*tr,Be+=38*rn,Pe+=38*bn,Fe+=38*Fn,P=1,d=ae+P+65535,P=Math.floor(d/65536),ae=d-P*65536,d=fe+P+65535,P=Math.floor(d/65536),fe=d-P*65536,d=xe+P+65535,P=Math.floor(d/65536),xe=d-P*65536,d=ze+P+65535,P=Math.floor(d/65536),ze=d-P*65536,d=Ve+P+65535,P=Math.floor(d/65536),Ve=d-P*65536,d=je+P+65535,P=Math.floor(d/65536),je=d-P*65536,d=pt+P+65535,P=Math.floor(d/65536),pt=d-P*65536,d=gt+P+65535,P=Math.floor(d/65536),gt=d-P*65536,d=Me+P+65535,P=Math.floor(d/65536),Me=d-P*65536,d=Ie+P+65535,P=Math.floor(d/65536),Ie=d-P*65536,d=Ne+P+65535,P=Math.floor(d/65536),Ne=d-P*65536,d=$e+P+65535,P=Math.floor(d/65536),$e=d-P*65536,d=Be+P+65535,P=Math.floor(d/65536),Be=d-P*65536,d=Pe+P+65535,P=Math.floor(d/65536),Pe=d-P*65536,d=Fe+P+65535,P=Math.floor(d/65536),Fe=d-P*65536,d=Se+P+65535,P=Math.floor(d/65536),Se=d-P*65536,ae+=P-1+37*(P-1),P=1,d=ae+P+65535,P=Math.floor(d/65536),ae=d-P*65536,d=fe+P+65535,P=Math.floor(d/65536),fe=d-P*65536,d=xe+P+65535,P=Math.floor(d/65536),xe=d-P*65536,d=ze+P+65535,P=Math.floor(d/65536),ze=d-P*65536,d=Ve+P+65535,P=Math.floor(d/65536),Ve=d-P*65536,d=je+P+65535,P=Math.floor(d/65536),je=d-P*65536,d=pt+P+65535,P=Math.floor(d/65536),pt=d-P*65536,d=gt+P+65535,P=Math.floor(d/65536),gt=d-P*65536,d=Me+P+65535,P=Math.floor(d/65536),Me=d-P*65536,d=Ie+P+65535,P=Math.floor(d/65536),Ie=d-P*65536,d=Ne+P+65535,P=Math.floor(d/65536),Ne=d-P*65536,d=$e+P+65535,P=Math.floor(d/65536),$e=d-P*65536,d=Be+P+65535,P=Math.floor(d/65536),Be=d-P*65536,d=Pe+P+65535,P=Math.floor(d/65536),Pe=d-P*65536,d=Fe+P+65535,P=Math.floor(d/65536),Fe=d-P*65536,d=Se+P+65535,P=Math.floor(d/65536),Se=d-P*65536,ae+=P-1+37*(P-1),q[0]=ae,q[1]=fe,q[2]=xe,q[3]=ze,q[4]=Ve,q[5]=je,q[6]=pt,q[7]=gt,q[8]=Me,q[9]=Ie,q[10]=Ne,q[11]=$e,q[12]=Be,q[13]=Pe,q[14]=Fe,q[15]=Se}function b(q,B){u(q,B,B)}function G(q,B){const F=o();let d;for(d=0;d<16;d++)F[d]=B[d];for(d=253;d>=0;d--)b(F,F),d!==2&&d!==4&&u(F,F,B);for(d=0;d<16;d++)q[d]=F[d]}function W(q,B){const F=o();let d;for(d=0;d<16;d++)F[d]=B[d];for(d=250;d>=0;d--)b(F,F),d!==1&&u(F,F,B);for(d=0;d<16;d++)q[d]=F[d]}function se(q,B){const F=o(),d=o(),P=o(),ae=o(),fe=o(),xe=o(),ze=o(),Ve=o(),je=o();w(F,q[1],q[0]),w(je,B[1],B[0]),u(F,F,je),C(d,q[0],q[1]),C(je,B[0],B[1]),u(d,d,je),u(P,q[3],B[3]),u(P,P,p),u(ae,q[2],B[2]),C(ae,ae,ae),w(fe,d,F),w(xe,ae,P),C(ze,ae,P),C(Ve,d,F),u(q[0],fe,xe),u(q[1],Ve,ze),u(q[2],ze,xe),u(q[3],fe,Ve)}function ce(q,B,F){for(let d=0;d<4;d++)z(q[d],B[d],F)}function de(q,B){const F=o(),d=o(),P=o();G(P,B[2]),u(F,B[0],P),u(d,B[1],P),K(q,d),q[31]^=j(F)<<7}function m(q,B,F){T(q[0],l),T(q[1],f),T(q[2],f),T(q[3],l);for(let d=255;d>=0;--d){const P=F[d/8|0]>>(d&7)&1;ce(q,B,P),se(B,q),se(q,q),ce(q,B,P)}}function O(q,B){const F=[o(),o(),o(),o()];T(F[0],E),T(F[1],A),T(F[2],f),u(F[3],E,A),m(q,F,B)}function ee(q){if(q.length!==n.SEED_LENGTH)throw new Error(`ed25519: seed must be ${n.SEED_LENGTH} bytes`);const B=(0,t.hash)(q);B[0]&=248,B[31]&=127,B[31]|=64;const F=new Uint8Array(32),d=[o(),o(),o(),o()];O(d,B),de(F,d);const P=new Uint8Array(64);return P.set(q),P.set(F,32),{publicKey:F,secretKey:P}}n.generateKeyPairFromSeed=ee;function X(q){const B=(0,e.randomBytes)(32,q),F=ee(B);return(0,s.wipe)(B),F}n.generateKeyPair=X;function V(q){if(q.length!==n.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${n.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(q.subarray(32))}n.extractPublicKeyFromSecretKey=V;const k=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function J(q,B){let F,d,P,ae;for(d=63;d>=32;--d){for(F=0,P=d-32,ae=d-12;P<ae;++P)B[P]+=F-16*B[d]*k[P-(d-32)],F=Math.floor((B[P]+128)/256),B[P]-=F*256;B[P]+=F,B[d]=0}for(F=0,P=0;P<32;P++)B[P]+=F-(B[31]>>4)*k[P],F=B[P]>>8,B[P]&=255;for(P=0;P<32;P++)B[P]-=F*k[P];for(d=0;d<32;d++)B[d+1]+=B[d]>>8,q[d]=B[d]&255}function re(q){const B=new Float64Array(64);for(let F=0;F<64;F++)B[F]=q[F];for(let F=0;F<64;F++)q[F]=0;J(q,B)}function me(q,B){const F=new Float64Array(64),d=[o(),o(),o(),o()],P=(0,t.hash)(q.subarray(0,32));P[0]&=248,P[31]&=127,P[31]|=64;const ae=new Uint8Array(64);ae.set(P.subarray(32),32);const fe=new t.SHA512;fe.update(ae.subarray(32)),fe.update(B);const xe=fe.digest();fe.clean(),re(xe),O(d,xe),de(ae,d),fe.reset(),fe.update(ae.subarray(0,32)),fe.update(q.subarray(32)),fe.update(B);const ze=fe.digest();re(ze);for(let Ve=0;Ve<32;Ve++)F[Ve]=xe[Ve];for(let Ve=0;Ve<32;Ve++)for(let je=0;je<32;je++)F[Ve+je]+=ze[Ve]*P[je];return J(ae.subarray(32),F),ae}n.sign=me;function oe(q,B){const F=o(),d=o(),P=o(),ae=o(),fe=o(),xe=o(),ze=o();return T(q[2],f),x(q[1],B),b(P,q[1]),u(ae,P,y),w(P,P,q[2]),C(ae,q[2],ae),b(fe,ae),b(xe,fe),u(ze,xe,fe),u(F,ze,P),u(F,F,ae),W(F,F),u(F,F,P),u(F,F,ae),u(F,F,ae),u(q[0],F,ae),b(d,q[0]),u(d,d,ae),$(d,P)&&u(q[0],q[0],S),b(d,q[0]),u(d,d,ae),$(d,P)?-1:(j(q[0])===B[31]>>7&&w(q[0],l,q[0]),u(q[3],q[0],q[1]),0)}function we(q,B,F){const d=new Uint8Array(32),P=[o(),o(),o(),o()],ae=[o(),o(),o(),o()];if(F.length!==n.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${n.SIGNATURE_LENGTH} bytes`);if(oe(ae,q))return!1;const fe=new t.SHA512;fe.update(F.subarray(0,32)),fe.update(q),fe.update(B);const xe=fe.digest();return re(xe),m(P,ae,xe),O(ae,F.subarray(32)),se(P,ae),de(d,P),!ie(F,d)}n.verify=we;function le(q){let B=[o(),o(),o(),o()];if(oe(B,q))throw new Error("Ed25519: invalid public key");let F=o(),d=o(),P=B[1];C(F,f,P),w(d,f,P),G(d,d),u(F,F,d);let ae=new Uint8Array(32);return K(ae,F),ae}n.convertPublicKeyToX25519=le;function ve(q){const B=(0,t.hash)(q.subarray(0,32));B[0]&=248,B[31]&=127,B[31]|=64;const F=new Uint8Array(B.subarray(0,32));return(0,s.wipe)(B),F}n.convertSecretKeyToX25519=ve})(Bu);const f2="EdDSA",d2="JWT",bp=".",mp="base64url",p2="utf8",g2="utf8",y2=":",_2="did",v2="key",qf="base58btc",b2="z",m2="K36",w2=32;function Bo(n){return ur(vr(_s(n),p2),mp)}function wp(n){const e=vr(m2,qf),t=b2+ur(Qc([e,n]),qf);return[_2,v2,t].join(y2)}function E2(n){return ur(n,mp)}function D2(n){return vr([Bo(n.header),Bo(n.payload)].join(bp),g2)}function S2(n){return[Bo(n.header),Bo(n.payload),E2(n.signature)].join(bp)}function zf(n=Ti.randomBytes(w2)){return Bu.generateKeyPairFromSeed(n)}async function x2(n,e,t,s,o=_e.fromMiliseconds(Date.now())){const c={alg:f2,typ:d2},l=wp(s.publicKey),f=o+t,y={iss:l,sub:n,aud:e,iat:o,exp:f},p=D2({header:c,payload:y}),E=Bu.sign(s.secretKey,p);return S2({header:c,payload:y,signature:E})}const I2="PARSE_ERROR",O2="INVALID_REQUEST",P2="METHOD_NOT_FOUND",C2="INVALID_PARAMS",Ep="INTERNAL_ERROR",qu="SERVER_ERROR",A2=[-32700,-32600,-32601,-32602,-32603],ls={[I2]:{code:-32700,message:"Parse error"},[O2]:{code:-32600,message:"Invalid Request"},[P2]:{code:-32601,message:"Method not found"},[C2]:{code:-32602,message:"Invalid params"},[Ep]:{code:-32603,message:"Internal error"},[qu]:{code:-32e3,message:"Server error"}},Dp=qu;function T2(n){return A2.includes(n)}function Hf(n){return Object.keys(ls).includes(n)?ls[n]:ls[Dp]}function R2(n){const e=Object.values(ls).find(t=>t.code===n);return e||ls[Dp]}function Sp(n,e,t){return n.message.includes("getaddrinfo ENOTFOUND")||n.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${t} RPC url at ${e}`):n}var xp={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var yu=function(n,e){return yu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)s.hasOwnProperty(o)&&(t[o]=s[o])},yu(n,e)};function N2(n,e){yu(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var _u=function(){return _u=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},_u.apply(this,arguments)};function $2(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(n);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(n,s[o])&&(t[s[o]]=n[s[o]]);return t}function F2(n,e,t,s){var o=arguments.length,c=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(n,e,t,s);else for(var f=n.length-1;f>=0;f--)(l=n[f])&&(c=(o<3?l(c):o>3?l(e,t,c):l(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function U2(n,e){return function(t,s){e(t,s,n)}}function j2(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function L2(n,e,t,s){function o(c){return c instanceof t?c:new t(function(l){l(c)})}return new(t||(t=Promise))(function(c,l){function f(E){try{p(s.next(E))}catch(A){l(A)}}function y(E){try{p(s.throw(E))}catch(A){l(A)}}function p(E){E.done?c(E.value):o(E.value).then(f,y)}p((s=s.apply(n,e||[])).next())})}function M2(n,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(p){return function(E){return y([p,E])}}function y(p){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,o&&(c=p[0]&2?o.return:p[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,p[1])).done)return c;switch(o=0,c&&(p=[p[0]&2,c.value]),p[0]){case 0:case 1:c=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,o=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!c||p[1]>c[0]&&p[1]<c[3])){t.label=p[1];break}if(p[0]===6&&t.label<c[1]){t.label=c[1],c=p;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(p);break}c[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(n,t)}catch(E){p=[6,E],o=0}finally{s=c=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function B2(n,e,t,s){s===void 0&&(s=t),n[s]=e[t]}function q2(n,e){for(var t in n)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function vu(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ip(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var s=t.call(n),o,c=[],l;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)c.push(o.value)}catch(f){l={error:f}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(l)throw l.error}}return c}function z2(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(Ip(arguments[e]));return n}function H2(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var s=Array(n),o=0,e=0;e<t;e++)for(var c=arguments[e],l=0,f=c.length;l<f;l++,o++)s[o]=c[l];return s}function vs(n){return this instanceof vs?(this.v=n,this):new vs(n)}function K2(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),o,c=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(S){s[S]&&(o[S]=function(T){return new Promise(function(R,z){c.push([S,T,R,z])>1||f(S,T)})})}function f(S,T){try{y(s[S](T))}catch(R){A(c[0][3],R)}}function y(S){S.value instanceof vs?Promise.resolve(S.value.v).then(p,E):A(c[0][2],S)}function p(S){f("next",S)}function E(S){f("throw",S)}function A(S,T){S(T),c.shift(),c.length&&f(c[0][0],c[0][1])}}function V2(n){var e,t;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,c){e[o]=n[o]?function(l){return(t=!t)?{value:vs(n[o](l)),done:o==="return"}:c?c(l):l}:c}}function k2(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof vu=="function"?vu(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(c){t[c]=n[c]&&function(l){return new Promise(function(f,y){l=n[c](l),o(f,y,l.done,l.value)})}}function o(c,l,f,y){Promise.resolve(y).then(function(p){c({value:p,done:f})},l)}}function G2(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function W2(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function Y2(n){return n&&n.__esModule?n:{default:n}}function J2(n,e){if(!e.has(n))throw new TypeError("attempted to get private field on non-instance");return e.get(n)}function X2(n,e,t){if(!e.has(n))throw new TypeError("attempted to set private field on non-instance");return e.set(n,t),t}var Q2=Object.freeze({__proto__:null,get __assign(){return _u},__asyncDelegator:V2,__asyncGenerator:K2,__asyncValues:k2,__await:vs,__awaiter:L2,__classPrivateFieldGet:J2,__classPrivateFieldSet:X2,__createBinding:B2,__decorate:F2,__exportStar:q2,__extends:N2,__generator:M2,__importDefault:Y2,__importStar:W2,__makeTemplateObject:G2,__metadata:j2,__param:U2,__read:Ip,__rest:$2,__spread:z2,__spreadArrays:H2,__values:vu}),Z2=ti(Q2),gn={},Kf;function eD(){if(Kf)return gn;Kf=1,Object.defineProperty(gn,"__esModule",{value:!0}),gn.isBrowserCryptoAvailable=gn.getSubtleCrypto=gn.getBrowerCrypto=void 0;function n(){return(_r===null||_r===void 0?void 0:_r.crypto)||(_r===null||_r===void 0?void 0:_r.msCrypto)||{}}gn.getBrowerCrypto=n;function e(){const s=n();return s.subtle||s.webkitSubtle}gn.getSubtleCrypto=e;function t(){return!!n()&&!!e()}return gn.isBrowserCryptoAvailable=t,gn}var yn={},Vf;function tD(){if(Vf)return yn;Vf=1,Object.defineProperty(yn,"__esModule",{value:!0}),yn.isBrowser=yn.isNode=yn.isReactNative=void 0;function n(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}yn.isReactNative=n;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}yn.isNode=e;function t(){return!n()&&!e()}return yn.isBrowser=t,yn}(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=Z2;e.__exportStar(eD(),n),e.__exportStar(tD(),n)})(xp);function Op(n=3){const e=Date.now()*Math.pow(10,n),t=Math.floor(Math.random()*Math.pow(10,n));return e+t}function zu(n=6){return BigInt(Op(n))}function Xo(n,e,t){return{id:t||Op(),jsonrpc:"2.0",method:n,params:e}}function Hu(n,e){return{id:n,jsonrpc:"2.0",result:e}}function Qo(n,e,t){return{id:n,jsonrpc:"2.0",error:rD(e,t)}}function rD(n,e){return typeof n>"u"?Hf(Ep):(typeof n=="string"&&(n=Object.assign(Object.assign({},Hf(qu)),{message:n})),typeof e<"u"&&(n.data=e),T2(n.code)&&(n=R2(n.code)),n)}class nD{}class iD extends nD{constructor(){super()}}class sD extends iD{constructor(e){super()}}const oD="^https?:",aD="^wss?:";function cD(n){const e=n.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function Pp(n,e){const t=cD(n);return typeof t>"u"?!1:new RegExp(e).test(t)}function kf(n){return Pp(n,oD)}function Gf(n){return Pp(n,aD)}function uD(n){return new RegExp("wss?://localhost(:d{2,5})?").test(n)}function Cp(n){return typeof n=="object"&&"id"in n&&"jsonrpc"in n&&n.jsonrpc==="2.0"}function Ku(n){return Cp(n)&&"method"in n}function Zo(n){return Cp(n)&&(_n(n)||Vr(n))}function _n(n){return"result"in n}function Vr(n){return"error"in n}class Nn extends sD{constructor(e){super(e),this.events=new br,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(Xo(e.method,e.params||[],e.id||zu().toString()),t)}async requestStrict(e,t){return new Promise(async(s,o)=>{if(!this.connection.connected)try{await this.open()}catch(c){o(c)}this.events.on(`${e.id}`,c=>{Vr(c)?o(c.error):s(c.result)});try{await this.connection.send(e,t)}catch(c){o(c)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Zo(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const Wf=10,hD=()=>typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:require("ws"),lD=()=>typeof window<"u",fD=hD();class dD{constructor(e){if(this.url=e,this.events=new br,this.registering=!1,!Gf(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(new Error("Connection already closed"));return}this.socket.onclose=s=>{this.onClose(s),e()},this.socket.close()})}async send(e,t){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(_s(e))}catch(s){this.onError(e.id,s)}}register(e=this.url){if(!Gf(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((s,o)=>{this.events.once("register_error",c=>{this.resetMaxListeners(),o(c)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return o(new Error("WebSocket connection is missing or invalid"));s(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,s)=>{const o=xp.isReactNative()?void 0:{rejectUnauthorized:!uD(e)},c=new fD(e,[],o);lD()?c.onerror=l=>{const f=l;s(this.emitError(f.error))}:c.on("error",l=>{s(this.emitError(l))}),c.onopen=()=>{this.onOpen(c),t(c)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?Mu(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const s=this.parseError(t),o=s.message||s.toString(),c=Qo(e,o);this.events.emit("payload",c)}parseError(e,t=this.url){return Sp(e,t,"WS")}resetMaxListeners(){this.events.getMaxListeners()>Wf&&this.events.setMaxListeners(Wf)}emitError(e){const t=this.parseError(new Error(e?.message||`WebSocket connection failed for URL: ${this.url}`));return this.events.emit("register_error",t),t}}var qo={exports:{}};qo.exports;(function(n,e){var t=200,s="__lodash_hash_undefined__",o=1,c=2,l=9007199254740991,f="[object Arguments]",y="[object Array]",p="[object AsyncFunction]",E="[object Boolean]",A="[object Date]",S="[object Error]",T="[object Function]",R="[object GeneratorFunction]",z="[object Map]",K="[object Number]",ie="[object Null]",$="[object Object]",j="[object Promise]",x="[object Proxy]",C="[object RegExp]",w="[object Set]",u="[object String]",b="[object Symbol]",G="[object Undefined]",W="[object WeakMap]",se="[object ArrayBuffer]",ce="[object DataView]",de="[object Float32Array]",m="[object Float64Array]",O="[object Int8Array]",ee="[object Int16Array]",X="[object Int32Array]",V="[object Uint8Array]",k="[object Uint8ClampedArray]",J="[object Uint16Array]",re="[object Uint32Array]",me=/[\\^$.*+?()[\]{}|]/g,oe=/^\[object .+?Constructor\]$/,we=/^(?:0|[1-9]\d*)$/,le={};le[de]=le[m]=le[O]=le[ee]=le[X]=le[V]=le[k]=le[J]=le[re]=!0,le[f]=le[y]=le[se]=le[E]=le[ce]=le[A]=le[S]=le[T]=le[z]=le[K]=le[$]=le[C]=le[w]=le[u]=le[W]=!1;var ve=typeof _r=="object"&&_r&&_r.Object===Object&&_r,q=typeof self=="object"&&self&&self.Object===Object&&self,B=ve||q||Function("return this")(),F=e&&!e.nodeType&&e,d=F&&!0&&n&&!n.nodeType&&n,P=d&&d.exports===F,ae=P&&ve.process,fe=function(){try{return ae&&ae.binding&&ae.binding("util")}catch{}}(),xe=fe&&fe.isTypedArray;function ze(D,U){for(var te=-1,pe=D==null?0:D.length,at=0,Te=[];++te<pe;){var ft=D[te];U(ft,te,D)&&(Te[at++]=ft)}return Te}function Ve(D,U){for(var te=-1,pe=U.length,at=D.length;++te<pe;)D[at+te]=U[te];return D}function je(D,U){for(var te=-1,pe=D==null?0:D.length;++te<pe;)if(U(D[te],te,D))return!0;return!1}function pt(D,U){for(var te=-1,pe=Array(D);++te<D;)pe[te]=U(te);return pe}function gt(D){return function(U){return D(U)}}function Me(D,U){return D.has(U)}function Ie(D,U){return D?.[U]}function Ne(D){var U=-1,te=Array(D.size);return D.forEach(function(pe,at){te[++U]=[at,pe]}),te}function $e(D,U){return function(te){return D(U(te))}}function Be(D){var U=-1,te=Array(D.size);return D.forEach(function(pe){te[++U]=pe}),te}var Pe=Array.prototype,Fe=Function.prototype,Se=Object.prototype,Ce=B["__core-js_shared__"],He=Fe.toString,Oe=Se.hasOwnProperty,ke=function(){var D=/[^.]+$/.exec(Ce&&Ce.keys&&Ce.keys.IE_PROTO||"");return D?"Symbol(src)_1."+D:""}(),We=Se.toString,et=RegExp("^"+He.call(Oe).replace(me,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tt=P?B.Buffer:void 0,Je=B.Symbol,er=B.Uint8Array,hr=Se.propertyIsEnumerable,kr=Pe.splice,tr=Je?Je.toStringTag:void 0,rn=Object.getOwnPropertySymbols,bn=tt?tt.isBuffer:void 0,Fn=$e(Object.keys,Object),wt=mr(B,"DataView"),yt=mr(B,"Map"),Et=mr(B,"Promise"),Dt=mr(B,"Set"),bt=mr(B,"WeakMap"),_t=mr(Object,"create"),Ft=sn(wt),Ut=sn(yt),St=sn(Et),jt=sn(Dt),xt=sn(bt),Ct=Je?Je.prototype:void 0,It=Ct?Ct.valueOf:void 0;function ht(D){var U=-1,te=D==null?0:D.length;for(this.clear();++U<te;){var pe=D[U];this.set(pe[0],pe[1])}}function Lt(){this.__data__=_t?_t(null):{},this.size=0}function Mt(D){var U=this.has(D)&&delete this.__data__[D];return this.size-=U?1:0,U}function ra(D){var U=this.__data__;if(_t){var te=U[D];return te===s?void 0:te}return Oe.call(U,D)?U[D]:void 0}function na(D){var U=this.__data__;return _t?U[D]!==void 0:Oe.call(U,D)}function ia(D,U){var te=this.__data__;return this.size+=this.has(D)?0:1,te[D]=_t&&U===void 0?s:U,this}ht.prototype.clear=Lt,ht.prototype.delete=Mt,ht.prototype.get=ra,ht.prototype.has=na,ht.prototype.set=ia;function Or(D){var U=-1,te=D==null?0:D.length;for(this.clear();++U<te;){var pe=D[U];this.set(pe[0],pe[1])}}function sa(){this.__data__=[],this.size=0}function oa(D){var U=this.__data__,te=Un(U,D);if(te<0)return!1;var pe=U.length-1;return te==pe?U.pop():kr.call(U,te,1),--this.size,!0}function aa(D){var U=this.__data__,te=Un(U,D);return te<0?void 0:U[te][1]}function ca(D){return Un(this.__data__,D)>-1}function ua(D,U){var te=this.__data__,pe=Un(te,D);return pe<0?(++this.size,te.push([D,U])):te[pe][1]=U,this}Or.prototype.clear=sa,Or.prototype.delete=oa,Or.prototype.get=aa,Or.prototype.has=ca,Or.prototype.set=ua;function nn(D){var U=-1,te=D==null?0:D.length;for(this.clear();++U<te;){var pe=D[U];this.set(pe[0],pe[1])}}function oi(){this.size=0,this.__data__={hash:new ht,map:new(yt||Or),string:new ht}}function ha(D){var U=mn(this,D).delete(D);return this.size-=U?1:0,U}function ai(D){return mn(this,D).get(D)}function la(D){return mn(this,D).has(D)}function fa(D,U){var te=mn(this,D),pe=te.size;return te.set(D,U),this.size+=te.size==pe?0:1,this}nn.prototype.clear=oi,nn.prototype.delete=ha,nn.prototype.get=ai,nn.prototype.has=la,nn.prototype.set=fa;function ci(D){var U=-1,te=D==null?0:D.length;for(this.__data__=new nn;++U<te;)this.add(D[U])}function xs(D){return this.__data__.set(D,s),this}function Is(D){return this.__data__.has(D)}ci.prototype.add=ci.prototype.push=xs,ci.prototype.has=Is;function Mr(D){var U=this.__data__=new Or(D);this.size=U.size}function da(){this.__data__=new Or,this.size=0}function pa(D){var U=this.__data__,te=U.delete(D);return this.size=U.size,te}function ga(D){return this.__data__.get(D)}function ya(D){return this.__data__.has(D)}function Os(D,U){var te=this.__data__;if(te instanceof Or){var pe=te.__data__;if(!yt||pe.length<t-1)return pe.push([D,U]),this.size=++te.size,this;te=this.__data__=new nn(pe)}return te.set(D,U),this.size=te.size,this}Mr.prototype.clear=da,Mr.prototype.delete=pa,Mr.prototype.get=ga,Mr.prototype.has=ya,Mr.prototype.set=Os;function Ps(D,U){var te=li(D),pe=!te&&Bs(D),at=!te&&!pe&&Ui(D),Te=!te&&!pe&&!at&&Hs(D),ft=te||pe||at||Te,Bt=ft?pt(D.length,String):[],Xe=Bt.length;for(var ct in D)(U||Oe.call(D,ct))&&!(ft&&(ct=="length"||at&&(ct=="offset"||ct=="parent")||Te&&(ct=="buffer"||ct=="byteLength"||ct=="byteOffset")||Fs(ct,Xe)))&&Bt.push(ct);return Bt}function Un(D,U){for(var te=D.length;te--;)if(Ms(D[te][0],U))return te;return-1}function $i(D,U,te){var pe=U(D);return li(D)?pe:Ve(pe,te(D))}function jn(D){return D==null?D===void 0?G:ie:tr&&tr in Object(D)?Ns(D):ba(D)}function Fi(D){return Mn(D)&&jn(D)==f}function Ln(D,U,te,pe,at){return D===U?!0:D==null||U==null||!Mn(D)&&!Mn(U)?D!==D&&U!==U:Cs(D,U,te,pe,Ln,at)}function Cs(D,U,te,pe,at,Te){var ft=li(D),Bt=li(U),Xe=ft?y:Gr(D),ct=Bt?y:Gr(U);Xe=Xe==f?$:Xe,ct=ct==f?$:ct;var At=Xe==$,lr=ct==$,qt=Xe==ct;if(qt&&Ui(D)){if(!Ui(U))return!1;ft=!0,At=!1}if(qt&&!At)return Te||(Te=new Mr),ft||Hs(D)?ui(D,U,te,pe,at,Te):va(D,U,Xe,te,pe,at,Te);if(!(te&o)){var dt=At&&Oe.call(D,"__wrapped__"),rr=lr&&Oe.call(U,"__wrapped__");if(dt||rr){var Br=dt?D.value():D,Pr=rr?U.value():U;return Te||(Te=new Mr),at(Br,Pr,te,pe,Te)}}return qt?(Te||(Te=new Mr),Rs(D,U,te,pe,at,Te)):!1}function _a(D){if(!zs(D)||js(D))return!1;var U=fi(D)?et:oe;return U.test(sn(D))}function As(D){return Mn(D)&&qs(D.length)&&!!le[jn(D)]}function Ts(D){if(!Ls(D))return Fn(D);var U=[];for(var te in Object(D))Oe.call(D,te)&&te!="constructor"&&U.push(te);return U}function ui(D,U,te,pe,at,Te){var ft=te&o,Bt=D.length,Xe=U.length;if(Bt!=Xe&&!(ft&&Xe>Bt))return!1;var ct=Te.get(D);if(ct&&Te.get(U))return ct==U;var At=-1,lr=!0,qt=te&c?new ci:void 0;for(Te.set(D,U),Te.set(U,D);++At<Bt;){var dt=D[At],rr=U[At];if(pe)var Br=ft?pe(rr,dt,At,U,D,Te):pe(dt,rr,At,D,U,Te);if(Br!==void 0){if(Br)continue;lr=!1;break}if(qt){if(!je(U,function(Pr,Wr){if(!Me(qt,Wr)&&(dt===Pr||at(dt,Pr,te,pe,Te)))return qt.push(Wr)})){lr=!1;break}}else if(!(dt===rr||at(dt,rr,te,pe,Te))){lr=!1;break}}return Te.delete(D),Te.delete(U),lr}function va(D,U,te,pe,at,Te,ft){switch(te){case ce:if(D.byteLength!=U.byteLength||D.byteOffset!=U.byteOffset)return!1;D=D.buffer,U=U.buffer;case se:return!(D.byteLength!=U.byteLength||!Te(new er(D),new er(U)));case E:case A:case K:return Ms(+D,+U);case S:return D.name==U.name&&D.message==U.message;case C:case u:return D==U+"";case z:var Bt=Ne;case w:var Xe=pe&o;if(Bt||(Bt=Be),D.size!=U.size&&!Xe)return!1;var ct=ft.get(D);if(ct)return ct==U;pe|=c,ft.set(D,U);var At=ui(Bt(D),Bt(U),pe,at,Te,ft);return ft.delete(D),At;case b:if(It)return It.call(D)==It.call(U)}return!1}function Rs(D,U,te,pe,at,Te){var ft=te&o,Bt=hi(D),Xe=Bt.length,ct=hi(U),At=ct.length;if(Xe!=At&&!ft)return!1;for(var lr=Xe;lr--;){var qt=Bt[lr];if(!(ft?qt in U:Oe.call(U,qt)))return!1}var dt=Te.get(D);if(dt&&Te.get(U))return dt==U;var rr=!0;Te.set(D,U),Te.set(U,D);for(var Br=ft;++lr<Xe;){qt=Bt[lr];var Pr=D[qt],Wr=U[qt];if(pe)var ji=ft?pe(Wr,Pr,qt,U,D,Te):pe(Pr,Wr,qt,D,U,Te);if(!(ji===void 0?Pr===Wr||at(Pr,Wr,te,pe,Te):ji)){rr=!1;break}Br||(Br=qt=="constructor")}if(rr&&!Br){var Bn=D.constructor,Vt=U.constructor;Bn!=Vt&&"constructor"in D&&"constructor"in U&&!(typeof Bn=="function"&&Bn instanceof Bn&&typeof Vt=="function"&&Vt instanceof Vt)&&(rr=!1)}return Te.delete(D),Te.delete(U),rr}function hi(D){return $i(D,Ea,$s)}function mn(D,U){var te=D.__data__;return Us(U)?te[typeof U=="string"?"string":"hash"]:te.map}function mr(D,U){var te=Ie(D,U);return _a(te)?te:void 0}function Ns(D){var U=Oe.call(D,tr),te=D[tr];try{D[tr]=void 0;var pe=!0}catch{}var at=We.call(D);return pe&&(U?D[tr]=te:delete D[tr]),at}var $s=rn?function(D){return D==null?[]:(D=Object(D),ze(rn(D),function(U){return hr.call(D,U)}))}:ot,Gr=jn;(wt&&Gr(new wt(new ArrayBuffer(1)))!=ce||yt&&Gr(new yt)!=z||Et&&Gr(Et.resolve())!=j||Dt&&Gr(new Dt)!=w||bt&&Gr(new bt)!=W)&&(Gr=function(D){var U=jn(D),te=U==$?D.constructor:void 0,pe=te?sn(te):"";if(pe)switch(pe){case Ft:return ce;case Ut:return z;case St:return j;case jt:return w;case xt:return W}return U});function Fs(D,U){return U=U??l,!!U&&(typeof D=="number"||we.test(D))&&D>-1&&D%1==0&&D<U}function Us(D){var U=typeof D;return U=="string"||U=="number"||U=="symbol"||U=="boolean"?D!=="__proto__":D===null}function js(D){return!!ke&&ke in D}function Ls(D){var U=D&&D.constructor,te=typeof U=="function"&&U.prototype||Se;return D===te}function ba(D){return We.call(D)}function sn(D){if(D!=null){try{return He.call(D)}catch{}try{return D+""}catch{}}return""}function Ms(D,U){return D===U||D!==D&&U!==U}var Bs=Fi(function(){return arguments}())?Fi:function(D){return Mn(D)&&Oe.call(D,"callee")&&!hr.call(D,"callee")},li=Array.isArray;function ma(D){return D!=null&&qs(D.length)&&!fi(D)}var Ui=bn||st;function wa(D,U){return Ln(D,U)}function fi(D){if(!zs(D))return!1;var U=jn(D);return U==T||U==R||U==p||U==x}function qs(D){return typeof D=="number"&&D>-1&&D%1==0&&D<=l}function zs(D){var U=typeof D;return D!=null&&(U=="object"||U=="function")}function Mn(D){return D!=null&&typeof D=="object"}var Hs=xe?gt(xe):As;function Ea(D){return ma(D)?Ps(D):Ts(D)}function ot(){return[]}function st(){return!1}n.exports=wa})(qo,qo.exports);var pD=qo.exports,gD=Pd(pD);function yD(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),s=0;s<t.length;s++)t[s]=255;for(var o=0;o<n.length;o++){var c=n.charAt(o),l=c.charCodeAt(0);if(t[l]!==255)throw new TypeError(c+" is ambiguous");t[l]=o}var f=n.length,y=n.charAt(0),p=Math.log(f)/Math.log(256),E=Math.log(256)/Math.log(f);function A(R){if(R instanceof Uint8Array||(ArrayBuffer.isView(R)?R=new Uint8Array(R.buffer,R.byteOffset,R.byteLength):Array.isArray(R)&&(R=Uint8Array.from(R))),!(R instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(R.length===0)return"";for(var z=0,K=0,ie=0,$=R.length;ie!==$&&R[ie]===0;)ie++,z++;for(var j=($-ie)*E+1>>>0,x=new Uint8Array(j);ie!==$;){for(var C=R[ie],w=0,u=j-1;(C!==0||w<K)&&u!==-1;u--,w++)C+=256*x[u]>>>0,x[u]=C%f>>>0,C=C/f>>>0;if(C!==0)throw new Error("Non-zero carry");K=w,ie++}for(var b=j-K;b!==j&&x[b]===0;)b++;for(var G=y.repeat(z);b<j;++b)G+=n.charAt(x[b]);return G}function S(R){if(typeof R!="string")throw new TypeError("Expected String");if(R.length===0)return new Uint8Array;var z=0;if(R[z]!==" "){for(var K=0,ie=0;R[z]===y;)K++,z++;for(var $=(R.length-z)*p+1>>>0,j=new Uint8Array($);R[z];){var x=t[R.charCodeAt(z)];if(x===255)return;for(var C=0,w=$-1;(x!==0||C<ie)&&w!==-1;w--,C++)x+=f*j[w]>>>0,j[w]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");ie=C,z++}if(R[z]!==" "){for(var u=$-ie;u!==$&&j[u]===0;)u++;for(var b=new Uint8Array(K+($-u)),G=K;u!==$;)b[G++]=j[u++];return b}}}function T(R){var z=S(R);if(z)return z;throw new Error(`Non-${e} character`)}return{encode:A,decodeUnsafe:S,decode:T}}var _D=yD,vD=_D;const Ap=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},bD=n=>new TextEncoder().encode(n),mD=n=>new TextDecoder().decode(n);class wD{constructor(e,t,s){this.name=e,this.prefix=t,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class ED{constructor(e,t,s){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Tp(this,e)}}class DD{constructor(e){this.decoders=e}or(e){return Tp(this,e)}decode(e){const t=e[0],s=this.decoders[t];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Tp=(n,e)=>new DD({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}});class SD{constructor(e,t,s,o){this.name=e,this.prefix=t,this.baseEncode=s,this.baseDecode=o,this.encoder=new wD(e,t,s),this.decoder=new ED(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const ea=({name:n,prefix:e,encode:t,decode:s})=>new SD(n,e,t,s),Ss=({prefix:n,name:e,alphabet:t})=>{const{encode:s,decode:o}=vD(t,e);return ea({prefix:n,name:e,encode:s,decode:c=>Ap(o(c))})},xD=(n,e,t,s)=>{const o={};for(let E=0;E<e.length;++E)o[e[E]]=E;let c=n.length;for(;n[c-1]==="=";)--c;const l=new Uint8Array(c*t/8|0);let f=0,y=0,p=0;for(let E=0;E<c;++E){const A=o[n[E]];if(A===void 0)throw new SyntaxError(`Non-${s} character`);y=y<<t|A,f+=t,f>=8&&(f-=8,l[p++]=255&y>>f)}if(f>=t||255&y<<8-f)throw new SyntaxError("Unexpected end of data");return l},ID=(n,e,t)=>{const s=e[e.length-1]==="=",o=(1<<t)-1;let c="",l=0,f=0;for(let y=0;y<n.length;++y)for(f=f<<8|n[y],l+=8;l>t;)l-=t,c+=e[o&f>>l];if(l&&(c+=e[o&f<<t-l]),s)for(;c.length*t&7;)c+="=";return c},Jt=({name:n,prefix:e,bitsPerChar:t,alphabet:s})=>ea({prefix:e,name:n,encode(o){return ID(o,s,t)},decode(o){return xD(o,s,t,n)}}),OD=ea({prefix:"\0",name:"identity",encode:n=>mD(n),decode:n=>bD(n)});var PD=Object.freeze({__proto__:null,identity:OD});const CD=Jt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var AD=Object.freeze({__proto__:null,base2:CD});const TD=Jt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var RD=Object.freeze({__proto__:null,base8:TD});const ND=Ss({prefix:"9",name:"base10",alphabet:"0123456789"});var $D=Object.freeze({__proto__:null,base10:ND});const FD=Jt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),UD=Jt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var jD=Object.freeze({__proto__:null,base16:FD,base16upper:UD});const LD=Jt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),MD=Jt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),BD=Jt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),qD=Jt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),zD=Jt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),HD=Jt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),KD=Jt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),VD=Jt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),kD=Jt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var GD=Object.freeze({__proto__:null,base32:LD,base32upper:MD,base32pad:BD,base32padupper:qD,base32hex:zD,base32hexupper:HD,base32hexpad:KD,base32hexpadupper:VD,base32z:kD});const WD=Ss({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),YD=Ss({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var JD=Object.freeze({__proto__:null,base36:WD,base36upper:YD});const XD=Ss({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),QD=Ss({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var ZD=Object.freeze({__proto__:null,base58btc:XD,base58flickr:QD});const eS=Jt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),tS=Jt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),rS=Jt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),nS=Jt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var iS=Object.freeze({__proto__:null,base64:eS,base64pad:tS,base64url:rS,base64urlpad:nS});const Rp=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),sS=Rp.reduce((n,e,t)=>(n[t]=e,n),[]),oS=Rp.reduce((n,e,t)=>(n[e.codePointAt(0)]=t,n),[]);function aS(n){return n.reduce((e,t)=>(e+=sS[t],e),"")}function cS(n){const e=[];for(const t of n){const s=oS[t.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(s)}return new Uint8Array(e)}const uS=ea({prefix:"\u{1F680}",name:"base256emoji",encode:aS,decode:cS});var hS=Object.freeze({__proto__:null,base256emoji:uS}),lS=Np,Yf=128,fS=127,dS=~fS,pS=Math.pow(2,31);function Np(n,e,t){e=e||[],t=t||0;for(var s=t;n>=pS;)e[t++]=n&255|Yf,n/=128;for(;n&dS;)e[t++]=n&255|Yf,n>>>=7;return e[t]=n|0,Np.bytes=t-s+1,e}var gS=bu,yS=128,Jf=127;function bu(n,s){var t=0,s=s||0,o=0,c=s,l,f=n.length;do{if(c>=f)throw bu.bytes=0,new RangeError("Could not decode varint");l=n[c++],t+=o<28?(l&Jf)<<o:(l&Jf)*Math.pow(2,o),o+=7}while(l>=yS);return bu.bytes=c-s,t}var _S=Math.pow(2,7),vS=Math.pow(2,14),bS=Math.pow(2,21),mS=Math.pow(2,28),wS=Math.pow(2,35),ES=Math.pow(2,42),DS=Math.pow(2,49),SS=Math.pow(2,56),xS=Math.pow(2,63),IS=function(n){return n<_S?1:n<vS?2:n<bS?3:n<mS?4:n<wS?5:n<ES?6:n<DS?7:n<SS?8:n<xS?9:10},OS={encode:lS,decode:gS,encodingLength:IS},$p=OS;const Xf=(n,e,t=0)=>($p.encode(n,e,t),e),Qf=n=>$p.encodingLength(n),mu=(n,e)=>{const t=e.byteLength,s=Qf(n),o=s+Qf(t),c=new Uint8Array(o+t);return Xf(n,c,0),Xf(t,c,s),c.set(e,o),new PS(n,t,e,c)};class PS{constructor(e,t,s,o){this.code=e,this.size=t,this.digest=s,this.bytes=o}}const Fp=({name:n,code:e,encode:t})=>new CS(n,e,t);class CS{constructor(e,t,s){this.name=e,this.code=t,this.encode=s}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?mu(this.code,t):t.then(s=>mu(this.code,s))}else throw Error("Unknown type, must be binary type")}}const Up=n=>async e=>new Uint8Array(await crypto.subtle.digest(n,e)),AS=Fp({name:"sha2-256",code:18,encode:Up("SHA-256")}),TS=Fp({name:"sha2-512",code:19,encode:Up("SHA-512")});var RS=Object.freeze({__proto__:null,sha256:AS,sha512:TS});const jp=0,NS="identity",Lp=Ap,$S=n=>mu(jp,Lp(n)),FS={code:jp,name:NS,encode:Lp,digest:$S};var US=Object.freeze({__proto__:null,identity:FS});new TextEncoder,new TextDecoder;const Zf={...PD,...AD,...RD,...$D,...jD,...GD,...JD,...ZD,...iS,...hS};({...RS,...US});function Mp(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function jS(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Mp(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function Bp(n,e,t,s){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:t},decoder:{decode:s}}}const ed=Bp("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),jc=Bp("ascii","a",n=>{let e="a";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return e},n=>{n=n.substring(1);const e=jS(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}),LS={utf8:ed,"utf-8":ed,hex:Zf.base16,latin1:jc,ascii:jc,binary:jc,...Zf};function MS(n,e="utf8"){const t=LS[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Mp(globalThis.Buffer.from(n,"utf-8")):t.decoder.decode(`${t.prefix}${n}`)}const qp="wc",BS=2,Vu="core",Tn=`${qp}@2:${Vu}:`,qS={name:Vu,logger:"error"},zS={database:":memory:"},HS="crypto",td="client_ed25519_seed",KS=_e.ONE_DAY,VS="keychain",kS="0.3",GS="messages",WS="0.3",YS=_e.SIX_HOURS,JS="publisher",zp="irn",XS="error",Hp="wss://relay.walletconnect.com",QS="relayer",Pt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},ZS="_subscription",os={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},e5=_e.ONE_SECOND/2,t5="2.8.4",r5=1e4,n5="0.3",i5="WALLETCONNECT_CLIENT_ID",en={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},s5="subscription",o5="0.3",a5=_e.FIVE_SECONDS*1e3,c5="pairing",u5="0.3",as={wc_pairingDelete:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:_e.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:_e.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:0},res:{ttl:_e.ONE_DAY,prompt:!1,tag:0}}},Zr={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},h5="history",l5="0.3",f5="expirer",jr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},d5="0.3",Lc="verify-api",rd="https://verify.walletconnect.com";class p5{constructor(e,t){this.core=e,this.logger=t,this.keychain=new Map,this.name=VS,this.version=kS,this.initialized=!1,this.storagePrefix=Tn,this.init=async()=>{if(!this.initialized){const s=await this.getKeyChain();typeof s<"u"&&(this.keychain=s),this.initialized=!0}},this.has=s=>(this.isInitialized(),this.keychain.has(s)),this.set=async(s,o)=>{this.isInitialized(),this.keychain.set(s,o),await this.persist()},this.get=s=>{this.isInitialized();const o=this.keychain.get(s);if(typeof o>"u"){const{message:c}=he("NO_MATCHING_KEY",`${this.name}: ${s}`);throw new Error(c)}return o},this.del=async s=>{this.isInitialized(),this.keychain.delete(s),await this.persist()},this.core=e,this.logger=Ze.generateChildLogger(t,this.name)}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,np(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?ip(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=he("NOT_INITIALIZED",this.name);throw new Error(e)}}}class g5{constructor(e,t,s){this.core=e,this.logger=t,this.name=HS,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=o=>(this.isInitialized(),this.keychain.has(o)),this.getClientId=async()=>{this.isInitialized();const o=await this.getClientSeed(),c=zf(o);return wp(c.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const o=EE();return this.setPrivateKey(o.publicKey,o.privateKey)},this.signJWT=async o=>{this.isInitialized();const c=await this.getClientSeed(),l=zf(c),f=su();return await x2(f,o,KS,l)},this.generateSharedKey=(o,c,l)=>{this.isInitialized();const f=this.getPrivateKey(o),y=DE(f,c);return this.setSymKey(y,l)},this.setSymKey=async(o,c)=>{this.isInitialized();const l=c||SE(o);return await this.keychain.set(l,o),l},this.deleteKeyPair=async o=>{this.isInitialized(),await this.keychain.del(o)},this.deleteSymKey=async o=>{this.isInitialized(),await this.keychain.del(o)},this.encode=async(o,c,l)=>{this.isInitialized();const f=ep(l),y=_s(c);if(_f(f)){const S=f.senderPublicKey,T=f.receiverPublicKey;o=await this.generateSharedKey(S,T)}const p=this.getSymKey(o),{type:E,senderPublicKey:A}=f;return IE({type:E,symKey:p,message:y,senderPublicKey:A})},this.decode=async(o,c,l)=>{this.isInitialized();const f=CE(c,l);if(_f(f)){const E=f.receiverPublicKey,A=f.senderPublicKey;o=await this.generateSharedKey(E,A)}const y=this.getSymKey(o),p=OE({symKey:y,encoded:c});return Mu(p)},this.getPayloadType=o=>{const c=Lo(o);return ws(c.type)},this.getPayloadSenderPublicKey=o=>{const c=Lo(o);return c.senderPublicKey?ur(c.senderPublicKey,cr):void 0},this.core=e,this.logger=Ze.generateChildLogger(t,this.name),this.keychain=s||new p5(this.core,this.logger)}get context(){return Ze.getLoggerContext(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(td)}catch{e=su(),await this.keychain.set(td,e)}return MS(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=he("NOT_INITIALIZED",this.name);throw new Error(e)}}}class y5 extends t2{constructor(e,t){super(e,t),this.logger=e,this.core=t,this.messages=new Map,this.name=GS,this.version=WS,this.initialized=!1,this.storagePrefix=Tn,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const s=await this.getRelayerMessages();typeof s<"u"&&(this.messages=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(s){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(s)}finally{this.initialized=!0}}},this.set=async(s,o)=>{this.isInitialized();const c=Ci(o);let l=this.messages.get(s);return typeof l>"u"&&(l={}),typeof l[c]<"u"||(l[c]=o,this.messages.set(s,l),await this.persist()),c},this.get=s=>{this.isInitialized();let o=this.messages.get(s);return typeof o>"u"&&(o={}),o},this.has=(s,o)=>{this.isInitialized();const c=this.get(s),l=Ci(o);return typeof c[l]<"u"},this.del=async s=>{this.isInitialized(),this.messages.delete(s),await this.persist()},this.logger=Ze.generateChildLogger(e,this.name),this.core=t}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,np(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?ip(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=he("NOT_INITIALIZED",this.name);throw new Error(e)}}}class _5 extends r2{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.events=new br,this.name=JS,this.queue=new Map,this.publishTimeout=_e.toMiliseconds(_e.TEN_SECONDS),this.queueTimeout=_e.toMiliseconds(_e.FIVE_SECONDS),this.needsTransportRestart=!1,this.publish=async(s,o,c)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:c}});try{const l=c?.ttl||YS,f=ou(c),y=c?.prompt||!1,p=c?.tag||0,E=c?.id||zu().toString(),A={topic:s,message:o,opts:{ttl:l,relay:f,prompt:y,tag:p,id:E}},S=setTimeout(()=>this.queue.set(E,A),this.queueTimeout);try{await await Mo(this.rpcPublish(s,o,l,f,y,p,E),this.publishTimeout),clearTimeout(S),this.relayer.events.emit(Pt.publish,A)}catch{this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0;return}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:c}})}catch(l){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(l),l}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.relayer=e,this.logger=Ze.generateChildLogger(t,this.name),this.registerEventListeners()}get context(){return Ze.getLoggerContext(this.logger)}rpcPublish(e,t,s,o,c,l,f){var y,p,E,A;const S={method:No(o.protocol).publish,params:{topic:e,message:t,ttl:s,prompt:c,tag:l},id:f};return ar((y=S.params)==null?void 0:y.prompt)&&((p=S.params)==null||delete p.prompt),ar((E=S.params)==null?void 0:E.tag)&&((A=S.params)==null||delete A.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:S}),this.relayer.request(S)}onPublish(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:t,message:s,opts:o}=e;await this.publish(t,s,o)})}registerEventListeners(){this.relayer.core.heartbeat.on(Ds.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Pt.connection_stalled);return}this.checkQueue()}),this.relayer.on(Pt.message_ack,e=>{this.onPublish(e.id.toString())})}}class v5{constructor(){this.map=new Map,this.set=(e,t)=>{const s=this.get(e);this.exists(e,t)||this.map.set(e,[...s,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const s=this.get(e);if(!this.exists(e,t))return;const o=s.filter(c=>c!==t);if(!o.length){this.map.delete(e);return}this.map.set(e,o)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var b5=Object.defineProperty,m5=Object.defineProperties,w5=Object.getOwnPropertyDescriptors,nd=Object.getOwnPropertySymbols,E5=Object.prototype.hasOwnProperty,D5=Object.prototype.propertyIsEnumerable,id=(n,e,t)=>e in n?b5(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,cs=(n,e)=>{for(var t in e||(e={}))E5.call(e,t)&&id(n,t,e[t]);if(nd)for(var t of nd(e))D5.call(e,t)&&id(n,t,e[t]);return n},Mc=(n,e)=>m5(n,w5(e));class S5 extends s2{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new v5,this.events=new br,this.name=s5,this.version=o5,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Tn,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}});try{const c=ou(o),l={topic:s,relay:c};this.pending.set(s,l);const f=await this.rpcSubscribe(s,c);return this.onSubscribe(f,l),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}}),f}catch(c){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(c),c}},this.unsubscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),typeof o?.id<"u"?await this.unsubscribeById(s,o.id,o):await this.unsubscribeByTopic(s,o)},this.isSubscribed=async s=>this.topics.includes(s)?!0:await new Promise((o,c)=>{const l=new _e.Watch;l.start(this.pendingSubscriptionWatchLabel);const f=setInterval(()=>{!this.pending.has(s)&&this.topics.includes(s)&&(clearInterval(f),l.stop(this.pendingSubscriptionWatchLabel),o(!0)),l.elapsed(this.pendingSubscriptionWatchLabel)>=a5&&(clearInterval(f),l.stop(this.pendingSubscriptionWatchLabel),c(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=Ze.generateChildLogger(t,this.name),this.clientId=""}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let s=!1;try{s=this.getSubscription(e).topic===t}catch{}return s}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const s=this.topicMap.get(e);await Promise.all(s.map(async o=>await this.unsubscribeById(e,o,t)))}async unsubscribeById(e,t,s){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:s}});try{const o=ou(s);await this.rpcUnsubscribe(e,t,o);const c=Nt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,c),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:s}})}catch(o){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(o),o}}async rpcSubscribe(e,t){const s={method:No(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{await await Mo(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Pt.connection_stalled)}return Ci(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,s={method:No(t.protocol).batchSubscribe,params:{topics:e.map(o=>o.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{return await await Mo(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(Pt.connection_stalled)}}rpcUnsubscribe(e,t,s){const o={method:No(s.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:o}),this.relayer.request(o)}onSubscribe(e,t){this.setSubscription(e,Mc(cs({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,cs({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(e,t,s){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,s),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t))}addSubscription(e,t){this.subscriptions.set(e,cs({},t)),this.topicMap.set(t.topic,e),this.events.emit(en.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:s}=he("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const s=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(s.topic,e),this.events.emit(en.deleted,Mc(cs({},s),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(en.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<e;t++){const s=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(en.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:t}=he("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const t=await this.rpcBatchSubscribe(e);vn(t)&&this.onBatchSubscribe(t.map((s,o)=>Mc(cs({},e[o]),{id:s})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(t=>{e.push(t)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(Ds.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(Pt.connect,async()=>{await this.onConnect()}),this.relayer.on(Pt.disconnect,()=>{this.onDisconnect()}),this.events.on(en.created,async e=>{const t=en.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}),this.events.on(en.deleted,async e=>{const t=en.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=he("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const t=setInterval(()=>{this.restartInProgress||(clearInterval(t),e())},this.pollingInterval)})}}var x5=Object.defineProperty,sd=Object.getOwnPropertySymbols,I5=Object.prototype.hasOwnProperty,O5=Object.prototype.propertyIsEnumerable,od=(n,e,t)=>e in n?x5(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,P5=(n,e)=>{for(var t in e||(e={}))I5.call(e,t)&&od(n,t,e[t]);if(sd)for(var t of sd(e))O5.call(e,t)&&od(n,t,e[t]);return n};class C5 extends n2{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new br,this.name=QS,this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=async t=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(t)}catch(s){throw this.logger.debug("Failed to Publish Request"),this.logger.error(s),s}},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Ze.generateChildLogger(e.logger,this.name):Ze.pino(Ze.getDefaultLoggerOptions({level:e.logger||XS})),this.messages=new y5(this.logger,e.core),this.subscriber=new S5(this,this.logger),this.publisher=new _5(this,this.logger),this.relayUrl=e?.relayUrl||Hp,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),await this.createProvider(),await Promise.all([this.messages.init(),this.transportOpen(),this.subscriber.init()]),this.registerEventListeners(),this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribted to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},r5)}get context(){return Ze.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,t,s){this.isInitialized(),await this.publisher.publish(e,t,s),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now()})}async subscribe(e,t){var s;this.isInitialized();let o=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"";return o||(await Promise.all([new Promise(c=>{this.subscriber.once(en.created,l=>{l.topic===e&&c()})}),new Promise(async c=>{o=await this.subscriber.subscribe(e,t),c()})]),o)}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(Pt.transport_closed))}async transportOpen(e){if(this.transportExplicitlyClosed=!1,!this.reconnecting){this.relayUrl=e||this.relayUrl,this.reconnecting=!0;try{await Promise.all([new Promise(t=>{this.initialized||t(),this.subscriber.once(en.resubscribed,()=>{t()})}),await Promise.race([new Promise(async(t,s)=>{await Mo(this.provider.connect(),5e3,"socket stalled").catch(o=>s(o)).then(()=>t()).finally(()=>this.removeListener(Pt.transport_closed,this.rejectTransportOpen))}),new Promise(t=>this.once(Pt.transport_closed,this.rejectTransportOpen))])])}catch(t){this.logger.error(t);const s=t;if(!this.isConnectionStalled(s.message))throw t;this.events.emit(Pt.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(e){this.transportExplicitlyClosed||this.reconnecting||(this.relayUrl=e||this.relayUrl,this.connected&&await Promise.all([new Promise(t=>{this.provider.once(os.disconnect,()=>{t()})}),this.transportClose()]),await this.createProvider(),await this.transportOpen())}isConnectionStalled(e){return this.staleConnectionErrors.some(t=>e.includes(t))}rejectTransportOpen(){throw new Error("Attempt to connect to relay via `transportOpen` has stalled. Retrying...")}async createProvider(){const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Nn(new dD(BE({sdkVersion:t5,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:t,message:s}=e;await this.messages.set(t,s)}async shouldIgnoreMessageEvent(e){const{topic:t,message:s}=e;return await this.subscriber.isSubscribed(t)?this.messages.has(t,s):!0}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Ku(e)){if(!e.method.endsWith(ZS))return;const t=e.params,{topic:s,message:o,publishedAt:c}=t.data,l={topic:s,message:o,publishedAt:c};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(P5({type:"event",event:t.id},l)),this.events.emit(t.id,l),await this.acknowledgePayload(e),await this.onMessageEvent(l)}else Zo(e)&&this.events.emit(Pt.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(Pt.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const t=Hu(e.id,!0);await this.provider.connection.send(t)}registerProviderListeners(){this.provider.on(os.payload,e=>this.onProviderPayload(e)),this.provider.on(os.connect,()=>{this.events.emit(Pt.connect)}),this.provider.on(os.disconnect,()=>{this.onProviderDisconnect()}),this.provider.on(os.error,e=>{this.logger.error(e),this.events.emit(Pt.error,e)})}registerEventListeners(){this.events.on(Pt.connection_stalled,async()=>{await this.restartTransport()})}onProviderDisconnect(){this.events.emit(Pt.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.restartTransport()},_e.toMiliseconds(e5))}isInitialized(){if(!this.initialized){const{message:e}=he("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(!this.connected){if(this.connecting)return await new Promise(e=>{const t=setInterval(()=>{this.connected&&(clearInterval(t),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var A5=Object.defineProperty,ad=Object.getOwnPropertySymbols,T5=Object.prototype.hasOwnProperty,R5=Object.prototype.propertyIsEnumerable,cd=(n,e,t)=>e in n?A5(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ud=(n,e)=>{for(var t in e||(e={}))T5.call(e,t)&&cd(n,t,e[t]);if(ad)for(var t of ad(e))R5.call(e,t)&&cd(n,t,e[t]);return n};class ta extends i2{constructor(e,t,s,o=Tn,c=void 0){super(e,t,s,o),this.core=e,this.logger=t,this.name=s,this.map=new Map,this.version=n5,this.cached=[],this.initialized=!1,this.storagePrefix=Tn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(l=>{this.getKey&&l!==null&&!ar(l)?this.map.set(this.getKey(l),l):u3(l)?this.map.set(l.id,l):h3(l)&&this.map.set(l.topic,l)}),this.cached=[],this.initialized=!0)},this.set=async(l,f)=>{this.isInitialized(),this.map.has(l)?await this.update(l,f):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:l,value:f}),this.map.set(l,f),await this.persist())},this.get=l=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:l}),this.getData(l)),this.getAll=l=>(this.isInitialized(),l?this.values.filter(f=>Object.keys(l).every(y=>gD(f[y],l[y]))):this.values),this.update=async(l,f)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:l,update:f});const y=ud(ud({},this.getData(l)),f);this.map.set(l,y),await this.persist()},this.delete=async(l,f)=>{this.isInitialized(),this.map.has(l)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:l,reason:f}),this.map.delete(l),await this.persist())},this.logger=Ze.generateChildLogger(t,this.name),this.storagePrefix=o,this.getKey=c}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){const{message:s}=he("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:t}=he("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=he("NOT_INITIALIZED",this.name);throw new Error(e)}}}class N5{constructor(e,t){this.core=e,this.logger=t,this.name=c5,this.version=u5,this.events=new br,this.initialized=!1,this.storagePrefix=Tn,this.ignoredPayloadTypes=[ni],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:s})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...s])]},this.create=async()=>{this.isInitialized();const s=su(),o=await this.core.crypto.setSymKey(s),c=tn(_e.FIVE_MINUTES),l={protocol:zp},f={topic:o,expiry:c,relay:l,active:!1},y=ZE({protocol:this.core.protocol,version:this.core.version,topic:o,symKey:s,relay:l});return await this.pairings.set(o,f),await this.core.relayer.subscribe(o),this.core.expirer.set(o,c),{topic:o,uri:y}},this.pair=async s=>{this.isInitialized(),this.isValidPair(s);const{topic:o,symKey:c,relay:l}=JE(s.uri);if(this.pairings.keys.includes(o))throw new Error(`Pairing already exists: ${o}`);if(this.core.crypto.hasKeys(o))throw new Error(`Keychain already exists: ${o}`);const f=tn(_e.FIVE_MINUTES),y={topic:o,relay:l,expiry:f,active:!1};return await this.pairings.set(o,y),await this.core.crypto.setSymKey(c,o),await this.core.relayer.subscribe(o,{relay:l}),this.core.expirer.set(o,f),s.activatePairing&&await this.activate({topic:o}),y},this.activate=async({topic:s})=>{this.isInitialized();const o=tn(_e.THIRTY_DAYS);await this.pairings.update(s,{active:!0,expiry:o}),this.core.expirer.set(s,o)},this.ping=async s=>{this.isInitialized(),await this.isValidPing(s);const{topic:o}=s;if(this.pairings.keys.includes(o)){const c=await this.sendRequest(o,"wc_pairingPing",{}),{done:l,resolve:f,reject:y}=Oi();this.events.once(zt("pairing_ping",c),({error:p})=>{p?y(p):f()}),await l()}},this.updateExpiry=async({topic:s,expiry:o})=>{this.isInitialized(),await this.pairings.update(s,{expiry:o})},this.updateMetadata=async({topic:s,metadata:o})=>{this.isInitialized(),await this.pairings.update(s,{peerMetadata:o})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async s=>{this.isInitialized(),await this.isValidDisconnect(s);const{topic:o}=s;this.pairings.keys.includes(o)&&(await this.sendRequest(o,"wc_pairingDelete",Nt("USER_DISCONNECTED")),await this.deletePairing(o))},this.sendRequest=async(s,o,c)=>{const l=Xo(o,c),f=await this.core.crypto.encode(s,l),y=as[o].req;return this.core.history.set(s,l),this.core.relayer.publish(s,f,y),l.id},this.sendResult=async(s,o,c)=>{const l=Hu(s,c),f=await this.core.crypto.encode(o,l),y=await this.core.history.get(o,s),p=as[y.request.method].res;await this.core.relayer.publish(o,f,p),await this.core.history.resolve(l)},this.sendError=async(s,o,c)=>{const l=Qo(s,c),f=await this.core.crypto.encode(o,l),y=await this.core.history.get(o,s),p=as[y.request.method]?as[y.request.method].res:as.unregistered_method.res;await this.core.relayer.publish(o,f,p),await this.core.history.resolve(l)},this.deletePairing=async(s,o)=>{await this.core.relayer.unsubscribe(s),await Promise.all([this.pairings.delete(s,Nt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(s),o?Promise.resolve():this.core.expirer.del(s)])},this.cleanup=async()=>{const s=this.pairings.getAll().filter(o=>An(o.expiry));await Promise.all(s.map(o=>this.deletePairing(o.topic)))},this.onRelayEventRequest=s=>{const{topic:o,payload:c}=s,l=c.method;if(this.pairings.keys.includes(o))switch(l){case"wc_pairingPing":return this.onPairingPingRequest(o,c);case"wc_pairingDelete":return this.onPairingDeleteRequest(o,c);default:return this.onUnknownRpcMethodRequest(o,c)}},this.onRelayEventResponse=async s=>{const{topic:o,payload:c}=s,l=(await this.core.history.get(o,c.id)).request.method;if(this.pairings.keys.includes(o))switch(l){case"wc_pairingPing":return this.onPairingPingResponse(o,c);default:return this.onUnknownRpcMethodResponse(l)}},this.onPairingPingRequest=async(s,o)=>{const{id:c}=o;try{this.isValidPing({topic:s}),await this.sendResult(c,s,!0),this.events.emit("pairing_ping",{id:c,topic:s})}catch(l){await this.sendError(c,s,l),this.logger.error(l)}},this.onPairingPingResponse=(s,o)=>{const{id:c}=o;setTimeout(()=>{_n(o)?this.events.emit(zt("pairing_ping",c),{}):Vr(o)&&this.events.emit(zt("pairing_ping",c),{error:o.error})},500)},this.onPairingDeleteRequest=async(s,o)=>{const{id:c}=o;try{this.isValidDisconnect({topic:s}),await this.deletePairing(s),this.events.emit("pairing_delete",{id:c,topic:s})}catch(l){await this.sendError(c,s,l),this.logger.error(l)}},this.onUnknownRpcMethodRequest=async(s,o)=>{const{id:c,method:l}=o;try{if(this.registeredMethods.includes(l))return;const f=Nt("WC_METHOD_UNSUPPORTED",l);await this.sendError(c,s,f),this.logger.error(f)}catch(f){await this.sendError(c,s,f),this.logger.error(f)}},this.onUnknownRpcMethodResponse=s=>{this.registeredMethods.includes(s)||this.logger.error(Nt("WC_METHOD_UNSUPPORTED",s))},this.isValidPair=s=>{if(!yr(s)){const{message:o}=he("MISSING_OR_INVALID",`pair() params: ${s}`);throw new Error(o)}if(!c3(s.uri)){const{message:o}=he("MISSING_OR_INVALID",`pair() uri: ${s.uri}`);throw new Error(o)}},this.isValidPing=async s=>{if(!yr(s)){const{message:c}=he("MISSING_OR_INVALID",`ping() params: ${s}`);throw new Error(c)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidDisconnect=async s=>{if(!yr(s)){const{message:c}=he("MISSING_OR_INVALID",`disconnect() params: ${s}`);throw new Error(c)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidPairingTopic=async s=>{if(!Gt(s,!1)){const{message:o}=he("MISSING_OR_INVALID",`pairing topic should be a string: ${s}`);throw new Error(o)}if(!this.pairings.keys.includes(s)){const{message:o}=he("NO_MATCHING_KEY",`pairing topic doesn't exist: ${s}`);throw new Error(o)}if(An(this.pairings.get(s).expiry)){await this.deletePairing(s);const{message:o}=he("EXPIRED",`pairing topic: ${s}`);throw new Error(o)}},this.core=e,this.logger=Ze.generateChildLogger(t,this.name),this.pairings=new ta(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Ze.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=he("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Pt.message,async e=>{const{topic:t,message:s}=e;if(this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(s)))return;const o=await this.core.crypto.decode(t,s);Ku(o)?(this.core.history.set(t,o),this.onRelayEventRequest({topic:t,payload:o})):Zo(o)&&(await this.core.history.resolve(o),this.onRelayEventResponse({topic:t,payload:o}))})}registerExpirerEvents(){this.core.expirer.on(jr.expired,async e=>{const{topic:t}=op(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit("pairing_expire",{topic:t}))})}}class $5 extends e2{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.records=new Map,this.events=new br,this.name=h5,this.version=l5,this.cached=[],this.initialized=!1,this.storagePrefix=Tn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.records.set(s.id,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(s,o,c)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:s,request:o,chainId:c}),this.records.has(o.id))return;const l={id:o.id,topic:s,request:{method:o.method,params:o.params||null},chainId:c};this.records.set(l.id,l),this.events.emit(Zr.created,l)},this.resolve=async s=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:s}),!this.records.has(s.id))return;const o=await this.getRecord(s.id);typeof o.response>"u"&&(o.response=Vr(s)?{error:s.error}:{result:s.result},this.records.set(o.id,o),this.events.emit(Zr.updated,o))},this.get=async(s,o)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:s,id:o}),await this.getRecord(o)),this.delete=(s,o)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:o}),this.values.forEach(c=>{if(c.topic===s){if(typeof o<"u"&&c.id!==o)return;this.records.delete(c.id),this.events.emit(Zr.deleted,c)}})},this.exists=async(s,o)=>(this.isInitialized(),this.records.has(o)?(await this.getRecord(o)).topic===s:!1),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=Ze.generateChildLogger(t,this.name)}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const s={topic:t.topic,request:Xo(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(s)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:s}=he("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Zr.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:t}=he("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Zr.created,e=>{const t=Zr.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(Zr.updated,e=>{const t=Zr.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(Zr.deleted,e=>{const t=Zr.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=he("NOT_INITIALIZED",this.name);throw new Error(e)}}}class F5 extends o2{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.expirations=new Map,this.events=new br,this.name=f5,this.version=d5,this.cached=[],this.initialized=!1,this.storagePrefix=Tn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.expirations.set(s.target,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=s=>{try{const o=this.formatTarget(s);return typeof this.getExpiration(o)<"u"}catch{return!1}},this.set=(s,o)=>{this.isInitialized();const c=this.formatTarget(s),l={target:c,expiry:o};this.expirations.set(c,l),this.checkExpiry(c,l),this.events.emit(jr.created,{target:c,expiration:l})},this.get=s=>{this.isInitialized();const o=this.formatTarget(s);return this.getExpiration(o)},this.del=s=>{if(this.isInitialized(),this.has(s)){const o=this.formatTarget(s),c=this.getExpiration(o);this.expirations.delete(o),this.events.emit(jr.deleted,{target:o,expiration:c})}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=Ze.generateChildLogger(t,this.name)}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return qE(e);if(typeof e=="number")return zE(e);const{message:t}=he("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(jr.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:t}=he("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:s}=he("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}return t}checkExpiry(e,t){const{expiry:s}=t;_e.toMiliseconds(s)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(jr.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(Ds.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(jr.created,e=>{const t=jr.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(jr.expired,e=>{const t=jr.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(jr.deleted,e=>{const t=jr.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=he("NOT_INITIALIZED",this.name);throw new Error(e)}}}class U5 extends a2{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.name=Lc,this.initialized=!1,this.init=async s=>{tp()||!Uu()||(this.verifyUrl=s?.verifyUrl||rd,await this.createIframe())},this.register=async s=>{var o;if(this.initialized||await this.init(),!!this.iframe)try{(o=this.iframe.contentWindow)==null||o.postMessage(s.attestationId,this.verifyUrl),this.logger.info(`postMessage sent: ${s.attestationId} ${this.verifyUrl}`)}catch{}},this.resolve=async s=>{var o;if(this.isDevEnv)return"";this.logger.info(`resolving attestation: ${s.attestationId}`);const c=this.startAbortTimer(_e.FIVE_SECONDS),l=await fetch(`${this.verifyUrl}/attestation/${s.attestationId}`,{signal:this.abortController.signal});return clearTimeout(c),l.status===200?(o=await l.json())==null?void 0:o.origin:""},this.createIframe=async()=>{try{await Promise.race([new Promise((s,o)=>{if(document.getElementById(Lc))return s();const c=document.createElement("iframe");c.setAttribute("id",Lc),c.setAttribute("src",`${this.verifyUrl}/${this.projectId}`),c.style.display="none",c.addEventListener("load",()=>{this.initialized=!0,s()}),c.addEventListener("error",l=>{o(l)}),document.body.append(c),this.iframe=c}),new Promise(s=>{setTimeout(()=>s("iframe load timeout"),_e.toMiliseconds(_e.ONE_SECOND/2))})])}catch(s){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(s)}},this.logger=Ze.generateChildLogger(t,this.name),this.verifyUrl=rd,this.abortController=new AbortController,this.isDevEnv=Fu()&&process.env.IS_VITEST}get context(){return Ze.getLoggerContext(this.logger)}startAbortTimer(e){return setTimeout(()=>this.abortController.abort(),_e.toMiliseconds(e))}}var j5=Object.defineProperty,hd=Object.getOwnPropertySymbols,L5=Object.prototype.hasOwnProperty,M5=Object.prototype.propertyIsEnumerable,ld=(n,e,t)=>e in n?j5(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,fd=(n,e)=>{for(var t in e||(e={}))L5.call(e,t)&&ld(n,t,e[t]);if(hd)for(var t of hd(e))M5.call(e,t)&&ld(n,t,e[t]);return n};let B5=class Kp extends Z6{constructor(e){super(e),this.protocol=qp,this.version=BS,this.name=Vu,this.events=new br,this.initialized=!1,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||Hp;const t=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:Ze.pino(Ze.getDefaultLoggerOptions({level:e?.logger||qS.logger}));this.logger=Ze.generateChildLogger(t,this.name),this.heartbeat=new Ds.HeartBeat,this.crypto=new g5(this,this.logger,e?.keychain),this.history=new $5(this,this.logger),this.expirer=new F5(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new n6(fd(fd({},zS),e?.storageOptions)),this.relayer=new C5({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new N5(this,this.logger),this.verify=new U5(this.projectId||"",this.logger)}static async init(e){const t=new Kp(e);await t.initialize();const s=await t.crypto.getClientId();return await t.storage.setItem(i5,s),t}get context(){return Ze.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}};const q5=B5,Vp="wc",kp=2,Gp="client",ku=`${Vp}@${kp}:${Gp}:`,Bc={name:Gp,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},z5="WALLETCONNECT_DEEPLINK_CHOICE",H5="proposal",Wp="Proposal expired",K5="session",Ao=_e.SEVEN_DAYS,V5="engine",us={wc_sessionPropose:{req:{ttl:_e.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1104},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1106},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:_e.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:_e.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1112},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:_e.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:_e.THIRTY_SECONDS,prompt:!1,tag:1115}}},qc={min:_e.FIVE_MINUTES,max:_e.SEVEN_DAYS},k5="request",G5=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var W5=Object.defineProperty,Y5=Object.defineProperties,J5=Object.getOwnPropertyDescriptors,dd=Object.getOwnPropertySymbols,X5=Object.prototype.hasOwnProperty,Q5=Object.prototype.propertyIsEnumerable,pd=(n,e,t)=>e in n?W5(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ur=(n,e)=>{for(var t in e||(e={}))X5.call(e,t)&&pd(n,t,e[t]);if(dd)for(var t of dd(e))Q5.call(e,t)&&pd(n,t,e[t]);return n},zc=(n,e)=>Y5(n,J5(e));class Z5 extends u2{constructor(e){super(e),this.name=V5,this.events=new br,this.initialized=!1,this.ignoredPayloadTypes=[ni],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(us)}),this.initialized=!0)},this.connect=async t=>{this.isInitialized();const s=zc(Ur({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(s);const{pairingTopic:o,requiredNamespaces:c,optionalNamespaces:l,sessionProperties:f,relays:y}=s;let p=o,E,A=!1;if(p&&(A=this.client.core.pairing.pairings.get(p).active),!p||!A){const{topic:j,uri:x}=await this.client.core.pairing.create();p=j,E=x}const S=await this.client.core.crypto.generateKeyPair(),T=Ur({requiredNamespaces:c,optionalNamespaces:l,relays:y??[{protocol:zp}],proposer:{publicKey:S,metadata:this.client.metadata}},f&&{sessionProperties:f}),{reject:R,resolve:z,done:K}=Oi(_e.FIVE_MINUTES,Wp);if(this.events.once(zt("session_connect"),async({error:j,session:x})=>{if(j)R(j);else if(x){x.self.publicKey=S;const C=zc(Ur({},x),{requiredNamespaces:x.requiredNamespaces,optionalNamespaces:x.optionalNamespaces});await this.client.session.set(x.topic,C),await this.setExpiry(x.topic,x.expiry),p&&await this.client.core.pairing.updateMetadata({topic:p,metadata:x.peer.metadata}),z(C)}}),!p){const{message:j}=he("NO_MATCHING_KEY",`connect() pairing topic: ${p}`);throw new Error(j)}const ie=await this.sendRequest(p,"wc_sessionPropose",T),$=tn(_e.FIVE_MINUTES);return await this.setProposal(ie,Ur({id:ie,expiry:$},T)),{uri:E,approval:K}},this.pair=async t=>(this.isInitialized(),await this.client.core.pairing.pair(t)),this.approve=async t=>{this.isInitialized(),await this.isValidApprove(t);const{id:s,relayProtocol:o,namespaces:c,sessionProperties:l}=t,f=this.client.proposal.get(s);let{pairingTopic:y,proposer:p,requiredNamespaces:E,optionalNamespaces:A}=f;y=y||"",Ai(E)||(E=n3(c,"approve()"));const S=await this.client.core.crypto.generateKeyPair(),T=p.publicKey,R=await this.client.core.crypto.generateSharedKey(S,T);y&&s&&(await this.client.core.pairing.updateMetadata({topic:y,metadata:p.metadata}),await this.sendResult(s,y,{relay:{protocol:o??"irn"},responderPublicKey:S}),await this.client.proposal.delete(s,Nt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:y}));const z=Ur({relay:{protocol:o??"irn"},namespaces:c,requiredNamespaces:E,optionalNamespaces:A,pairingTopic:y,controller:{publicKey:S,metadata:this.client.metadata},expiry:tn(Ao)},l&&{sessionProperties:l});await this.client.core.relayer.subscribe(R),await this.sendRequest(R,"wc_sessionSettle",z);const K=zc(Ur({},z),{topic:R,pairingTopic:y,acknowledged:!1,self:z.controller,peer:{publicKey:p.publicKey,metadata:p.metadata},controller:S});return await this.client.session.set(R,K),await this.setExpiry(R,tn(Ao)),{topic:R,acknowledged:()=>new Promise(ie=>setTimeout(()=>ie(this.client.session.get(R)),500))}},this.reject=async t=>{this.isInitialized(),await this.isValidReject(t);const{id:s,reason:o}=t,{pairingTopic:c}=this.client.proposal.get(s);c&&(await this.sendError(s,c,o),await this.client.proposal.delete(s,Nt("USER_DISCONNECTED")))},this.update=async t=>{this.isInitialized(),await this.isValidUpdate(t);const{topic:s,namespaces:o}=t,c=await this.sendRequest(s,"wc_sessionUpdate",{namespaces:o}),{done:l,resolve:f,reject:y}=Oi();return this.events.once(zt("session_update",c),({error:p})=>{p?y(p):f()}),await this.client.session.update(s,{namespaces:o}),{acknowledged:l}},this.extend=async t=>{this.isInitialized(),await this.isValidExtend(t);const{topic:s}=t,o=await this.sendRequest(s,"wc_sessionExtend",{}),{done:c,resolve:l,reject:f}=Oi();return this.events.once(zt("session_extend",o),({error:y})=>{y?f(y):l()}),await this.setExpiry(s,tn(Ao)),{acknowledged:c}},this.request=async t=>{this.isInitialized(),await this.isValidRequest(t);const{chainId:s,request:o,topic:c,expiry:l}=t,f=await this.sendRequest(c,"wc_sessionRequest",{request:o,chainId:s},l),{done:y,resolve:p,reject:E}=Oi(l);this.events.once(zt("session_request",f),({error:S,result:T})=>{S?E(S):p(T)}),this.client.events.emit("session_request_sent",{topic:c,request:o,chainId:s,id:f});const A=await this.client.core.storage.getItem(z5);return HE({id:f,topic:c,wcDeepLink:A}),await y()},this.respond=async t=>{this.isInitialized(),await this.isValidRespond(t);const{topic:s,response:o}=t,{id:c}=o;_n(o)?await this.sendResult(c,s,o.result):Vr(o)&&await this.sendError(c,s,o.error),this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0})},this.ping=async t=>{this.isInitialized(),await this.isValidPing(t);const{topic:s}=t;if(this.client.session.keys.includes(s)){const o=await this.sendRequest(s,"wc_sessionPing",{}),{done:c,resolve:l,reject:f}=Oi();this.events.once(zt("session_ping",o),({error:y})=>{y?f(y):l()}),await c()}else this.client.core.pairing.pairings.keys.includes(s)&&await this.client.core.pairing.ping({topic:s})},this.emit=async t=>{this.isInitialized(),await this.isValidEmit(t);const{topic:s,event:o,chainId:c}=t;await this.sendRequest(s,"wc_sessionEvent",{event:o,chainId:c})},this.disconnect=async t=>{this.isInitialized(),await this.isValidDisconnect(t);const{topic:s}=t;if(this.client.session.keys.includes(s)){const o=zu().toString();let c;const l=f=>{f?.id.toString()===o&&(this.client.core.relayer.events.removeListener(Pt.message_ack,l),c())};await Promise.all([new Promise(f=>{c=f,this.client.core.relayer.on(Pt.message_ack,l)}),this.sendRequest(s,"wc_sessionDelete",Nt("USER_DISCONNECTED"),void 0,o)]),await this.deleteSession(s)}else await this.client.core.pairing.disconnect({topic:s})},this.find=t=>(this.isInitialized(),this.client.session.getAll().filter(s=>o3(s,t))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async t=>{if(t.pairingTopic)try{const s=this.client.core.pairing.pairings.get(t.pairingTopic),o=this.client.core.pairing.pairings.getAll().filter(c=>{var l,f;return((l=c.peerMetadata)==null?void 0:l.url)&&((f=c.peerMetadata)==null?void 0:f.url)===t.peer.metadata.url&&c.topic&&c.topic!==s.topic});if(o.length===0)return;this.client.logger.info(`Cleaning up ${o.length} duplicate pairing(s)`),await Promise.all(o.map(c=>this.client.core.pairing.disconnect({topic:c.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(s){this.client.logger.error(s)}},this.deleteSession=async(t,s)=>{const{self:o}=this.client.session.get(t);await this.client.core.relayer.unsubscribe(t),this.client.session.delete(t,Nt("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(o.publicKey)&&await this.client.core.crypto.deleteKeyPair(o.publicKey),this.client.core.crypto.keychain.has(t)&&await this.client.core.crypto.deleteSymKey(t),s||this.client.core.expirer.del(t)},this.deleteProposal=async(t,s)=>{await Promise.all([this.client.proposal.delete(t,Nt("USER_DISCONNECTED")),s?Promise.resolve():this.client.core.expirer.del(t)])},this.deletePendingSessionRequest=async(t,s,o=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,s),o?Promise.resolve():this.client.core.expirer.del(t)])},this.setExpiry=async(t,s)=>{this.client.session.keys.includes(t)&&await this.client.session.update(t,{expiry:s}),this.client.core.expirer.set(t,s)},this.setProposal=async(t,s)=>{await this.client.proposal.set(t,s),this.client.core.expirer.set(t,s.expiry)},this.setPendingSessionRequest=async t=>{const s=us.wc_sessionRequest.req.ttl,{id:o,topic:c,params:l}=t;await this.client.pendingRequest.set(o,{id:o,topic:c,params:l}),s&&this.client.core.expirer.set(o,tn(s))},this.sendRequest=async(t,s,o,c,l)=>{const f=Xo(s,o);if(Uu()&&G5.includes(s)){const E=Ci(JSON.stringify(f));await this.client.core.verify.register({attestationId:E})}const y=await this.client.core.crypto.encode(t,f),p=us[s].req;return c&&(p.ttl=c),l&&(p.id=l),this.client.core.history.set(t,f),this.client.core.relayer.publish(t,y,p),f.id},this.sendResult=async(t,s,o)=>{const c=Hu(t,o),l=await this.client.core.crypto.encode(s,c),f=await this.client.core.history.get(s,t),y=us[f.request.method].res;this.client.core.relayer.publish(s,l,y),await this.client.core.history.resolve(c)},this.sendError=async(t,s,o)=>{const c=Qo(t,o),l=await this.client.core.crypto.encode(s,c),f=await this.client.core.history.get(s,t),y=us[f.request.method].res;this.client.core.relayer.publish(s,l,y),await this.client.core.history.resolve(c)},this.cleanup=async()=>{const t=[],s=[];this.client.session.getAll().forEach(o=>{An(o.expiry)&&t.push(o.topic)}),this.client.proposal.getAll().forEach(o=>{An(o.expiry)&&s.push(o.id)}),await Promise.all([...t.map(o=>this.deleteSession(o)),...s.map(o=>this.deleteProposal(o))])},this.onRelayEventRequest=t=>{const{topic:s,payload:o}=t,c=o.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeRequest(s,o);case"wc_sessionSettle":return this.onSessionSettleRequest(s,o);case"wc_sessionUpdate":return this.onSessionUpdateRequest(s,o);case"wc_sessionExtend":return this.onSessionExtendRequest(s,o);case"wc_sessionPing":return this.onSessionPingRequest(s,o);case"wc_sessionDelete":return this.onSessionDeleteRequest(s,o);case"wc_sessionRequest":return this.onSessionRequest(s,o);case"wc_sessionEvent":return this.onSessionEventRequest(s,o);default:return this.client.logger.info(`Unsupported request method ${c}`)}},this.onRelayEventResponse=async t=>{const{topic:s,payload:o}=t,c=(await this.client.core.history.get(s,o.id)).request.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeResponse(s,o);case"wc_sessionSettle":return this.onSessionSettleResponse(s,o);case"wc_sessionUpdate":return this.onSessionUpdateResponse(s,o);case"wc_sessionExtend":return this.onSessionExtendResponse(s,o);case"wc_sessionPing":return this.onSessionPingResponse(s,o);case"wc_sessionRequest":return this.onSessionRequestResponse(s,o);default:return this.client.logger.info(`Unsupported response method ${c}`)}},this.onRelayEventUnknownPayload=t=>{const{topic:s}=t,{message:o}=he("MISSING_OR_INVALID",`Decoded payload on topic ${s} is not identifiable as a JSON-RPC request or a response.`);throw new Error(o)},this.onSessionProposeRequest=async(t,s)=>{const{params:o,id:c}=s;try{this.isValidConnect(Ur({},s.params));const l=tn(_e.FIVE_MINUTES),f=Ur({id:c,pairingTopic:t,expiry:l},o);await this.setProposal(c,f);const y=Ci(JSON.stringify(s)),p=await this.getVerifyContext(y,f.proposer.metadata);this.client.events.emit("session_proposal",{id:c,params:f,verifyContext:p})}catch(l){await this.sendError(c,t,l),this.client.logger.error(l)}},this.onSessionProposeResponse=async(t,s)=>{const{id:o}=s;if(_n(s)){const{result:c}=s;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:c});const l=this.client.proposal.get(o);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:l});const f=l.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:f});const y=c.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:y});const p=await this.client.core.crypto.generateSharedKey(f,y);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:p});const E=await this.client.core.relayer.subscribe(p);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:E}),await this.client.core.pairing.activate({topic:t})}else Vr(s)&&(await this.client.proposal.delete(o,Nt("USER_DISCONNECTED")),this.events.emit(zt("session_connect"),{error:s.error}))},this.onSessionSettleRequest=async(t,s)=>{const{id:o,params:c}=s;try{this.isValidSessionSettleRequest(c);const{relay:l,controller:f,expiry:y,namespaces:p,requiredNamespaces:E,optionalNamespaces:A,sessionProperties:S,pairingTopic:T}=s.params,R=Ur({topic:t,relay:l,expiry:y,namespaces:p,acknowledged:!0,pairingTopic:T,requiredNamespaces:E,optionalNamespaces:A,controller:f.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:f.publicKey,metadata:f.metadata}},S&&{sessionProperties:S});await this.sendResult(s.id,t,!0),this.events.emit(zt("session_connect"),{session:R}),this.cleanupDuplicatePairings(R)}catch(l){await this.sendError(o,t,l),this.client.logger.error(l)}},this.onSessionSettleResponse=async(t,s)=>{const{id:o}=s;_n(s)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(zt("session_approve",o),{})):Vr(s)&&(await this.client.session.delete(t,Nt("USER_DISCONNECTED")),this.events.emit(zt("session_approve",o),{error:s.error}))},this.onSessionUpdateRequest=async(t,s)=>{const{params:o,id:c}=s;try{this.isValidUpdate(Ur({topic:t},o)),await this.client.session.update(t,{namespaces:o.namespaces}),await this.sendResult(c,t,!0),this.client.events.emit("session_update",{id:c,topic:t,params:o})}catch(l){await this.sendError(c,t,l),this.client.logger.error(l)}},this.onSessionUpdateResponse=(t,s)=>{const{id:o}=s;_n(s)?this.events.emit(zt("session_update",o),{}):Vr(s)&&this.events.emit(zt("session_update",o),{error:s.error})},this.onSessionExtendRequest=async(t,s)=>{const{id:o}=s;try{this.isValidExtend({topic:t}),await this.setExpiry(t,tn(Ao)),await this.sendResult(o,t,!0),this.client.events.emit("session_extend",{id:o,topic:t})}catch(c){await this.sendError(o,t,c),this.client.logger.error(c)}},this.onSessionExtendResponse=(t,s)=>{const{id:o}=s;_n(s)?this.events.emit(zt("session_extend",o),{}):Vr(s)&&this.events.emit(zt("session_extend",o),{error:s.error})},this.onSessionPingRequest=async(t,s)=>{const{id:o}=s;try{this.isValidPing({topic:t}),await this.sendResult(o,t,!0),this.client.events.emit("session_ping",{id:o,topic:t})}catch(c){await this.sendError(o,t,c),this.client.logger.error(c)}},this.onSessionPingResponse=(t,s)=>{const{id:o}=s;setTimeout(()=>{_n(s)?this.events.emit(zt("session_ping",o),{}):Vr(s)&&this.events.emit(zt("session_ping",o),{error:s.error})},500)},this.onSessionDeleteRequest=async(t,s)=>{const{id:o}=s;try{this.isValidDisconnect({topic:t,reason:s.params}),await Promise.all([new Promise(c=>{this.client.core.relayer.once(Pt.publish,async()=>{c(await this.deleteSession(t))})}),this.sendResult(o,t,!0)]),this.client.events.emit("session_delete",{id:o,topic:t})}catch(c){this.client.logger.error(c)}},this.onSessionRequest=async(t,s)=>{const{id:o,params:c}=s;try{this.isValidRequest(Ur({topic:t},c)),await this.setPendingSessionRequest({id:o,topic:t,params:c});const l=Ci(JSON.stringify(s)),f=this.client.session.get(t),y=await this.getVerifyContext(l,f.peer.metadata);this.client.events.emit("session_request",{id:o,topic:t,params:c,verifyContext:y})}catch(l){await this.sendError(o,t,l),this.client.logger.error(l)}},this.onSessionRequestResponse=(t,s)=>{const{id:o}=s;_n(s)?this.events.emit(zt("session_request",o),{result:s.result}):Vr(s)&&this.events.emit(zt("session_request",o),{error:s.error})},this.onSessionEventRequest=async(t,s)=>{const{id:o,params:c}=s;try{this.isValidEmit(Ur({topic:t},c)),this.client.events.emit("session_event",{id:o,topic:t,params:c})}catch(l){await this.sendError(o,t,l),this.client.logger.error(l)}},this.isValidConnect=async t=>{if(!yr(t)){const{message:y}=he("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(y)}const{pairingTopic:s,requiredNamespaces:o,optionalNamespaces:c,sessionProperties:l,relays:f}=t;if(ar(s)||await this.isValidPairingTopic(s),!v3(f,!0)){const{message:y}=he("MISSING_OR_INVALID",`connect() relays: ${f}`);throw new Error(y)}!ar(o)&&Ai(o)!==0&&this.validateNamespaces(o,"requiredNamespaces"),!ar(c)&&Ai(c)!==0&&this.validateNamespaces(c,"optionalNamespaces"),ar(l)||this.validateSessionProps(l,"sessionProperties")},this.validateNamespaces=(t,s)=>{const o=_3(t,"connect()",s);if(o)throw new Error(o.message)},this.isValidApprove=async t=>{if(!yr(t))throw new Error(he("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:s,namespaces:o,relayProtocol:c,sessionProperties:l}=t;await this.isValidProposalId(s);const f=this.client.proposal.get(s),y=Fo(o,"approve()");if(y)throw new Error(y.message);const p=xf(f.requiredNamespaces,o,"approve()");if(p)throw new Error(p.message);if(!Gt(c,!0)){const{message:E}=he("MISSING_OR_INVALID",`approve() relayProtocol: ${c}`);throw new Error(E)}ar(l)||this.validateSessionProps(l,"sessionProperties")},this.isValidReject=async t=>{if(!yr(t)){const{message:c}=he("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(c)}const{id:s,reason:o}=t;if(await this.isValidProposalId(s),!m3(o)){const{message:c}=he("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(o)}`);throw new Error(c)}},this.isValidSessionSettleRequest=t=>{if(!yr(t)){const{message:p}=he("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(p)}const{relay:s,controller:o,namespaces:c,expiry:l}=t;if(!up(s)){const{message:p}=he("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(p)}const f=l3(o,"onSessionSettleRequest()");if(f)throw new Error(f.message);const y=Fo(c,"onSessionSettleRequest()");if(y)throw new Error(y.message);if(An(l)){const{message:p}=he("EXPIRED","onSessionSettleRequest()");throw new Error(p)}},this.isValidUpdate=async t=>{if(!yr(t)){const{message:y}=he("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(y)}const{topic:s,namespaces:o}=t;await this.isValidSessionTopic(s);const c=this.client.session.get(s),l=Fo(o,"update()");if(l)throw new Error(l.message);const f=xf(c.requiredNamespaces,o,"update()");if(f)throw new Error(f.message)},this.isValidExtend=async t=>{if(!yr(t)){const{message:o}=he("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(o)}const{topic:s}=t;await this.isValidSessionTopic(s)},this.isValidRequest=async t=>{if(!yr(t)){const{message:y}=he("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(y)}const{topic:s,request:o,chainId:c,expiry:l}=t;await this.isValidSessionTopic(s);const{namespaces:f}=this.client.session.get(s);if(!Sf(f,c)){const{message:y}=he("MISSING_OR_INVALID",`request() chainId: ${c}`);throw new Error(y)}if(!w3(o)){const{message:y}=he("MISSING_OR_INVALID",`request() ${JSON.stringify(o)}`);throw new Error(y)}if(!S3(f,c,o.method)){const{message:y}=he("MISSING_OR_INVALID",`request() method: ${o.method}`);throw new Error(y)}if(l&&!P3(l,qc)){const{message:y}=he("MISSING_OR_INVALID",`request() expiry: ${l}. Expiry must be a number (in seconds) between ${qc.min} and ${qc.max}`);throw new Error(y)}},this.isValidRespond=async t=>{if(!yr(t)){const{message:c}=he("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(c)}const{topic:s,response:o}=t;if(await this.isValidSessionTopic(s),!E3(o)){const{message:c}=he("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(o)}`);throw new Error(c)}},this.isValidPing=async t=>{if(!yr(t)){const{message:o}=he("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(o)}const{topic:s}=t;await this.isValidSessionOrPairingTopic(s)},this.isValidEmit=async t=>{if(!yr(t)){const{message:f}=he("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(f)}const{topic:s,event:o,chainId:c}=t;await this.isValidSessionTopic(s);const{namespaces:l}=this.client.session.get(s);if(!Sf(l,c)){const{message:f}=he("MISSING_OR_INVALID",`emit() chainId: ${c}`);throw new Error(f)}if(!D3(o)){const{message:f}=he("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(f)}if(!x3(l,c,o.name)){const{message:f}=he("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(f)}},this.isValidDisconnect=async t=>{if(!yr(t)){const{message:o}=he("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(o)}const{topic:s}=t;await this.isValidSessionOrPairingTopic(s)},this.getVerifyContext=async(t,s)=>{const o={verified:{verifyUrl:s.verifyUrl||"",validation:"UNKNOWN",origin:s.url||""}};try{const c=await this.client.core.verify.resolve({attestationId:t,verifyUrl:s.verifyUrl});c&&(o.verified.origin=c,o.verified.validation=c===s.url?"VALID":"INVALID")}catch(c){this.client.logger.error(c)}return this.client.logger.info(`Verify context: ${JSON.stringify(o)}`),o},this.validateSessionProps=(t,s)=>{Object.values(t).forEach(o=>{if(!Gt(o,!1)){const{message:c}=he("MISSING_OR_INVALID",`${s} must be in Record<string, string> format. Received: ${JSON.stringify(o)}`);throw new Error(c)}})}}isInitialized(){if(!this.initialized){const{message:e}=he("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.client.core.relayer.on(Pt.message,async e=>{const{topic:t,message:s}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(s)))return;const o=await this.client.core.crypto.decode(t,s);Ku(o)?(this.client.core.history.set(t,o),this.onRelayEventRequest({topic:t,payload:o})):Zo(o)?(await this.client.core.history.resolve(o),this.onRelayEventResponse({topic:t,payload:o})):this.onRelayEventUnknownPayload({topic:t,payload:o})})}registerExpirerEvents(){this.client.core.expirer.on(jr.expired,async e=>{const{topic:t,id:s}=op(e.target);if(s&&this.client.pendingRequest.keys.includes(s))return await this.deletePendingSessionRequest(s,he("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession(t,!0),this.client.events.emit("session_expire",{topic:t})):s&&(await this.deleteProposal(s,!0),this.client.events.emit("proposal_expire",{id:s}))})}isValidPairingTopic(e){if(!Gt(e,!1)){const{message:t}=he("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=he("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(An(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=he("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!Gt(e,!1)){const{message:t}=he("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(!this.client.session.keys.includes(e)){const{message:t}=he("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(An(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:t}=he("EXPIRED",`session topic: ${e}`);throw new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Gt(e,!1)){const{message:t}=he("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}else{const{message:t}=he("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}async isValidProposalId(e){if(!b3(e)){const{message:t}=he("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=he("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(An(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:t}=he("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class ex extends ta{constructor(e,t){super(e,t,H5,ku),this.core=e,this.logger=t}}class tx extends ta{constructor(e,t){super(e,t,K5,ku),this.core=e,this.logger=t}}class rx extends ta{constructor(e,t){super(e,t,k5,ku,s=>s.id),this.core=e,this.logger=t}}class Gu extends c2{constructor(e){super(e),this.protocol=Vp,this.version=kp,this.name=Bc.name,this.events=new br,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.removeAllListeners=s=>this.events.removeAllListeners(s),this.connect=async s=>{try{return await this.engine.connect(s)}catch(o){throw this.logger.error(o.message),o}},this.pair=async s=>{try{return await this.engine.pair(s)}catch(o){throw this.logger.error(o.message),o}},this.approve=async s=>{try{return await this.engine.approve(s)}catch(o){throw this.logger.error(o.message),o}},this.reject=async s=>{try{return await this.engine.reject(s)}catch(o){throw this.logger.error(o.message),o}},this.update=async s=>{try{return await this.engine.update(s)}catch(o){throw this.logger.error(o.message),o}},this.extend=async s=>{try{return await this.engine.extend(s)}catch(o){throw this.logger.error(o.message),o}},this.request=async s=>{try{return await this.engine.request(s)}catch(o){throw this.logger.error(o.message),o}},this.respond=async s=>{try{return await this.engine.respond(s)}catch(o){throw this.logger.error(o.message),o}},this.ping=async s=>{try{return await this.engine.ping(s)}catch(o){throw this.logger.error(o.message),o}},this.emit=async s=>{try{return await this.engine.emit(s)}catch(o){throw this.logger.error(o.message),o}},this.disconnect=async s=>{try{return await this.engine.disconnect(s)}catch(o){throw this.logger.error(o.message),o}},this.find=s=>{try{return this.engine.find(s)}catch(o){throw this.logger.error(o.message),o}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(s){throw this.logger.error(s.message),s}},this.name=e?.name||Bc.name,this.metadata=e?.metadata||UE();const t=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:Ze.pino(Ze.getDefaultLoggerOptions({level:e?.logger||Bc.logger}));this.core=e?.core||new q5(e),this.logger=Ze.generateChildLogger(t,this.name),this.session=new tx(this.core,this.logger),this.proposal=new ex(this.core,this.logger),this.pendingRequest=new rx(this.core,this.logger),this.engine=new Z5(this)}static async init(e){const t=new Gu(e);return await t.initialize(),t}get context(){return Ze.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}var wu={exports:{}};(function(n,e){var t=typeof self<"u"?self:_r,s=function(){function c(){this.fetch=!1,this.DOMException=t.DOMException}return c.prototype=t,new c}();(function(c){(function(l){var f={searchParams:"URLSearchParams"in c,iterable:"Symbol"in c&&"iterator"in Symbol,blob:"FileReader"in c&&"Blob"in c&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in c,arrayBuffer:"ArrayBuffer"in c};function y(m){return m&&DataView.prototype.isPrototypeOf(m)}if(f.arrayBuffer)var p=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],E=ArrayBuffer.isView||function(m){return m&&p.indexOf(Object.prototype.toString.call(m))>-1};function A(m){if(typeof m!="string"&&(m=String(m)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(m))throw new TypeError("Invalid character in header field name");return m.toLowerCase()}function S(m){return typeof m!="string"&&(m=String(m)),m}function T(m){var O={next:function(){var ee=m.shift();return{done:ee===void 0,value:ee}}};return f.iterable&&(O[Symbol.iterator]=function(){return O}),O}function R(m){this.map={},m instanceof R?m.forEach(function(O,ee){this.append(ee,O)},this):Array.isArray(m)?m.forEach(function(O){this.append(O[0],O[1])},this):m&&Object.getOwnPropertyNames(m).forEach(function(O){this.append(O,m[O])},this)}R.prototype.append=function(m,O){m=A(m),O=S(O);var ee=this.map[m];this.map[m]=ee?ee+", "+O:O},R.prototype.delete=function(m){delete this.map[A(m)]},R.prototype.get=function(m){return m=A(m),this.has(m)?this.map[m]:null},R.prototype.has=function(m){return this.map.hasOwnProperty(A(m))},R.prototype.set=function(m,O){this.map[A(m)]=S(O)},R.prototype.forEach=function(m,O){for(var ee in this.map)this.map.hasOwnProperty(ee)&&m.call(O,this.map[ee],ee,this)},R.prototype.keys=function(){var m=[];return this.forEach(function(O,ee){m.push(ee)}),T(m)},R.prototype.values=function(){var m=[];return this.forEach(function(O){m.push(O)}),T(m)},R.prototype.entries=function(){var m=[];return this.forEach(function(O,ee){m.push([ee,O])}),T(m)},f.iterable&&(R.prototype[Symbol.iterator]=R.prototype.entries);function z(m){if(m.bodyUsed)return Promise.reject(new TypeError("Already read"));m.bodyUsed=!0}function K(m){return new Promise(function(O,ee){m.onload=function(){O(m.result)},m.onerror=function(){ee(m.error)}})}function ie(m){var O=new FileReader,ee=K(O);return O.readAsArrayBuffer(m),ee}function $(m){var O=new FileReader,ee=K(O);return O.readAsText(m),ee}function j(m){for(var O=new Uint8Array(m),ee=new Array(O.length),X=0;X<O.length;X++)ee[X]=String.fromCharCode(O[X]);return ee.join("")}function x(m){if(m.slice)return m.slice(0);var O=new Uint8Array(m.byteLength);return O.set(new Uint8Array(m)),O.buffer}function C(){return this.bodyUsed=!1,this._initBody=function(m){this._bodyInit=m,m?typeof m=="string"?this._bodyText=m:f.blob&&Blob.prototype.isPrototypeOf(m)?this._bodyBlob=m:f.formData&&FormData.prototype.isPrototypeOf(m)?this._bodyFormData=m:f.searchParams&&URLSearchParams.prototype.isPrototypeOf(m)?this._bodyText=m.toString():f.arrayBuffer&&f.blob&&y(m)?(this._bodyArrayBuffer=x(m.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):f.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(m)||E(m))?this._bodyArrayBuffer=x(m):this._bodyText=m=Object.prototype.toString.call(m):this._bodyText="",this.headers.get("content-type")||(typeof m=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):f.searchParams&&URLSearchParams.prototype.isPrototypeOf(m)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},f.blob&&(this.blob=function(){var m=z(this);if(m)return m;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?z(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(ie)}),this.text=function(){var m=z(this);if(m)return m;if(this._bodyBlob)return $(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(j(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},f.formData&&(this.formData=function(){return this.text().then(G)}),this.json=function(){return this.text().then(JSON.parse)},this}var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function u(m){var O=m.toUpperCase();return w.indexOf(O)>-1?O:m}function b(m,O){O=O||{};var ee=O.body;if(m instanceof b){if(m.bodyUsed)throw new TypeError("Already read");this.url=m.url,this.credentials=m.credentials,O.headers||(this.headers=new R(m.headers)),this.method=m.method,this.mode=m.mode,this.signal=m.signal,!ee&&m._bodyInit!=null&&(ee=m._bodyInit,m.bodyUsed=!0)}else this.url=String(m);if(this.credentials=O.credentials||this.credentials||"same-origin",(O.headers||!this.headers)&&(this.headers=new R(O.headers)),this.method=u(O.method||this.method||"GET"),this.mode=O.mode||this.mode||null,this.signal=O.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&ee)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(ee)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})};function G(m){var O=new FormData;return m.trim().split("&").forEach(function(ee){if(ee){var X=ee.split("="),V=X.shift().replace(/\+/g," "),k=X.join("=").replace(/\+/g," ");O.append(decodeURIComponent(V),decodeURIComponent(k))}}),O}function W(m){var O=new R,ee=m.replace(/\r?\n[\t ]+/g," ");return ee.split(/\r?\n/).forEach(function(X){var V=X.split(":"),k=V.shift().trim();if(k){var J=V.join(":").trim();O.append(k,J)}}),O}C.call(b.prototype);function se(m,O){O||(O={}),this.type="default",this.status=O.status===void 0?200:O.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in O?O.statusText:"OK",this.headers=new R(O.headers),this.url=O.url||"",this._initBody(m)}C.call(se.prototype),se.prototype.clone=function(){return new se(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new R(this.headers),url:this.url})},se.error=function(){var m=new se(null,{status:0,statusText:""});return m.type="error",m};var ce=[301,302,303,307,308];se.redirect=function(m,O){if(ce.indexOf(O)===-1)throw new RangeError("Invalid status code");return new se(null,{status:O,headers:{location:m}})},l.DOMException=c.DOMException;try{new l.DOMException}catch{l.DOMException=function(O,ee){this.message=O,this.name=ee;var X=Error(O);this.stack=X.stack},l.DOMException.prototype=Object.create(Error.prototype),l.DOMException.prototype.constructor=l.DOMException}function de(m,O){return new Promise(function(ee,X){var V=new b(m,O);if(V.signal&&V.signal.aborted)return X(new l.DOMException("Aborted","AbortError"));var k=new XMLHttpRequest;function J(){k.abort()}k.onload=function(){var re={status:k.status,statusText:k.statusText,headers:W(k.getAllResponseHeaders()||"")};re.url="responseURL"in k?k.responseURL:re.headers.get("X-Request-URL");var me="response"in k?k.response:k.responseText;ee(new se(me,re))},k.onerror=function(){X(new TypeError("Network request failed"))},k.ontimeout=function(){X(new TypeError("Network request failed"))},k.onabort=function(){X(new l.DOMException("Aborted","AbortError"))},k.open(V.method,V.url,!0),V.credentials==="include"?k.withCredentials=!0:V.credentials==="omit"&&(k.withCredentials=!1),"responseType"in k&&f.blob&&(k.responseType="blob"),V.headers.forEach(function(re,me){k.setRequestHeader(me,re)}),V.signal&&(V.signal.addEventListener("abort",J),k.onreadystatechange=function(){k.readyState===4&&V.signal.removeEventListener("abort",J)}),k.send(typeof V._bodyInit>"u"?null:V._bodyInit)})}return de.polyfill=!0,c.fetch||(c.fetch=de,c.Headers=R,c.Request=b,c.Response=se),l.Headers=R,l.Request=b,l.Response=se,l.fetch=de,Object.defineProperty(l,"__esModule",{value:!0}),l})({})})(s),s.fetch.ponyfill=!0,delete s.fetch.polyfill;var o=s;e=o.fetch,e.default=o.fetch,e.fetch=o.fetch,e.Headers=o.Headers,e.Request=o.Request,e.Response=o.Response,n.exports=e})(wu,wu.exports);var nx=wu.exports,gd=Pd(nx);const ix={Accept:"application/json","Content-Type":"application/json"},sx="POST",yd={headers:ix,method:sx},_d=10;class si{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new br,this.isAvailable=!1,this.registering=!1,!kf(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e,t){this.isAvailable||await this.register();try{const s=_s(e),c=await(await gd(this.url,Object.assign(Object.assign({},yd),{body:s}))).json();this.onPayload({data:c})}catch(s){this.onError(e.id,s)}}async register(e=this.url){if(!kf(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((s,o)=>{this.events.once("register_error",c=>{this.resetMaxListeners(),o(c)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return o(new Error("HTTP connection is missing or invalid"));s()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const t=_s({id:1,jsonrpc:"2.0",method:"test",params:[]});await gd(e,Object.assign(Object.assign({},yd),{body:t}))}this.onOpen()}catch(t){const s=this.parseError(t);throw this.events.emit("register_error",s),this.onClose(),s}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?Mu(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const s=this.parseError(t),o=s.message||s.toString(),c=Qo(e,o);this.events.emit("payload",c)}parseError(e,t=this.url){return Sp(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>_d&&this.events.setMaxListeners(_d)}}const vd="error",ox="wss://relay.walletconnect.com",ax="wc",cx="universal_provider",bd=`${ax}@2:${cx}:`,ux="https://rpc.walletconnect.com/v1",$n={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var hs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Eu={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(n,e){(function(){var t,s="4.17.21",o=200,c="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",f="Invalid `variable` option passed into `_.template`",y="__lodash_hash_undefined__",p=500,E="__lodash_placeholder__",A=1,S=2,T=4,R=1,z=2,K=1,ie=2,$=4,j=8,x=16,C=32,w=64,u=128,b=256,G=512,W=30,se="...",ce=800,de=16,m=1,O=2,ee=3,X=1/0,V=9007199254740991,k=17976931348623157e292,J=0/0,re=4294967295,me=re-1,oe=re>>>1,we=[["ary",u],["bind",K],["bindKey",ie],["curry",j],["curryRight",x],["flip",G],["partial",C],["partialRight",w],["rearg",b]],le="[object Arguments]",ve="[object Array]",q="[object AsyncFunction]",B="[object Boolean]",F="[object Date]",d="[object DOMException]",P="[object Error]",ae="[object Function]",fe="[object GeneratorFunction]",xe="[object Map]",ze="[object Number]",Ve="[object Null]",je="[object Object]",pt="[object Promise]",gt="[object Proxy]",Me="[object RegExp]",Ie="[object Set]",Ne="[object String]",$e="[object Symbol]",Be="[object Undefined]",Pe="[object WeakMap]",Fe="[object WeakSet]",Se="[object ArrayBuffer]",Ce="[object DataView]",He="[object Float32Array]",Oe="[object Float64Array]",ke="[object Int8Array]",We="[object Int16Array]",et="[object Int32Array]",tt="[object Uint8Array]",Je="[object Uint8ClampedArray]",er="[object Uint16Array]",hr="[object Uint32Array]",kr=/\b__p \+= '';/g,tr=/\b(__p \+=) '' \+/g,rn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,bn=/&(?:amp|lt|gt|quot|#39);/g,Fn=/[&<>"']/g,wt=RegExp(bn.source),yt=RegExp(Fn.source),Et=/<%-([\s\S]+?)%>/g,Dt=/<%([\s\S]+?)%>/g,bt=/<%=([\s\S]+?)%>/g,_t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ft=/^\w*$/,Ut=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,St=/[\\^$.*+?()[\]{}|]/g,jt=RegExp(St.source),xt=/^\s+/,Ct=/\s/,It=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ht=/\{\n\/\* \[wrapped with (.+)\] \*/,Lt=/,? & /,Mt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ra=/[()=,{}\[\]\/\s]/,na=/\\(\\)?/g,ia=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Or=/\w*$/,sa=/^[-+]0x[0-9a-f]+$/i,oa=/^0b[01]+$/i,aa=/^\[object .+?Constructor\]$/,ca=/^0o[0-7]+$/i,ua=/^(?:0|[1-9]\d*)$/,nn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,oi=/($^)/,ha=/['\n\r\u2028\u2029\\]/g,ai="\\ud800-\\udfff",la="\\u0300-\\u036f",fa="\\ufe20-\\ufe2f",ci="\\u20d0-\\u20ff",xs=la+fa+ci,Is="\\u2700-\\u27bf",Mr="a-z\\xdf-\\xf6\\xf8-\\xff",da="\\xac\\xb1\\xd7\\xf7",pa="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ga="\\u2000-\\u206f",ya=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Os="A-Z\\xc0-\\xd6\\xd8-\\xde",Ps="\\ufe0e\\ufe0f",Un=da+pa+ga+ya,$i="['\u2019]",jn="["+ai+"]",Fi="["+Un+"]",Ln="["+xs+"]",Cs="\\d+",_a="["+Is+"]",As="["+Mr+"]",Ts="[^"+ai+Un+Cs+Is+Mr+Os+"]",ui="\\ud83c[\\udffb-\\udfff]",va="(?:"+Ln+"|"+ui+")",Rs="[^"+ai+"]",hi="(?:\\ud83c[\\udde6-\\uddff]){2}",mn="[\\ud800-\\udbff][\\udc00-\\udfff]",mr="["+Os+"]",Ns="\\u200d",$s="(?:"+As+"|"+Ts+")",Gr="(?:"+mr+"|"+Ts+")",Fs="(?:"+$i+"(?:d|ll|m|re|s|t|ve))?",Us="(?:"+$i+"(?:D|LL|M|RE|S|T|VE))?",js=va+"?",Ls="["+Ps+"]?",ba="(?:"+Ns+"(?:"+[Rs,hi,mn].join("|")+")"+Ls+js+")*",sn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ms="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Bs=Ls+js+ba,li="(?:"+[_a,hi,mn].join("|")+")"+Bs,ma="(?:"+[Rs+Ln+"?",Ln,hi,mn,jn].join("|")+")",Ui=RegExp($i,"g"),wa=RegExp(Ln,"g"),fi=RegExp(ui+"(?="+ui+")|"+ma+Bs,"g"),qs=RegExp([mr+"?"+As+"+"+Fs+"(?="+[Fi,mr,"$"].join("|")+")",Gr+"+"+Us+"(?="+[Fi,mr+$s,"$"].join("|")+")",mr+"?"+$s+"+"+Fs,mr+"+"+Us,Ms,sn,Cs,li].join("|"),"g"),zs=RegExp("["+Ns+ai+xs+Ps+"]"),Mn=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Hs=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ea=-1,ot={};ot[He]=ot[Oe]=ot[ke]=ot[We]=ot[et]=ot[tt]=ot[Je]=ot[er]=ot[hr]=!0,ot[le]=ot[ve]=ot[Se]=ot[B]=ot[Ce]=ot[F]=ot[P]=ot[ae]=ot[xe]=ot[ze]=ot[je]=ot[Me]=ot[Ie]=ot[Ne]=ot[Pe]=!1;var st={};st[le]=st[ve]=st[Se]=st[Ce]=st[B]=st[F]=st[He]=st[Oe]=st[ke]=st[We]=st[et]=st[xe]=st[ze]=st[je]=st[Me]=st[Ie]=st[Ne]=st[$e]=st[tt]=st[Je]=st[er]=st[hr]=!0,st[P]=st[ae]=st[Pe]=!1;var D={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},U={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},te={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},pe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},at=parseFloat,Te=parseInt,ft=typeof hs=="object"&&hs&&hs.Object===Object&&hs,Bt=typeof self=="object"&&self&&self.Object===Object&&self,Xe=ft||Bt||Function("return this")(),ct=e&&!e.nodeType&&e,At=ct&&!0&&n&&!n.nodeType&&n,lr=At&&At.exports===ct,qt=lr&&ft.process,dt=function(){try{var L=At&&At.require&&At.require("util").types;return L||qt&&qt.binding&&qt.binding("util")}catch{}}(),rr=dt&&dt.isArrayBuffer,Br=dt&&dt.isDate,Pr=dt&&dt.isMap,Wr=dt&&dt.isRegExp,ji=dt&&dt.isSet,Bn=dt&&dt.isTypedArray;function Vt(L,Y,H){switch(H.length){case 0:return L.call(Y);case 1:return L.call(Y,H[0]);case 2:return L.call(Y,H[0],H[1]);case 3:return L.call(Y,H[0],H[1],H[2])}return L.apply(Y,H)}function Xp(L,Y,H,ge){for(var Ae=-1,rt=L==null?0:L.length;++Ae<rt;){var Ht=L[Ae];Y(ge,Ht,H(Ht),L)}return ge}function Cr(L,Y){for(var H=-1,ge=L==null?0:L.length;++H<ge&&Y(L[H],H,L)!==!1;);return L}function Qp(L,Y){for(var H=L==null?0:L.length;H--&&Y(L[H],H,L)!==!1;);return L}function Yu(L,Y){for(var H=-1,ge=L==null?0:L.length;++H<ge;)if(!Y(L[H],H,L))return!1;return!0}function wn(L,Y){for(var H=-1,ge=L==null?0:L.length,Ae=0,rt=[];++H<ge;){var Ht=L[H];Y(Ht,H,L)&&(rt[Ae++]=Ht)}return rt}function Ks(L,Y){var H=L==null?0:L.length;return!!H&&di(L,Y,0)>-1}function Da(L,Y,H){for(var ge=-1,Ae=L==null?0:L.length;++ge<Ae;)if(H(Y,L[ge]))return!0;return!1}function vt(L,Y){for(var H=-1,ge=L==null?0:L.length,Ae=Array(ge);++H<ge;)Ae[H]=Y(L[H],H,L);return Ae}function En(L,Y){for(var H=-1,ge=Y.length,Ae=L.length;++H<ge;)L[Ae+H]=Y[H];return L}function Sa(L,Y,H,ge){var Ae=-1,rt=L==null?0:L.length;for(ge&&rt&&(H=L[++Ae]);++Ae<rt;)H=Y(H,L[Ae],Ae,L);return H}function Zp(L,Y,H,ge){var Ae=L==null?0:L.length;for(ge&&Ae&&(H=L[--Ae]);Ae--;)H=Y(H,L[Ae],Ae,L);return H}function xa(L,Y){for(var H=-1,ge=L==null?0:L.length;++H<ge;)if(Y(L[H],H,L))return!0;return!1}var eg=Ia("length");function tg(L){return L.split("")}function rg(L){return L.match(Mt)||[]}function Ju(L,Y,H){var ge;return H(L,function(Ae,rt,Ht){if(Y(Ae,rt,Ht))return ge=rt,!1}),ge}function Vs(L,Y,H,ge){for(var Ae=L.length,rt=H+(ge?1:-1);ge?rt--:++rt<Ae;)if(Y(L[rt],rt,L))return rt;return-1}function di(L,Y,H){return Y===Y?pg(L,Y,H):Vs(L,Xu,H)}function ng(L,Y,H,ge){for(var Ae=H-1,rt=L.length;++Ae<rt;)if(ge(L[Ae],Y))return Ae;return-1}function Xu(L){return L!==L}function Qu(L,Y){var H=L==null?0:L.length;return H?Pa(L,Y)/H:J}function Ia(L){return function(Y){return Y==null?t:Y[L]}}function Oa(L){return function(Y){return L==null?t:L[Y]}}function Zu(L,Y,H,ge,Ae){return Ae(L,function(rt,Ht,ut){H=ge?(ge=!1,rt):Y(H,rt,Ht,ut)}),H}function ig(L,Y){var H=L.length;for(L.sort(Y);H--;)L[H]=L[H].value;return L}function Pa(L,Y){for(var H,ge=-1,Ae=L.length;++ge<Ae;){var rt=Y(L[ge]);rt!==t&&(H=H===t?rt:H+rt)}return H}function Ca(L,Y){for(var H=-1,ge=Array(L);++H<L;)ge[H]=Y(H);return ge}function sg(L,Y){return vt(Y,function(H){return[H,L[H]]})}function eh(L){return L&&L.slice(0,ih(L)+1).replace(xt,"")}function wr(L){return function(Y){return L(Y)}}function Aa(L,Y){return vt(Y,function(H){return L[H]})}function Li(L,Y){return L.has(Y)}function th(L,Y){for(var H=-1,ge=L.length;++H<ge&&di(Y,L[H],0)>-1;);return H}function rh(L,Y){for(var H=L.length;H--&&di(Y,L[H],0)>-1;);return H}function og(L,Y){for(var H=L.length,ge=0;H--;)L[H]===Y&&++ge;return ge}var ag=Oa(D),cg=Oa(U);function ug(L){return"\\"+pe[L]}function hg(L,Y){return L==null?t:L[Y]}function pi(L){return zs.test(L)}function lg(L){return Mn.test(L)}function fg(L){for(var Y,H=[];!(Y=L.next()).done;)H.push(Y.value);return H}function Ta(L){var Y=-1,H=Array(L.size);return L.forEach(function(ge,Ae){H[++Y]=[Ae,ge]}),H}function nh(L,Y){return function(H){return L(Y(H))}}function Dn(L,Y){for(var H=-1,ge=L.length,Ae=0,rt=[];++H<ge;){var Ht=L[H];(Ht===Y||Ht===E)&&(L[H]=E,rt[Ae++]=H)}return rt}function ks(L){var Y=-1,H=Array(L.size);return L.forEach(function(ge){H[++Y]=ge}),H}function dg(L){var Y=-1,H=Array(L.size);return L.forEach(function(ge){H[++Y]=[ge,ge]}),H}function pg(L,Y,H){for(var ge=H-1,Ae=L.length;++ge<Ae;)if(L[ge]===Y)return ge;return-1}function gg(L,Y,H){for(var ge=H+1;ge--;)if(L[ge]===Y)return ge;return ge}function gi(L){return pi(L)?_g(L):eg(L)}function qr(L){return pi(L)?vg(L):tg(L)}function ih(L){for(var Y=L.length;Y--&&Ct.test(L.charAt(Y)););return Y}var yg=Oa(te);function _g(L){for(var Y=fi.lastIndex=0;fi.test(L);)++Y;return Y}function vg(L){return L.match(fi)||[]}function bg(L){return L.match(qs)||[]}var mg=function L(Y){Y=Y==null?Xe:yi.defaults(Xe.Object(),Y,yi.pick(Xe,Hs));var H=Y.Array,ge=Y.Date,Ae=Y.Error,rt=Y.Function,Ht=Y.Math,ut=Y.Object,Ra=Y.RegExp,wg=Y.String,Ar=Y.TypeError,Gs=H.prototype,Eg=rt.prototype,_i=ut.prototype,Ws=Y["__core-js_shared__"],Ys=Eg.toString,it=_i.hasOwnProperty,Dg=0,sh=function(){var r=/[^.]+$/.exec(Ws&&Ws.keys&&Ws.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),Js=_i.toString,Sg=Ys.call(ut),xg=Xe._,Ig=Ra("^"+Ys.call(it).replace(St,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xs=lr?Y.Buffer:t,Sn=Y.Symbol,Qs=Y.Uint8Array,oh=Xs?Xs.allocUnsafe:t,Zs=nh(ut.getPrototypeOf,ut),ah=ut.create,ch=_i.propertyIsEnumerable,eo=Gs.splice,uh=Sn?Sn.isConcatSpreadable:t,Mi=Sn?Sn.iterator:t,qn=Sn?Sn.toStringTag:t,to=function(){try{var r=kn(ut,"defineProperty");return r({},"",{}),r}catch{}}(),Og=Y.clearTimeout!==Xe.clearTimeout&&Y.clearTimeout,Pg=ge&&ge.now!==Xe.Date.now&&ge.now,Cg=Y.setTimeout!==Xe.setTimeout&&Y.setTimeout,ro=Ht.ceil,no=Ht.floor,Na=ut.getOwnPropertySymbols,Ag=Xs?Xs.isBuffer:t,hh=Y.isFinite,Tg=Gs.join,Rg=nh(ut.keys,ut),Kt=Ht.max,Xt=Ht.min,Ng=ge.now,$g=Y.parseInt,lh=Ht.random,Fg=Gs.reverse,$a=kn(Y,"DataView"),Bi=kn(Y,"Map"),Fa=kn(Y,"Promise"),vi=kn(Y,"Set"),qi=kn(Y,"WeakMap"),zi=kn(ut,"create"),io=qi&&new qi,bi={},Ug=Gn($a),jg=Gn(Bi),Lg=Gn(Fa),Mg=Gn(vi),Bg=Gn(qi),so=Sn?Sn.prototype:t,Hi=so?so.valueOf:t,fh=so?so.toString:t;function _(r){if(Ot(r)&&!Re(r)&&!(r instanceof Ye)){if(r instanceof Tr)return r;if(it.call(r,"__wrapped__"))return dl(r)}return new Tr(r)}var mi=function(){function r(){}return function(i){if(!mt(i))return{};if(ah)return ah(i);r.prototype=i;var a=new r;return r.prototype=t,a}}();function oo(){}function Tr(r,i){this.__wrapped__=r,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=t}_.templateSettings={escape:Et,evaluate:Dt,interpolate:bt,variable:"",imports:{_}},_.prototype=oo.prototype,_.prototype.constructor=_,Tr.prototype=mi(oo.prototype),Tr.prototype.constructor=Tr;function Ye(r){this.__wrapped__=r,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=re,this.__views__=[]}function qg(){var r=new Ye(this.__wrapped__);return r.__actions__=fr(this.__actions__),r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=fr(this.__iteratees__),r.__takeCount__=this.__takeCount__,r.__views__=fr(this.__views__),r}function zg(){if(this.__filtered__){var r=new Ye(this);r.__dir__=-1,r.__filtered__=!0}else r=this.clone(),r.__dir__*=-1;return r}function Hg(){var r=this.__wrapped__.value(),i=this.__dir__,a=Re(r),h=i<0,g=a?r.length:0,v=ty(0,g,this.__views__),I=v.start,N=v.end,M=N-I,Q=h?N:I-1,Z=this.__iteratees__,ne=Z.length,ue=0,ye=Xt(M,this.__takeCount__);if(!a||!h&&g==M&&ye==M)return Uh(r,this.__actions__);var Ee=[];e:for(;M--&&ue<ye;){Q+=i;for(var qe=-1,De=r[Q];++qe<ne;){var Ge=Z[qe],Qe=Ge.iteratee,Sr=Ge.type,sr=Qe(De);if(Sr==O)De=sr;else if(!sr){if(Sr==m)continue e;break e}}Ee[ue++]=De}return Ee}Ye.prototype=mi(oo.prototype),Ye.prototype.constructor=Ye;function zn(r){var i=-1,a=r==null?0:r.length;for(this.clear();++i<a;){var h=r[i];this.set(h[0],h[1])}}function Kg(){this.__data__=zi?zi(null):{},this.size=0}function Vg(r){var i=this.has(r)&&delete this.__data__[r];return this.size-=i?1:0,i}function kg(r){var i=this.__data__;if(zi){var a=i[r];return a===y?t:a}return it.call(i,r)?i[r]:t}function Gg(r){var i=this.__data__;return zi?i[r]!==t:it.call(i,r)}function Wg(r,i){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=zi&&i===t?y:i,this}zn.prototype.clear=Kg,zn.prototype.delete=Vg,zn.prototype.get=kg,zn.prototype.has=Gg,zn.prototype.set=Wg;function on(r){var i=-1,a=r==null?0:r.length;for(this.clear();++i<a;){var h=r[i];this.set(h[0],h[1])}}function Yg(){this.__data__=[],this.size=0}function Jg(r){var i=this.__data__,a=ao(i,r);if(a<0)return!1;var h=i.length-1;return a==h?i.pop():eo.call(i,a,1),--this.size,!0}function Xg(r){var i=this.__data__,a=ao(i,r);return a<0?t:i[a][1]}function Qg(r){return ao(this.__data__,r)>-1}function Zg(r,i){var a=this.__data__,h=ao(a,r);return h<0?(++this.size,a.push([r,i])):a[h][1]=i,this}on.prototype.clear=Yg,on.prototype.delete=Jg,on.prototype.get=Xg,on.prototype.has=Qg,on.prototype.set=Zg;function an(r){var i=-1,a=r==null?0:r.length;for(this.clear();++i<a;){var h=r[i];this.set(h[0],h[1])}}function e0(){this.size=0,this.__data__={hash:new zn,map:new(Bi||on),string:new zn}}function t0(r){var i=mo(this,r).delete(r);return this.size-=i?1:0,i}function r0(r){return mo(this,r).get(r)}function n0(r){return mo(this,r).has(r)}function i0(r,i){var a=mo(this,r),h=a.size;return a.set(r,i),this.size+=a.size==h?0:1,this}an.prototype.clear=e0,an.prototype.delete=t0,an.prototype.get=r0,an.prototype.has=n0,an.prototype.set=i0;function Hn(r){var i=-1,a=r==null?0:r.length;for(this.__data__=new an;++i<a;)this.add(r[i])}function s0(r){return this.__data__.set(r,y),this}function o0(r){return this.__data__.has(r)}Hn.prototype.add=Hn.prototype.push=s0,Hn.prototype.has=o0;function zr(r){var i=this.__data__=new on(r);this.size=i.size}function a0(){this.__data__=new on,this.size=0}function c0(r){var i=this.__data__,a=i.delete(r);return this.size=i.size,a}function u0(r){return this.__data__.get(r)}function h0(r){return this.__data__.has(r)}function l0(r,i){var a=this.__data__;if(a instanceof on){var h=a.__data__;if(!Bi||h.length<o-1)return h.push([r,i]),this.size=++a.size,this;a=this.__data__=new an(h)}return a.set(r,i),this.size=a.size,this}zr.prototype.clear=a0,zr.prototype.delete=c0,zr.prototype.get=u0,zr.prototype.has=h0,zr.prototype.set=l0;function dh(r,i){var a=Re(r),h=!a&&Wn(r),g=!a&&!h&&Cn(r),v=!a&&!h&&!g&&Si(r),I=a||h||g||v,N=I?Ca(r.length,wg):[],M=N.length;for(var Q in r)(i||it.call(r,Q))&&!(I&&(Q=="length"||g&&(Q=="offset"||Q=="parent")||v&&(Q=="buffer"||Q=="byteLength"||Q=="byteOffset")||ln(Q,M)))&&N.push(Q);return N}function ph(r){var i=r.length;return i?r[ka(0,i-1)]:t}function f0(r,i){return wo(fr(r),Kn(i,0,r.length))}function d0(r){return wo(fr(r))}function Ua(r,i,a){(a!==t&&!Hr(r[i],a)||a===t&&!(i in r))&&cn(r,i,a)}function Ki(r,i,a){var h=r[i];(!(it.call(r,i)&&Hr(h,a))||a===t&&!(i in r))&&cn(r,i,a)}function ao(r,i){for(var a=r.length;a--;)if(Hr(r[a][0],i))return a;return-1}function p0(r,i,a,h){return xn(r,function(g,v,I){i(h,g,a(g),I)}),h}function gh(r,i){return r&&Jr(i,kt(i),r)}function g0(r,i){return r&&Jr(i,pr(i),r)}function cn(r,i,a){i=="__proto__"&&to?to(r,i,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[i]=a}function ja(r,i){for(var a=-1,h=i.length,g=H(h),v=r==null;++a<h;)g[a]=v?t:_c(r,i[a]);return g}function Kn(r,i,a){return r===r&&(a!==t&&(r=r<=a?r:a),i!==t&&(r=r>=i?r:i)),r}function Rr(r,i,a,h,g,v){var I,N=i&A,M=i&S,Q=i&T;if(a&&(I=g?a(r,h,g,v):a(r)),I!==t)return I;if(!mt(r))return r;var Z=Re(r);if(Z){if(I=ny(r),!N)return fr(r,I)}else{var ne=Qt(r),ue=ne==ae||ne==fe;if(Cn(r))return Mh(r,N);if(ne==je||ne==le||ue&&!g){if(I=M||ue?{}:il(r),!N)return M?k0(r,g0(I,r)):V0(r,gh(I,r))}else{if(!st[ne])return g?r:{};I=iy(r,ne,N)}}v||(v=new zr);var ye=v.get(r);if(ye)return ye;v.set(r,I),Nl(r)?r.forEach(function(De){I.add(Rr(De,i,a,De,r,v))}):Tl(r)&&r.forEach(function(De,Ge){I.set(Ge,Rr(De,i,a,Ge,r,v))});var Ee=Q?M?nc:rc:M?pr:kt,qe=Z?t:Ee(r);return Cr(qe||r,function(De,Ge){qe&&(Ge=De,De=r[Ge]),Ki(I,Ge,Rr(De,i,a,Ge,r,v))}),I}function y0(r){var i=kt(r);return function(a){return yh(a,r,i)}}function yh(r,i,a){var h=a.length;if(r==null)return!h;for(r=ut(r);h--;){var g=a[h],v=i[g],I=r[g];if(I===t&&!(g in r)||!v(I))return!1}return!0}function _h(r,i,a){if(typeof r!="function")throw new Ar(l);return Xi(function(){r.apply(t,a)},i)}function Vi(r,i,a,h){var g=-1,v=Ks,I=!0,N=r.length,M=[],Q=i.length;if(!N)return M;a&&(i=vt(i,wr(a))),h?(v=Da,I=!1):i.length>=o&&(v=Li,I=!1,i=new Hn(i));e:for(;++g<N;){var Z=r[g],ne=a==null?Z:a(Z);if(Z=h||Z!==0?Z:0,I&&ne===ne){for(var ue=Q;ue--;)if(i[ue]===ne)continue e;M.push(Z)}else v(i,ne,h)||M.push(Z)}return M}var xn=Kh(Yr),vh=Kh(Ma,!0);function _0(r,i){var a=!0;return xn(r,function(h,g,v){return a=!!i(h,g,v),a}),a}function co(r,i,a){for(var h=-1,g=r.length;++h<g;){var v=r[h],I=i(v);if(I!=null&&(N===t?I===I&&!Dr(I):a(I,N)))var N=I,M=v}return M}function v0(r,i,a,h){var g=r.length;for(a=Le(a),a<0&&(a=-a>g?0:g+a),h=h===t||h>g?g:Le(h),h<0&&(h+=g),h=a>h?0:Fl(h);a<h;)r[a++]=i;return r}function bh(r,i){var a=[];return xn(r,function(h,g,v){i(h,g,v)&&a.push(h)}),a}function Wt(r,i,a,h,g){var v=-1,I=r.length;for(a||(a=oy),g||(g=[]);++v<I;){var N=r[v];i>0&&a(N)?i>1?Wt(N,i-1,a,h,g):En(g,N):h||(g[g.length]=N)}return g}var La=Vh(),mh=Vh(!0);function Yr(r,i){return r&&La(r,i,kt)}function Ma(r,i){return r&&mh(r,i,kt)}function uo(r,i){return wn(i,function(a){return fn(r[a])})}function Vn(r,i){i=On(i,r);for(var a=0,h=i.length;r!=null&&a<h;)r=r[Xr(i[a++])];return a&&a==h?r:t}function wh(r,i,a){var h=i(r);return Re(r)?h:En(h,a(r))}function nr(r){return r==null?r===t?Be:Ve:qn&&qn in ut(r)?ey(r):dy(r)}function Ba(r,i){return r>i}function b0(r,i){return r!=null&&it.call(r,i)}function m0(r,i){return r!=null&&i in ut(r)}function w0(r,i,a){return r>=Xt(i,a)&&r<Kt(i,a)}function qa(r,i,a){for(var h=a?Da:Ks,g=r[0].length,v=r.length,I=v,N=H(v),M=1/0,Q=[];I--;){var Z=r[I];I&&i&&(Z=vt(Z,wr(i))),M=Xt(Z.length,M),N[I]=!a&&(i||g>=120&&Z.length>=120)?new Hn(I&&Z):t}Z=r[0];var ne=-1,ue=N[0];e:for(;++ne<g&&Q.length<M;){var ye=Z[ne],Ee=i?i(ye):ye;if(ye=a||ye!==0?ye:0,!(ue?Li(ue,Ee):h(Q,Ee,a))){for(I=v;--I;){var qe=N[I];if(!(qe?Li(qe,Ee):h(r[I],Ee,a)))continue e}ue&&ue.push(Ee),Q.push(ye)}}return Q}function E0(r,i,a,h){return Yr(r,function(g,v,I){i(h,a(g),v,I)}),h}function ki(r,i,a){i=On(i,r),r=cl(r,i);var h=r==null?r:r[Xr($r(i))];return h==null?t:Vt(h,r,a)}function Eh(r){return Ot(r)&&nr(r)==le}function D0(r){return Ot(r)&&nr(r)==Se}function S0(r){return Ot(r)&&nr(r)==F}function Gi(r,i,a,h,g){return r===i?!0:r==null||i==null||!Ot(r)&&!Ot(i)?r!==r&&i!==i:x0(r,i,a,h,Gi,g)}function x0(r,i,a,h,g,v){var I=Re(r),N=Re(i),M=I?ve:Qt(r),Q=N?ve:Qt(i);M=M==le?je:M,Q=Q==le?je:Q;var Z=M==je,ne=Q==je,ue=M==Q;if(ue&&Cn(r)){if(!Cn(i))return!1;I=!0,Z=!1}if(ue&&!Z)return v||(v=new zr),I||Si(r)?tl(r,i,a,h,g,v):Q0(r,i,M,a,h,g,v);if(!(a&R)){var ye=Z&&it.call(r,"__wrapped__"),Ee=ne&&it.call(i,"__wrapped__");if(ye||Ee){var qe=ye?r.value():r,De=Ee?i.value():i;return v||(v=new zr),g(qe,De,a,h,v)}}return ue?(v||(v=new zr),Z0(r,i,a,h,g,v)):!1}function I0(r){return Ot(r)&&Qt(r)==xe}function za(r,i,a,h){var g=a.length,v=g,I=!h;if(r==null)return!v;for(r=ut(r);g--;){var N=a[g];if(I&&N[2]?N[1]!==r[N[0]]:!(N[0]in r))return!1}for(;++g<v;){N=a[g];var M=N[0],Q=r[M],Z=N[1];if(I&&N[2]){if(Q===t&&!(M in r))return!1}else{var ne=new zr;if(h)var ue=h(Q,Z,M,r,i,ne);if(!(ue===t?Gi(Z,Q,R|z,h,ne):ue))return!1}}return!0}function Dh(r){if(!mt(r)||cy(r))return!1;var i=fn(r)?Ig:aa;return i.test(Gn(r))}function O0(r){return Ot(r)&&nr(r)==Me}function P0(r){return Ot(r)&&Qt(r)==Ie}function C0(r){return Ot(r)&&Oo(r.length)&&!!ot[nr(r)]}function Sh(r){return typeof r=="function"?r:r==null?gr:typeof r=="object"?Re(r)?Oh(r[0],r[1]):Ih(r):kl(r)}function Ha(r){if(!Ji(r))return Rg(r);var i=[];for(var a in ut(r))it.call(r,a)&&a!="constructor"&&i.push(a);return i}function A0(r){if(!mt(r))return fy(r);var i=Ji(r),a=[];for(var h in r)h=="constructor"&&(i||!it.call(r,h))||a.push(h);return a}function Ka(r,i){return r<i}function xh(r,i){var a=-1,h=dr(r)?H(r.length):[];return xn(r,function(g,v,I){h[++a]=i(g,v,I)}),h}function Ih(r){var i=sc(r);return i.length==1&&i[0][2]?ol(i[0][0],i[0][1]):function(a){return a===r||za(a,r,i)}}function Oh(r,i){return ac(r)&&sl(i)?ol(Xr(r),i):function(a){var h=_c(a,r);return h===t&&h===i?vc(a,r):Gi(i,h,R|z)}}function ho(r,i,a,h,g){r!==i&&La(i,function(v,I){if(g||(g=new zr),mt(v))T0(r,i,I,a,ho,h,g);else{var N=h?h(uc(r,I),v,I+"",r,i,g):t;N===t&&(N=v),Ua(r,I,N)}},pr)}function T0(r,i,a,h,g,v,I){var N=uc(r,a),M=uc(i,a),Q=I.get(M);if(Q){Ua(r,a,Q);return}var Z=v?v(N,M,a+"",r,i,I):t,ne=Z===t;if(ne){var ue=Re(M),ye=!ue&&Cn(M),Ee=!ue&&!ye&&Si(M);Z=M,ue||ye||Ee?Re(N)?Z=N:Tt(N)?Z=fr(N):ye?(ne=!1,Z=Mh(M,!0)):Ee?(ne=!1,Z=Bh(M,!0)):Z=[]:Qi(M)||Wn(M)?(Z=N,Wn(N)?Z=Ul(N):(!mt(N)||fn(N))&&(Z=il(M))):ne=!1}ne&&(I.set(M,Z),g(Z,M,h,v,I),I.delete(M)),Ua(r,a,Z)}function Ph(r,i){var a=r.length;if(a)return i+=i<0?a:0,ln(i,a)?r[i]:t}function Ch(r,i,a){i.length?i=vt(i,function(v){return Re(v)?function(I){return Vn(I,v.length===1?v[0]:v)}:v}):i=[gr];var h=-1;i=vt(i,wr(be()));var g=xh(r,function(v,I,N){var M=vt(i,function(Q){return Q(v)});return{criteria:M,index:++h,value:v}});return ig(g,function(v,I){return K0(v,I,a)})}function R0(r,i){return Ah(r,i,function(a,h){return vc(r,h)})}function Ah(r,i,a){for(var h=-1,g=i.length,v={};++h<g;){var I=i[h],N=Vn(r,I);a(N,I)&&Wi(v,On(I,r),N)}return v}function N0(r){return function(i){return Vn(i,r)}}function Va(r,i,a,h){var g=h?ng:di,v=-1,I=i.length,N=r;for(r===i&&(i=fr(i)),a&&(N=vt(r,wr(a)));++v<I;)for(var M=0,Q=i[v],Z=a?a(Q):Q;(M=g(N,Z,M,h))>-1;)N!==r&&eo.call(N,M,1),eo.call(r,M,1);return r}function Th(r,i){for(var a=r?i.length:0,h=a-1;a--;){var g=i[a];if(a==h||g!==v){var v=g;ln(g)?eo.call(r,g,1):Ya(r,g)}}return r}function ka(r,i){return r+no(lh()*(i-r+1))}function $0(r,i,a,h){for(var g=-1,v=Kt(ro((i-r)/(a||1)),0),I=H(v);v--;)I[h?v:++g]=r,r+=a;return I}function Ga(r,i){var a="";if(!r||i<1||i>V)return a;do i%2&&(a+=r),i=no(i/2),i&&(r+=r);while(i);return a}function Ke(r,i){return hc(al(r,i,gr),r+"")}function F0(r){return ph(xi(r))}function U0(r,i){var a=xi(r);return wo(a,Kn(i,0,a.length))}function Wi(r,i,a,h){if(!mt(r))return r;i=On(i,r);for(var g=-1,v=i.length,I=v-1,N=r;N!=null&&++g<v;){var M=Xr(i[g]),Q=a;if(M==="__proto__"||M==="constructor"||M==="prototype")return r;if(g!=I){var Z=N[M];Q=h?h(Z,M,N):t,Q===t&&(Q=mt(Z)?Z:ln(i[g+1])?[]:{})}Ki(N,M,Q),N=N[M]}return r}var Rh=io?function(r,i){return io.set(r,i),r}:gr,j0=to?function(r,i){return to(r,"toString",{configurable:!0,enumerable:!1,value:mc(i),writable:!0})}:gr;function L0(r){return wo(xi(r))}function Nr(r,i,a){var h=-1,g=r.length;i<0&&(i=-i>g?0:g+i),a=a>g?g:a,a<0&&(a+=g),g=i>a?0:a-i>>>0,i>>>=0;for(var v=H(g);++h<g;)v[h]=r[h+i];return v}function M0(r,i){var a;return xn(r,function(h,g,v){return a=i(h,g,v),!a}),!!a}function lo(r,i,a){var h=0,g=r==null?h:r.length;if(typeof i=="number"&&i===i&&g<=oe){for(;h<g;){var v=h+g>>>1,I=r[v];I!==null&&!Dr(I)&&(a?I<=i:I<i)?h=v+1:g=v}return g}return Wa(r,i,gr,a)}function Wa(r,i,a,h){var g=0,v=r==null?0:r.length;if(v===0)return 0;i=a(i);for(var I=i!==i,N=i===null,M=Dr(i),Q=i===t;g<v;){var Z=no((g+v)/2),ne=a(r[Z]),ue=ne!==t,ye=ne===null,Ee=ne===ne,qe=Dr(ne);if(I)var De=h||Ee;else Q?De=Ee&&(h||ue):N?De=Ee&&ue&&(h||!ye):M?De=Ee&&ue&&!ye&&(h||!qe):ye||qe?De=!1:De=h?ne<=i:ne<i;De?g=Z+1:v=Z}return Xt(v,me)}function Nh(r,i){for(var a=-1,h=r.length,g=0,v=[];++a<h;){var I=r[a],N=i?i(I):I;if(!a||!Hr(N,M)){var M=N;v[g++]=I===0?0:I}}return v}function $h(r){return typeof r=="number"?r:Dr(r)?J:+r}function Er(r){if(typeof r=="string")return r;if(Re(r))return vt(r,Er)+"";if(Dr(r))return fh?fh.call(r):"";var i=r+"";return i=="0"&&1/r==-X?"-0":i}function In(r,i,a){var h=-1,g=Ks,v=r.length,I=!0,N=[],M=N;if(a)I=!1,g=Da;else if(v>=o){var Q=i?null:J0(r);if(Q)return ks(Q);I=!1,g=Li,M=new Hn}else M=i?[]:N;e:for(;++h<v;){var Z=r[h],ne=i?i(Z):Z;if(Z=a||Z!==0?Z:0,I&&ne===ne){for(var ue=M.length;ue--;)if(M[ue]===ne)continue e;i&&M.push(ne),N.push(Z)}else g(M,ne,a)||(M!==N&&M.push(ne),N.push(Z))}return N}function Ya(r,i){return i=On(i,r),r=cl(r,i),r==null||delete r[Xr($r(i))]}function Fh(r,i,a,h){return Wi(r,i,a(Vn(r,i)),h)}function fo(r,i,a,h){for(var g=r.length,v=h?g:-1;(h?v--:++v<g)&&i(r[v],v,r););return a?Nr(r,h?0:v,h?v+1:g):Nr(r,h?v+1:0,h?g:v)}function Uh(r,i){var a=r;return a instanceof Ye&&(a=a.value()),Sa(i,function(h,g){return g.func.apply(g.thisArg,En([h],g.args))},a)}function Ja(r,i,a){var h=r.length;if(h<2)return h?In(r[0]):[];for(var g=-1,v=H(h);++g<h;)for(var I=r[g],N=-1;++N<h;)N!=g&&(v[g]=Vi(v[g]||I,r[N],i,a));return In(Wt(v,1),i,a)}function jh(r,i,a){for(var h=-1,g=r.length,v=i.length,I={};++h<g;){var N=h<v?i[h]:t;a(I,r[h],N)}return I}function Xa(r){return Tt(r)?r:[]}function Qa(r){return typeof r=="function"?r:gr}function On(r,i){return Re(r)?r:ac(r,i)?[r]:fl(nt(r))}var B0=Ke;function Pn(r,i,a){var h=r.length;return a=a===t?h:a,!i&&a>=h?r:Nr(r,i,a)}var Lh=Og||function(r){return Xe.clearTimeout(r)};function Mh(r,i){if(i)return r.slice();var a=r.length,h=oh?oh(a):new r.constructor(a);return r.copy(h),h}function Za(r){var i=new r.constructor(r.byteLength);return new Qs(i).set(new Qs(r)),i}function q0(r,i){var a=i?Za(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.byteLength)}function z0(r){var i=new r.constructor(r.source,Or.exec(r));return i.lastIndex=r.lastIndex,i}function H0(r){return Hi?ut(Hi.call(r)):{}}function Bh(r,i){var a=i?Za(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.length)}function qh(r,i){if(r!==i){var a=r!==t,h=r===null,g=r===r,v=Dr(r),I=i!==t,N=i===null,M=i===i,Q=Dr(i);if(!N&&!Q&&!v&&r>i||v&&I&&M&&!N&&!Q||h&&I&&M||!a&&M||!g)return 1;if(!h&&!v&&!Q&&r<i||Q&&a&&g&&!h&&!v||N&&a&&g||!I&&g||!M)return-1}return 0}function K0(r,i,a){for(var h=-1,g=r.criteria,v=i.criteria,I=g.length,N=a.length;++h<I;){var M=qh(g[h],v[h]);if(M){if(h>=N)return M;var Q=a[h];return M*(Q=="desc"?-1:1)}}return r.index-i.index}function zh(r,i,a,h){for(var g=-1,v=r.length,I=a.length,N=-1,M=i.length,Q=Kt(v-I,0),Z=H(M+Q),ne=!h;++N<M;)Z[N]=i[N];for(;++g<I;)(ne||g<v)&&(Z[a[g]]=r[g]);for(;Q--;)Z[N++]=r[g++];return Z}function Hh(r,i,a,h){for(var g=-1,v=r.length,I=-1,N=a.length,M=-1,Q=i.length,Z=Kt(v-N,0),ne=H(Z+Q),ue=!h;++g<Z;)ne[g]=r[g];for(var ye=g;++M<Q;)ne[ye+M]=i[M];for(;++I<N;)(ue||g<v)&&(ne[ye+a[I]]=r[g++]);return ne}function fr(r,i){var a=-1,h=r.length;for(i||(i=H(h));++a<h;)i[a]=r[a];return i}function Jr(r,i,a,h){var g=!a;a||(a={});for(var v=-1,I=i.length;++v<I;){var N=i[v],M=h?h(a[N],r[N],N,a,r):t;M===t&&(M=r[N]),g?cn(a,N,M):Ki(a,N,M)}return a}function V0(r,i){return Jr(r,oc(r),i)}function k0(r,i){return Jr(r,rl(r),i)}function po(r,i){return function(a,h){var g=Re(a)?Xp:p0,v=i?i():{};return g(a,r,be(h,2),v)}}function wi(r){return Ke(function(i,a){var h=-1,g=a.length,v=g>1?a[g-1]:t,I=g>2?a[2]:t;for(v=r.length>3&&typeof v=="function"?(g--,v):t,I&&ir(a[0],a[1],I)&&(v=g<3?t:v,g=1),i=ut(i);++h<g;){var N=a[h];N&&r(i,N,h,v)}return i})}function Kh(r,i){return function(a,h){if(a==null)return a;if(!dr(a))return r(a,h);for(var g=a.length,v=i?g:-1,I=ut(a);(i?v--:++v<g)&&h(I[v],v,I)!==!1;);return a}}function Vh(r){return function(i,a,h){for(var g=-1,v=ut(i),I=h(i),N=I.length;N--;){var M=I[r?N:++g];if(a(v[M],M,v)===!1)break}return i}}function G0(r,i,a){var h=i&K,g=Yi(r);function v(){var I=this&&this!==Xe&&this instanceof v?g:r;return I.apply(h?a:this,arguments)}return v}function kh(r){return function(i){i=nt(i);var a=pi(i)?qr(i):t,h=a?a[0]:i.charAt(0),g=a?Pn(a,1).join(""):i.slice(1);return h[r]()+g}}function Ei(r){return function(i){return Sa(Kl(Hl(i).replace(Ui,"")),r,"")}}function Yi(r){return function(){var i=arguments;switch(i.length){case 0:return new r;case 1:return new r(i[0]);case 2:return new r(i[0],i[1]);case 3:return new r(i[0],i[1],i[2]);case 4:return new r(i[0],i[1],i[2],i[3]);case 5:return new r(i[0],i[1],i[2],i[3],i[4]);case 6:return new r(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new r(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var a=mi(r.prototype),h=r.apply(a,i);return mt(h)?h:a}}function W0(r,i,a){var h=Yi(r);function g(){for(var v=arguments.length,I=H(v),N=v,M=Di(g);N--;)I[N]=arguments[N];var Q=v<3&&I[0]!==M&&I[v-1]!==M?[]:Dn(I,M);if(v-=Q.length,v<a)return Xh(r,i,go,g.placeholder,t,I,Q,t,t,a-v);var Z=this&&this!==Xe&&this instanceof g?h:r;return Vt(Z,this,I)}return g}function Gh(r){return function(i,a,h){var g=ut(i);if(!dr(i)){var v=be(a,3);i=kt(i),a=function(N){return v(g[N],N,g)}}var I=r(i,a,h);return I>-1?g[v?i[I]:I]:t}}function Wh(r){return hn(function(i){var a=i.length,h=a,g=Tr.prototype.thru;for(r&&i.reverse();h--;){var v=i[h];if(typeof v!="function")throw new Ar(l);if(g&&!I&&bo(v)=="wrapper")var I=new Tr([],!0)}for(h=I?h:a;++h<a;){v=i[h];var N=bo(v),M=N=="wrapper"?ic(v):t;M&&cc(M[0])&&M[1]==(u|j|C|b)&&!M[4].length&&M[9]==1?I=I[bo(M[0])].apply(I,M[3]):I=v.length==1&&cc(v)?I[N]():I.thru(v)}return function(){var Q=arguments,Z=Q[0];if(I&&Q.length==1&&Re(Z))return I.plant(Z).value();for(var ne=0,ue=a?i[ne].apply(this,Q):Z;++ne<a;)ue=i[ne].call(this,ue);return ue}})}function go(r,i,a,h,g,v,I,N,M,Q){var Z=i&u,ne=i&K,ue=i&ie,ye=i&(j|x),Ee=i&G,qe=ue?t:Yi(r);function De(){for(var Ge=arguments.length,Qe=H(Ge),Sr=Ge;Sr--;)Qe[Sr]=arguments[Sr];if(ye)var sr=Di(De),xr=og(Qe,sr);if(h&&(Qe=zh(Qe,h,g,ye)),v&&(Qe=Hh(Qe,v,I,ye)),Ge-=xr,ye&&Ge<Q){var Rt=Dn(Qe,sr);return Xh(r,i,go,De.placeholder,a,Qe,Rt,N,M,Q-Ge)}var Kr=ne?a:this,pn=ue?Kr[r]:r;return Ge=Qe.length,N?Qe=py(Qe,N):Ee&&Ge>1&&Qe.reverse(),Z&&M<Ge&&(Qe.length=M),this&&this!==Xe&&this instanceof De&&(pn=qe||Yi(pn)),pn.apply(Kr,Qe)}return De}function Yh(r,i){return function(a,h){return E0(a,r,i(h),{})}}function yo(r,i){return function(a,h){var g;if(a===t&&h===t)return i;if(a!==t&&(g=a),h!==t){if(g===t)return h;typeof a=="string"||typeof h=="string"?(a=Er(a),h=Er(h)):(a=$h(a),h=$h(h)),g=r(a,h)}return g}}function ec(r){return hn(function(i){return i=vt(i,wr(be())),Ke(function(a){var h=this;return r(i,function(g){return Vt(g,h,a)})})})}function _o(r,i){i=i===t?" ":Er(i);var a=i.length;if(a<2)return a?Ga(i,r):i;var h=Ga(i,ro(r/gi(i)));return pi(i)?Pn(qr(h),0,r).join(""):h.slice(0,r)}function Y0(r,i,a,h){var g=i&K,v=Yi(r);function I(){for(var N=-1,M=arguments.length,Q=-1,Z=h.length,ne=H(Z+M),ue=this&&this!==Xe&&this instanceof I?v:r;++Q<Z;)ne[Q]=h[Q];for(;M--;)ne[Q++]=arguments[++N];return Vt(ue,g?a:this,ne)}return I}function Jh(r){return function(i,a,h){return h&&typeof h!="number"&&ir(i,a,h)&&(a=h=t),i=dn(i),a===t?(a=i,i=0):a=dn(a),h=h===t?i<a?1:-1:dn(h),$0(i,a,h,r)}}function vo(r){return function(i,a){return typeof i=="string"&&typeof a=="string"||(i=Fr(i),a=Fr(a)),r(i,a)}}function Xh(r,i,a,h,g,v,I,N,M,Q){var Z=i&j,ne=Z?I:t,ue=Z?t:I,ye=Z?v:t,Ee=Z?t:v;i|=Z?C:w,i&=~(Z?w:C),i&$||(i&=~(K|ie));var qe=[r,i,g,ye,ne,Ee,ue,N,M,Q],De=a.apply(t,qe);return cc(r)&&ul(De,qe),De.placeholder=h,hl(De,r,i)}function tc(r){var i=Ht[r];return function(a,h){if(a=Fr(a),h=h==null?0:Xt(Le(h),292),h&&hh(a)){var g=(nt(a)+"e").split("e"),v=i(g[0]+"e"+(+g[1]+h));return g=(nt(v)+"e").split("e"),+(g[0]+"e"+(+g[1]-h))}return i(a)}}var J0=vi&&1/ks(new vi([,-0]))[1]==X?function(r){return new vi(r)}:Dc;function Qh(r){return function(i){var a=Qt(i);return a==xe?Ta(i):a==Ie?dg(i):sg(i,r(i))}}function un(r,i,a,h,g,v,I,N){var M=i&ie;if(!M&&typeof r!="function")throw new Ar(l);var Q=h?h.length:0;if(Q||(i&=~(C|w),h=g=t),I=I===t?I:Kt(Le(I),0),N=N===t?N:Le(N),Q-=g?g.length:0,i&w){var Z=h,ne=g;h=g=t}var ue=M?t:ic(r),ye=[r,i,a,h,g,Z,ne,v,I,N];if(ue&&ly(ye,ue),r=ye[0],i=ye[1],a=ye[2],h=ye[3],g=ye[4],N=ye[9]=ye[9]===t?M?0:r.length:Kt(ye[9]-Q,0),!N&&i&(j|x)&&(i&=~(j|x)),!i||i==K)var Ee=G0(r,i,a);else i==j||i==x?Ee=W0(r,i,N):(i==C||i==(K|C))&&!g.length?Ee=Y0(r,i,a,h):Ee=go.apply(t,ye);var qe=ue?Rh:ul;return hl(qe(Ee,ye),r,i)}function Zh(r,i,a,h){return r===t||Hr(r,_i[a])&&!it.call(h,a)?i:r}function el(r,i,a,h,g,v){return mt(r)&&mt(i)&&(v.set(i,r),ho(r,i,t,el,v),v.delete(i)),r}function X0(r){return Qi(r)?t:r}function tl(r,i,a,h,g,v){var I=a&R,N=r.length,M=i.length;if(N!=M&&!(I&&M>N))return!1;var Q=v.get(r),Z=v.get(i);if(Q&&Z)return Q==i&&Z==r;var ne=-1,ue=!0,ye=a&z?new Hn:t;for(v.set(r,i),v.set(i,r);++ne<N;){var Ee=r[ne],qe=i[ne];if(h)var De=I?h(qe,Ee,ne,i,r,v):h(Ee,qe,ne,r,i,v);if(De!==t){if(De)continue;ue=!1;break}if(ye){if(!xa(i,function(Ge,Qe){if(!Li(ye,Qe)&&(Ee===Ge||g(Ee,Ge,a,h,v)))return ye.push(Qe)})){ue=!1;break}}else if(!(Ee===qe||g(Ee,qe,a,h,v))){ue=!1;break}}return v.delete(r),v.delete(i),ue}function Q0(r,i,a,h,g,v,I){switch(a){case Ce:if(r.byteLength!=i.byteLength||r.byteOffset!=i.byteOffset)return!1;r=r.buffer,i=i.buffer;case Se:return!(r.byteLength!=i.byteLength||!v(new Qs(r),new Qs(i)));case B:case F:case ze:return Hr(+r,+i);case P:return r.name==i.name&&r.message==i.message;case Me:case Ne:return r==i+"";case xe:var N=Ta;case Ie:var M=h&R;if(N||(N=ks),r.size!=i.size&&!M)return!1;var Q=I.get(r);if(Q)return Q==i;h|=z,I.set(r,i);var Z=tl(N(r),N(i),h,g,v,I);return I.delete(r),Z;case $e:if(Hi)return Hi.call(r)==Hi.call(i)}return!1}function Z0(r,i,a,h,g,v){var I=a&R,N=rc(r),M=N.length,Q=rc(i),Z=Q.length;if(M!=Z&&!I)return!1;for(var ne=M;ne--;){var ue=N[ne];if(!(I?ue in i:it.call(i,ue)))return!1}var ye=v.get(r),Ee=v.get(i);if(ye&&Ee)return ye==i&&Ee==r;var qe=!0;v.set(r,i),v.set(i,r);for(var De=I;++ne<M;){ue=N[ne];var Ge=r[ue],Qe=i[ue];if(h)var Sr=I?h(Qe,Ge,ue,i,r,v):h(Ge,Qe,ue,r,i,v);if(!(Sr===t?Ge===Qe||g(Ge,Qe,a,h,v):Sr)){qe=!1;break}De||(De=ue=="constructor")}if(qe&&!De){var sr=r.constructor,xr=i.constructor;sr!=xr&&"constructor"in r&&"constructor"in i&&!(typeof sr=="function"&&sr instanceof sr&&typeof xr=="function"&&xr instanceof xr)&&(qe=!1)}return v.delete(r),v.delete(i),qe}function hn(r){return hc(al(r,t,yl),r+"")}function rc(r){return wh(r,kt,oc)}function nc(r){return wh(r,pr,rl)}var ic=io?function(r){return io.get(r)}:Dc;function bo(r){for(var i=r.name+"",a=bi[i],h=it.call(bi,i)?a.length:0;h--;){var g=a[h],v=g.func;if(v==null||v==r)return g.name}return i}function Di(r){var i=it.call(_,"placeholder")?_:r;return i.placeholder}function be(){var r=_.iteratee||wc;return r=r===wc?Sh:r,arguments.length?r(arguments[0],arguments[1]):r}function mo(r,i){var a=r.__data__;return ay(i)?a[typeof i=="string"?"string":"hash"]:a.map}function sc(r){for(var i=kt(r),a=i.length;a--;){var h=i[a],g=r[h];i[a]=[h,g,sl(g)]}return i}function kn(r,i){var a=hg(r,i);return Dh(a)?a:t}function ey(r){var i=it.call(r,qn),a=r[qn];try{r[qn]=t;var h=!0}catch{}var g=Js.call(r);return h&&(i?r[qn]=a:delete r[qn]),g}var oc=Na?function(r){return r==null?[]:(r=ut(r),wn(Na(r),function(i){return ch.call(r,i)}))}:Sc,rl=Na?function(r){for(var i=[];r;)En(i,oc(r)),r=Zs(r);return i}:Sc,Qt=nr;($a&&Qt(new $a(new ArrayBuffer(1)))!=Ce||Bi&&Qt(new Bi)!=xe||Fa&&Qt(Fa.resolve())!=pt||vi&&Qt(new vi)!=Ie||qi&&Qt(new qi)!=Pe)&&(Qt=function(r){var i=nr(r),a=i==je?r.constructor:t,h=a?Gn(a):"";if(h)switch(h){case Ug:return Ce;case jg:return xe;case Lg:return pt;case Mg:return Ie;case Bg:return Pe}return i});function ty(r,i,a){for(var h=-1,g=a.length;++h<g;){var v=a[h],I=v.size;switch(v.type){case"drop":r+=I;break;case"dropRight":i-=I;break;case"take":i=Xt(i,r+I);break;case"takeRight":r=Kt(r,i-I);break}}return{start:r,end:i}}function ry(r){var i=r.match(ht);return i?i[1].split(Lt):[]}function nl(r,i,a){i=On(i,r);for(var h=-1,g=i.length,v=!1;++h<g;){var I=Xr(i[h]);if(!(v=r!=null&&a(r,I)))break;r=r[I]}return v||++h!=g?v:(g=r==null?0:r.length,!!g&&Oo(g)&&ln(I,g)&&(Re(r)||Wn(r)))}function ny(r){var i=r.length,a=new r.constructor(i);return i&&typeof r[0]=="string"&&it.call(r,"index")&&(a.index=r.index,a.input=r.input),a}function il(r){return typeof r.constructor=="function"&&!Ji(r)?mi(Zs(r)):{}}function iy(r,i,a){var h=r.constructor;switch(i){case Se:return Za(r);case B:case F:return new h(+r);case Ce:return q0(r,a);case He:case Oe:case ke:case We:case et:case tt:case Je:case er:case hr:return Bh(r,a);case xe:return new h;case ze:case Ne:return new h(r);case Me:return z0(r);case Ie:return new h;case $e:return H0(r)}}function sy(r,i){var a=i.length;if(!a)return r;var h=a-1;return i[h]=(a>1?"& ":"")+i[h],i=i.join(a>2?", ":" "),r.replace(It,`{
/* [wrapped with `+i+`] */
`)}function oy(r){return Re(r)||Wn(r)||!!(uh&&r&&r[uh])}function ln(r,i){var a=typeof r;return i=i??V,!!i&&(a=="number"||a!="symbol"&&ua.test(r))&&r>-1&&r%1==0&&r<i}function ir(r,i,a){if(!mt(a))return!1;var h=typeof i;return(h=="number"?dr(a)&&ln(i,a.length):h=="string"&&i in a)?Hr(a[i],r):!1}function ac(r,i){if(Re(r))return!1;var a=typeof r;return a=="number"||a=="symbol"||a=="boolean"||r==null||Dr(r)?!0:Ft.test(r)||!_t.test(r)||i!=null&&r in ut(i)}function ay(r){var i=typeof r;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?r!=="__proto__":r===null}function cc(r){var i=bo(r),a=_[i];if(typeof a!="function"||!(i in Ye.prototype))return!1;if(r===a)return!0;var h=ic(a);return!!h&&r===h[0]}function cy(r){return!!sh&&sh in r}var uy=Ws?fn:xc;function Ji(r){var i=r&&r.constructor,a=typeof i=="function"&&i.prototype||_i;return r===a}function sl(r){return r===r&&!mt(r)}function ol(r,i){return function(a){return a==null?!1:a[r]===i&&(i!==t||r in ut(a))}}function hy(r){var i=xo(r,function(h){return a.size===p&&a.clear(),h}),a=i.cache;return i}function ly(r,i){var a=r[1],h=i[1],g=a|h,v=g<(K|ie|u),I=h==u&&a==j||h==u&&a==b&&r[7].length<=i[8]||h==(u|b)&&i[7].length<=i[8]&&a==j;if(!(v||I))return r;h&K&&(r[2]=i[2],g|=a&K?0:$);var N=i[3];if(N){var M=r[3];r[3]=M?zh(M,N,i[4]):N,r[4]=M?Dn(r[3],E):i[4]}return N=i[5],N&&(M=r[5],r[5]=M?Hh(M,N,i[6]):N,r[6]=M?Dn(r[5],E):i[6]),N=i[7],N&&(r[7]=N),h&u&&(r[8]=r[8]==null?i[8]:Xt(r[8],i[8])),r[9]==null&&(r[9]=i[9]),r[0]=i[0],r[1]=g,r}function fy(r){var i=[];if(r!=null)for(var a in ut(r))i.push(a);return i}function dy(r){return Js.call(r)}function al(r,i,a){return i=Kt(i===t?r.length-1:i,0),function(){for(var h=arguments,g=-1,v=Kt(h.length-i,0),I=H(v);++g<v;)I[g]=h[i+g];g=-1;for(var N=H(i+1);++g<i;)N[g]=h[g];return N[i]=a(I),Vt(r,this,N)}}function cl(r,i){return i.length<2?r:Vn(r,Nr(i,0,-1))}function py(r,i){for(var a=r.length,h=Xt(i.length,a),g=fr(r);h--;){var v=i[h];r[h]=ln(v,a)?g[v]:t}return r}function uc(r,i){if(!(i==="constructor"&&typeof r[i]=="function")&&i!="__proto__")return r[i]}var ul=ll(Rh),Xi=Cg||function(r,i){return Xe.setTimeout(r,i)},hc=ll(j0);function hl(r,i,a){var h=i+"";return hc(r,sy(h,gy(ry(h),a)))}function ll(r){var i=0,a=0;return function(){var h=Ng(),g=de-(h-a);if(a=h,g>0){if(++i>=ce)return arguments[0]}else i=0;return r.apply(t,arguments)}}function wo(r,i){var a=-1,h=r.length,g=h-1;for(i=i===t?h:i;++a<i;){var v=ka(a,g),I=r[v];r[v]=r[a],r[a]=I}return r.length=i,r}var fl=hy(function(r){var i=[];return r.charCodeAt(0)===46&&i.push(""),r.replace(Ut,function(a,h,g,v){i.push(g?v.replace(na,"$1"):h||a)}),i});function Xr(r){if(typeof r=="string"||Dr(r))return r;var i=r+"";return i=="0"&&1/r==-X?"-0":i}function Gn(r){if(r!=null){try{return Ys.call(r)}catch{}try{return r+""}catch{}}return""}function gy(r,i){return Cr(we,function(a){var h="_."+a[0];i&a[1]&&!Ks(r,h)&&r.push(h)}),r.sort()}function dl(r){if(r instanceof Ye)return r.clone();var i=new Tr(r.__wrapped__,r.__chain__);return i.__actions__=fr(r.__actions__),i.__index__=r.__index__,i.__values__=r.__values__,i}function yy(r,i,a){(a?ir(r,i,a):i===t)?i=1:i=Kt(Le(i),0);var h=r==null?0:r.length;if(!h||i<1)return[];for(var g=0,v=0,I=H(ro(h/i));g<h;)I[v++]=Nr(r,g,g+=i);return I}function _y(r){for(var i=-1,a=r==null?0:r.length,h=0,g=[];++i<a;){var v=r[i];v&&(g[h++]=v)}return g}function vy(){var r=arguments.length;if(!r)return[];for(var i=H(r-1),a=arguments[0],h=r;h--;)i[h-1]=arguments[h];return En(Re(a)?fr(a):[a],Wt(i,1))}var by=Ke(function(r,i){return Tt(r)?Vi(r,Wt(i,1,Tt,!0)):[]}),my=Ke(function(r,i){var a=$r(i);return Tt(a)&&(a=t),Tt(r)?Vi(r,Wt(i,1,Tt,!0),be(a,2)):[]}),wy=Ke(function(r,i){var a=$r(i);return Tt(a)&&(a=t),Tt(r)?Vi(r,Wt(i,1,Tt,!0),t,a):[]});function Ey(r,i,a){var h=r==null?0:r.length;return h?(i=a||i===t?1:Le(i),Nr(r,i<0?0:i,h)):[]}function Dy(r,i,a){var h=r==null?0:r.length;return h?(i=a||i===t?1:Le(i),i=h-i,Nr(r,0,i<0?0:i)):[]}function Sy(r,i){return r&&r.length?fo(r,be(i,3),!0,!0):[]}function xy(r,i){return r&&r.length?fo(r,be(i,3),!0):[]}function Iy(r,i,a,h){var g=r==null?0:r.length;return g?(a&&typeof a!="number"&&ir(r,i,a)&&(a=0,h=g),v0(r,i,a,h)):[]}function pl(r,i,a){var h=r==null?0:r.length;if(!h)return-1;var g=a==null?0:Le(a);return g<0&&(g=Kt(h+g,0)),Vs(r,be(i,3),g)}function gl(r,i,a){var h=r==null?0:r.length;if(!h)return-1;var g=h-1;return a!==t&&(g=Le(a),g=a<0?Kt(h+g,0):Xt(g,h-1)),Vs(r,be(i,3),g,!0)}function yl(r){var i=r==null?0:r.length;return i?Wt(r,1):[]}function Oy(r){var i=r==null?0:r.length;return i?Wt(r,X):[]}function Py(r,i){var a=r==null?0:r.length;return a?(i=i===t?1:Le(i),Wt(r,i)):[]}function Cy(r){for(var i=-1,a=r==null?0:r.length,h={};++i<a;){var g=r[i];h[g[0]]=g[1]}return h}function _l(r){return r&&r.length?r[0]:t}function Ay(r,i,a){var h=r==null?0:r.length;if(!h)return-1;var g=a==null?0:Le(a);return g<0&&(g=Kt(h+g,0)),di(r,i,g)}function Ty(r){var i=r==null?0:r.length;return i?Nr(r,0,-1):[]}var Ry=Ke(function(r){var i=vt(r,Xa);return i.length&&i[0]===r[0]?qa(i):[]}),Ny=Ke(function(r){var i=$r(r),a=vt(r,Xa);return i===$r(a)?i=t:a.pop(),a.length&&a[0]===r[0]?qa(a,be(i,2)):[]}),$y=Ke(function(r){var i=$r(r),a=vt(r,Xa);return i=typeof i=="function"?i:t,i&&a.pop(),a.length&&a[0]===r[0]?qa(a,t,i):[]});function Fy(r,i){return r==null?"":Tg.call(r,i)}function $r(r){var i=r==null?0:r.length;return i?r[i-1]:t}function Uy(r,i,a){var h=r==null?0:r.length;if(!h)return-1;var g=h;return a!==t&&(g=Le(a),g=g<0?Kt(h+g,0):Xt(g,h-1)),i===i?gg(r,i,g):Vs(r,Xu,g,!0)}function jy(r,i){return r&&r.length?Ph(r,Le(i)):t}var Ly=Ke(vl);function vl(r,i){return r&&r.length&&i&&i.length?Va(r,i):r}function My(r,i,a){return r&&r.length&&i&&i.length?Va(r,i,be(a,2)):r}function By(r,i,a){return r&&r.length&&i&&i.length?Va(r,i,t,a):r}var qy=hn(function(r,i){var a=r==null?0:r.length,h=ja(r,i);return Th(r,vt(i,function(g){return ln(g,a)?+g:g}).sort(qh)),h});function zy(r,i){var a=[];if(!(r&&r.length))return a;var h=-1,g=[],v=r.length;for(i=be(i,3);++h<v;){var I=r[h];i(I,h,r)&&(a.push(I),g.push(h))}return Th(r,g),a}function lc(r){return r==null?r:Fg.call(r)}function Hy(r,i,a){var h=r==null?0:r.length;return h?(a&&typeof a!="number"&&ir(r,i,a)?(i=0,a=h):(i=i==null?0:Le(i),a=a===t?h:Le(a)),Nr(r,i,a)):[]}function Ky(r,i){return lo(r,i)}function Vy(r,i,a){return Wa(r,i,be(a,2))}function ky(r,i){var a=r==null?0:r.length;if(a){var h=lo(r,i);if(h<a&&Hr(r[h],i))return h}return-1}function Gy(r,i){return lo(r,i,!0)}function Wy(r,i,a){return Wa(r,i,be(a,2),!0)}function Yy(r,i){var a=r==null?0:r.length;if(a){var h=lo(r,i,!0)-1;if(Hr(r[h],i))return h}return-1}function Jy(r){return r&&r.length?Nh(r):[]}function Xy(r,i){return r&&r.length?Nh(r,be(i,2)):[]}function Qy(r){var i=r==null?0:r.length;return i?Nr(r,1,i):[]}function Zy(r,i,a){return r&&r.length?(i=a||i===t?1:Le(i),Nr(r,0,i<0?0:i)):[]}function e_(r,i,a){var h=r==null?0:r.length;return h?(i=a||i===t?1:Le(i),i=h-i,Nr(r,i<0?0:i,h)):[]}function t_(r,i){return r&&r.length?fo(r,be(i,3),!1,!0):[]}function r_(r,i){return r&&r.length?fo(r,be(i,3)):[]}var n_=Ke(function(r){return In(Wt(r,1,Tt,!0))}),i_=Ke(function(r){var i=$r(r);return Tt(i)&&(i=t),In(Wt(r,1,Tt,!0),be(i,2))}),s_=Ke(function(r){var i=$r(r);return i=typeof i=="function"?i:t,In(Wt(r,1,Tt,!0),t,i)});function o_(r){return r&&r.length?In(r):[]}function a_(r,i){return r&&r.length?In(r,be(i,2)):[]}function c_(r,i){return i=typeof i=="function"?i:t,r&&r.length?In(r,t,i):[]}function fc(r){if(!(r&&r.length))return[];var i=0;return r=wn(r,function(a){if(Tt(a))return i=Kt(a.length,i),!0}),Ca(i,function(a){return vt(r,Ia(a))})}function bl(r,i){if(!(r&&r.length))return[];var a=fc(r);return i==null?a:vt(a,function(h){return Vt(i,t,h)})}var u_=Ke(function(r,i){return Tt(r)?Vi(r,i):[]}),h_=Ke(function(r){return Ja(wn(r,Tt))}),l_=Ke(function(r){var i=$r(r);return Tt(i)&&(i=t),Ja(wn(r,Tt),be(i,2))}),f_=Ke(function(r){var i=$r(r);return i=typeof i=="function"?i:t,Ja(wn(r,Tt),t,i)}),d_=Ke(fc);function p_(r,i){return jh(r||[],i||[],Ki)}function g_(r,i){return jh(r||[],i||[],Wi)}var y_=Ke(function(r){var i=r.length,a=i>1?r[i-1]:t;return a=typeof a=="function"?(r.pop(),a):t,bl(r,a)});function ml(r){var i=_(r);return i.__chain__=!0,i}function __(r,i){return i(r),r}function Eo(r,i){return i(r)}var v_=hn(function(r){var i=r.length,a=i?r[0]:0,h=this.__wrapped__,g=function(v){return ja(v,r)};return i>1||this.__actions__.length||!(h instanceof Ye)||!ln(a)?this.thru(g):(h=h.slice(a,+a+(i?1:0)),h.__actions__.push({func:Eo,args:[g],thisArg:t}),new Tr(h,this.__chain__).thru(function(v){return i&&!v.length&&v.push(t),v}))});function b_(){return ml(this)}function m_(){return new Tr(this.value(),this.__chain__)}function w_(){this.__values__===t&&(this.__values__=$l(this.value()));var r=this.__index__>=this.__values__.length,i=r?t:this.__values__[this.__index__++];return{done:r,value:i}}function E_(){return this}function D_(r){for(var i,a=this;a instanceof oo;){var h=dl(a);h.__index__=0,h.__values__=t,i?g.__wrapped__=h:i=h;var g=h;a=a.__wrapped__}return g.__wrapped__=r,i}function S_(){var r=this.__wrapped__;if(r instanceof Ye){var i=r;return this.__actions__.length&&(i=new Ye(this)),i=i.reverse(),i.__actions__.push({func:Eo,args:[lc],thisArg:t}),new Tr(i,this.__chain__)}return this.thru(lc)}function x_(){return Uh(this.__wrapped__,this.__actions__)}var I_=po(function(r,i,a){it.call(r,a)?++r[a]:cn(r,a,1)});function O_(r,i,a){var h=Re(r)?Yu:_0;return a&&ir(r,i,a)&&(i=t),h(r,be(i,3))}function P_(r,i){var a=Re(r)?wn:bh;return a(r,be(i,3))}var C_=Gh(pl),A_=Gh(gl);function T_(r,i){return Wt(Do(r,i),1)}function R_(r,i){return Wt(Do(r,i),X)}function N_(r,i,a){return a=a===t?1:Le(a),Wt(Do(r,i),a)}function wl(r,i){var a=Re(r)?Cr:xn;return a(r,be(i,3))}function El(r,i){var a=Re(r)?Qp:vh;return a(r,be(i,3))}var $_=po(function(r,i,a){it.call(r,a)?r[a].push(i):cn(r,a,[i])});function F_(r,i,a,h){r=dr(r)?r:xi(r),a=a&&!h?Le(a):0;var g=r.length;return a<0&&(a=Kt(g+a,0)),Po(r)?a<=g&&r.indexOf(i,a)>-1:!!g&&di(r,i,a)>-1}var U_=Ke(function(r,i,a){var h=-1,g=typeof i=="function",v=dr(r)?H(r.length):[];return xn(r,function(I){v[++h]=g?Vt(i,I,a):ki(I,i,a)}),v}),j_=po(function(r,i,a){cn(r,a,i)});function Do(r,i){var a=Re(r)?vt:xh;return a(r,be(i,3))}function L_(r,i,a,h){return r==null?[]:(Re(i)||(i=i==null?[]:[i]),a=h?t:a,Re(a)||(a=a==null?[]:[a]),Ch(r,i,a))}var M_=po(function(r,i,a){r[a?0:1].push(i)},function(){return[[],[]]});function B_(r,i,a){var h=Re(r)?Sa:Zu,g=arguments.length<3;return h(r,be(i,4),a,g,xn)}function q_(r,i,a){var h=Re(r)?Zp:Zu,g=arguments.length<3;return h(r,be(i,4),a,g,vh)}function z_(r,i){var a=Re(r)?wn:bh;return a(r,Io(be(i,3)))}function H_(r){var i=Re(r)?ph:F0;return i(r)}function K_(r,i,a){(a?ir(r,i,a):i===t)?i=1:i=Le(i);var h=Re(r)?f0:U0;return h(r,i)}function V_(r){var i=Re(r)?d0:L0;return i(r)}function k_(r){if(r==null)return 0;if(dr(r))return Po(r)?gi(r):r.length;var i=Qt(r);return i==xe||i==Ie?r.size:Ha(r).length}function G_(r,i,a){var h=Re(r)?xa:M0;return a&&ir(r,i,a)&&(i=t),h(r,be(i,3))}var W_=Ke(function(r,i){if(r==null)return[];var a=i.length;return a>1&&ir(r,i[0],i[1])?i=[]:a>2&&ir(i[0],i[1],i[2])&&(i=[i[0]]),Ch(r,Wt(i,1),[])}),So=Pg||function(){return Xe.Date.now()};function Y_(r,i){if(typeof i!="function")throw new Ar(l);return r=Le(r),function(){if(--r<1)return i.apply(this,arguments)}}function Dl(r,i,a){return i=a?t:i,i=r&&i==null?r.length:i,un(r,u,t,t,t,t,i)}function Sl(r,i){var a;if(typeof i!="function")throw new Ar(l);return r=Le(r),function(){return--r>0&&(a=i.apply(this,arguments)),r<=1&&(i=t),a}}var dc=Ke(function(r,i,a){var h=K;if(a.length){var g=Dn(a,Di(dc));h|=C}return un(r,h,i,a,g)}),xl=Ke(function(r,i,a){var h=K|ie;if(a.length){var g=Dn(a,Di(xl));h|=C}return un(i,h,r,a,g)});function Il(r,i,a){i=a?t:i;var h=un(r,j,t,t,t,t,t,i);return h.placeholder=Il.placeholder,h}function Ol(r,i,a){i=a?t:i;var h=un(r,x,t,t,t,t,t,i);return h.placeholder=Ol.placeholder,h}function Pl(r,i,a){var h,g,v,I,N,M,Q=0,Z=!1,ne=!1,ue=!0;if(typeof r!="function")throw new Ar(l);i=Fr(i)||0,mt(a)&&(Z=!!a.leading,ne="maxWait"in a,v=ne?Kt(Fr(a.maxWait)||0,i):v,ue="trailing"in a?!!a.trailing:ue);function ye(Rt){var Kr=h,pn=g;return h=g=t,Q=Rt,I=r.apply(pn,Kr),I}function Ee(Rt){return Q=Rt,N=Xi(Ge,i),Z?ye(Rt):I}function qe(Rt){var Kr=Rt-M,pn=Rt-Q,Gl=i-Kr;return ne?Xt(Gl,v-pn):Gl}function De(Rt){var Kr=Rt-M,pn=Rt-Q;return M===t||Kr>=i||Kr<0||ne&&pn>=v}function Ge(){var Rt=So();if(De(Rt))return Qe(Rt);N=Xi(Ge,qe(Rt))}function Qe(Rt){return N=t,ue&&h?ye(Rt):(h=g=t,I)}function Sr(){N!==t&&Lh(N),Q=0,h=M=g=N=t}function sr(){return N===t?I:Qe(So())}function xr(){var Rt=So(),Kr=De(Rt);if(h=arguments,g=this,M=Rt,Kr){if(N===t)return Ee(M);if(ne)return Lh(N),N=Xi(Ge,i),ye(M)}return N===t&&(N=Xi(Ge,i)),I}return xr.cancel=Sr,xr.flush=sr,xr}var J_=Ke(function(r,i){return _h(r,1,i)}),X_=Ke(function(r,i,a){return _h(r,Fr(i)||0,a)});function Q_(r){return un(r,G)}function xo(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new Ar(l);var a=function(){var h=arguments,g=i?i.apply(this,h):h[0],v=a.cache;if(v.has(g))return v.get(g);var I=r.apply(this,h);return a.cache=v.set(g,I)||v,I};return a.cache=new(xo.Cache||an),a}xo.Cache=an;function Io(r){if(typeof r!="function")throw new Ar(l);return function(){var i=arguments;switch(i.length){case 0:return!r.call(this);case 1:return!r.call(this,i[0]);case 2:return!r.call(this,i[0],i[1]);case 3:return!r.call(this,i[0],i[1],i[2])}return!r.apply(this,i)}}function Z_(r){return Sl(2,r)}var e1=B0(function(r,i){i=i.length==1&&Re(i[0])?vt(i[0],wr(be())):vt(Wt(i,1),wr(be()));var a=i.length;return Ke(function(h){for(var g=-1,v=Xt(h.length,a);++g<v;)h[g]=i[g].call(this,h[g]);return Vt(r,this,h)})}),pc=Ke(function(r,i){var a=Dn(i,Di(pc));return un(r,C,t,i,a)}),Cl=Ke(function(r,i){var a=Dn(i,Di(Cl));return un(r,w,t,i,a)}),t1=hn(function(r,i){return un(r,b,t,t,t,i)});function r1(r,i){if(typeof r!="function")throw new Ar(l);return i=i===t?i:Le(i),Ke(r,i)}function n1(r,i){if(typeof r!="function")throw new Ar(l);return i=i==null?0:Kt(Le(i),0),Ke(function(a){var h=a[i],g=Pn(a,0,i);return h&&En(g,h),Vt(r,this,g)})}function i1(r,i,a){var h=!0,g=!0;if(typeof r!="function")throw new Ar(l);return mt(a)&&(h="leading"in a?!!a.leading:h,g="trailing"in a?!!a.trailing:g),Pl(r,i,{leading:h,maxWait:i,trailing:g})}function s1(r){return Dl(r,1)}function o1(r,i){return pc(Qa(i),r)}function a1(){if(!arguments.length)return[];var r=arguments[0];return Re(r)?r:[r]}function c1(r){return Rr(r,T)}function u1(r,i){return i=typeof i=="function"?i:t,Rr(r,T,i)}function h1(r){return Rr(r,A|T)}function l1(r,i){return i=typeof i=="function"?i:t,Rr(r,A|T,i)}function f1(r,i){return i==null||yh(r,i,kt(i))}function Hr(r,i){return r===i||r!==r&&i!==i}var d1=vo(Ba),p1=vo(function(r,i){return r>=i}),Wn=Eh(function(){return arguments}())?Eh:function(r){return Ot(r)&&it.call(r,"callee")&&!ch.call(r,"callee")},Re=H.isArray,g1=rr?wr(rr):D0;function dr(r){return r!=null&&Oo(r.length)&&!fn(r)}function Tt(r){return Ot(r)&&dr(r)}function y1(r){return r===!0||r===!1||Ot(r)&&nr(r)==B}var Cn=Ag||xc,_1=Br?wr(Br):S0;function v1(r){return Ot(r)&&r.nodeType===1&&!Qi(r)}function b1(r){if(r==null)return!0;if(dr(r)&&(Re(r)||typeof r=="string"||typeof r.splice=="function"||Cn(r)||Si(r)||Wn(r)))return!r.length;var i=Qt(r);if(i==xe||i==Ie)return!r.size;if(Ji(r))return!Ha(r).length;for(var a in r)if(it.call(r,a))return!1;return!0}function m1(r,i){return Gi(r,i)}function w1(r,i,a){a=typeof a=="function"?a:t;var h=a?a(r,i):t;return h===t?Gi(r,i,t,a):!!h}function gc(r){if(!Ot(r))return!1;var i=nr(r);return i==P||i==d||typeof r.message=="string"&&typeof r.name=="string"&&!Qi(r)}function E1(r){return typeof r=="number"&&hh(r)}function fn(r){if(!mt(r))return!1;var i=nr(r);return i==ae||i==fe||i==q||i==gt}function Al(r){return typeof r=="number"&&r==Le(r)}function Oo(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=V}function mt(r){var i=typeof r;return r!=null&&(i=="object"||i=="function")}function Ot(r){return r!=null&&typeof r=="object"}var Tl=Pr?wr(Pr):I0;function D1(r,i){return r===i||za(r,i,sc(i))}function S1(r,i,a){return a=typeof a=="function"?a:t,za(r,i,sc(i),a)}function x1(r){return Rl(r)&&r!=+r}function I1(r){if(uy(r))throw new Ae(c);return Dh(r)}function O1(r){return r===null}function P1(r){return r==null}function Rl(r){return typeof r=="number"||Ot(r)&&nr(r)==ze}function Qi(r){if(!Ot(r)||nr(r)!=je)return!1;var i=Zs(r);if(i===null)return!0;var a=it.call(i,"constructor")&&i.constructor;return typeof a=="function"&&a instanceof a&&Ys.call(a)==Sg}var yc=Wr?wr(Wr):O0;function C1(r){return Al(r)&&r>=-V&&r<=V}var Nl=ji?wr(ji):P0;function Po(r){return typeof r=="string"||!Re(r)&&Ot(r)&&nr(r)==Ne}function Dr(r){return typeof r=="symbol"||Ot(r)&&nr(r)==$e}var Si=Bn?wr(Bn):C0;function A1(r){return r===t}function T1(r){return Ot(r)&&Qt(r)==Pe}function R1(r){return Ot(r)&&nr(r)==Fe}var N1=vo(Ka),$1=vo(function(r,i){return r<=i});function $l(r){if(!r)return[];if(dr(r))return Po(r)?qr(r):fr(r);if(Mi&&r[Mi])return fg(r[Mi]());var i=Qt(r),a=i==xe?Ta:i==Ie?ks:xi;return a(r)}function dn(r){if(!r)return r===0?r:0;if(r=Fr(r),r===X||r===-X){var i=r<0?-1:1;return i*k}return r===r?r:0}function Le(r){var i=dn(r),a=i%1;return i===i?a?i-a:i:0}function Fl(r){return r?Kn(Le(r),0,re):0}function Fr(r){if(typeof r=="number")return r;if(Dr(r))return J;if(mt(r)){var i=typeof r.valueOf=="function"?r.valueOf():r;r=mt(i)?i+"":i}if(typeof r!="string")return r===0?r:+r;r=eh(r);var a=oa.test(r);return a||ca.test(r)?Te(r.slice(2),a?2:8):sa.test(r)?J:+r}function Ul(r){return Jr(r,pr(r))}function F1(r){return r?Kn(Le(r),-V,V):r===0?r:0}function nt(r){return r==null?"":Er(r)}var U1=wi(function(r,i){if(Ji(i)||dr(i)){Jr(i,kt(i),r);return}for(var a in i)it.call(i,a)&&Ki(r,a,i[a])}),jl=wi(function(r,i){Jr(i,pr(i),r)}),Co=wi(function(r,i,a,h){Jr(i,pr(i),r,h)}),j1=wi(function(r,i,a,h){Jr(i,kt(i),r,h)}),L1=hn(ja);function M1(r,i){var a=mi(r);return i==null?a:gh(a,i)}var B1=Ke(function(r,i){r=ut(r);var a=-1,h=i.length,g=h>2?i[2]:t;for(g&&ir(i[0],i[1],g)&&(h=1);++a<h;)for(var v=i[a],I=pr(v),N=-1,M=I.length;++N<M;){var Q=I[N],Z=r[Q];(Z===t||Hr(Z,_i[Q])&&!it.call(r,Q))&&(r[Q]=v[Q])}return r}),q1=Ke(function(r){return r.push(t,el),Vt(Ll,t,r)});function z1(r,i){return Ju(r,be(i,3),Yr)}function H1(r,i){return Ju(r,be(i,3),Ma)}function K1(r,i){return r==null?r:La(r,be(i,3),pr)}function V1(r,i){return r==null?r:mh(r,be(i,3),pr)}function k1(r,i){return r&&Yr(r,be(i,3))}function G1(r,i){return r&&Ma(r,be(i,3))}function W1(r){return r==null?[]:uo(r,kt(r))}function Y1(r){return r==null?[]:uo(r,pr(r))}function _c(r,i,a){var h=r==null?t:Vn(r,i);return h===t?a:h}function J1(r,i){return r!=null&&nl(r,i,b0)}function vc(r,i){return r!=null&&nl(r,i,m0)}var X1=Yh(function(r,i,a){i!=null&&typeof i.toString!="function"&&(i=Js.call(i)),r[i]=a},mc(gr)),Q1=Yh(function(r,i,a){i!=null&&typeof i.toString!="function"&&(i=Js.call(i)),it.call(r,i)?r[i].push(a):r[i]=[a]},be),Z1=Ke(ki);function kt(r){return dr(r)?dh(r):Ha(r)}function pr(r){return dr(r)?dh(r,!0):A0(r)}function ev(r,i){var a={};return i=be(i,3),Yr(r,function(h,g,v){cn(a,i(h,g,v),h)}),a}function tv(r,i){var a={};return i=be(i,3),Yr(r,function(h,g,v){cn(a,g,i(h,g,v))}),a}var rv=wi(function(r,i,a){ho(r,i,a)}),Ll=wi(function(r,i,a,h){ho(r,i,a,h)}),nv=hn(function(r,i){var a={};if(r==null)return a;var h=!1;i=vt(i,function(v){return v=On(v,r),h||(h=v.length>1),v}),Jr(r,nc(r),a),h&&(a=Rr(a,A|S|T,X0));for(var g=i.length;g--;)Ya(a,i[g]);return a});function iv(r,i){return Ml(r,Io(be(i)))}var sv=hn(function(r,i){return r==null?{}:R0(r,i)});function Ml(r,i){if(r==null)return{};var a=vt(nc(r),function(h){return[h]});return i=be(i),Ah(r,a,function(h,g){return i(h,g[0])})}function ov(r,i,a){i=On(i,r);var h=-1,g=i.length;for(g||(g=1,r=t);++h<g;){var v=r==null?t:r[Xr(i[h])];v===t&&(h=g,v=a),r=fn(v)?v.call(r):v}return r}function av(r,i,a){return r==null?r:Wi(r,i,a)}function cv(r,i,a,h){return h=typeof h=="function"?h:t,r==null?r:Wi(r,i,a,h)}var Bl=Qh(kt),ql=Qh(pr);function uv(r,i,a){var h=Re(r),g=h||Cn(r)||Si(r);if(i=be(i,4),a==null){var v=r&&r.constructor;g?a=h?new v:[]:mt(r)?a=fn(v)?mi(Zs(r)):{}:a={}}return(g?Cr:Yr)(r,function(I,N,M){return i(a,I,N,M)}),a}function hv(r,i){return r==null?!0:Ya(r,i)}function lv(r,i,a){return r==null?r:Fh(r,i,Qa(a))}function fv(r,i,a,h){return h=typeof h=="function"?h:t,r==null?r:Fh(r,i,Qa(a),h)}function xi(r){return r==null?[]:Aa(r,kt(r))}function dv(r){return r==null?[]:Aa(r,pr(r))}function pv(r,i,a){return a===t&&(a=i,i=t),a!==t&&(a=Fr(a),a=a===a?a:0),i!==t&&(i=Fr(i),i=i===i?i:0),Kn(Fr(r),i,a)}function gv(r,i,a){return i=dn(i),a===t?(a=i,i=0):a=dn(a),r=Fr(r),w0(r,i,a)}function yv(r,i,a){if(a&&typeof a!="boolean"&&ir(r,i,a)&&(i=a=t),a===t&&(typeof i=="boolean"?(a=i,i=t):typeof r=="boolean"&&(a=r,r=t)),r===t&&i===t?(r=0,i=1):(r=dn(r),i===t?(i=r,r=0):i=dn(i)),r>i){var h=r;r=i,i=h}if(a||r%1||i%1){var g=lh();return Xt(r+g*(i-r+at("1e-"+((g+"").length-1))),i)}return ka(r,i)}var _v=Ei(function(r,i,a){return i=i.toLowerCase(),r+(a?zl(i):i)});function zl(r){return bc(nt(r).toLowerCase())}function Hl(r){return r=nt(r),r&&r.replace(nn,ag).replace(wa,"")}function vv(r,i,a){r=nt(r),i=Er(i);var h=r.length;a=a===t?h:Kn(Le(a),0,h);var g=a;return a-=i.length,a>=0&&r.slice(a,g)==i}function bv(r){return r=nt(r),r&&yt.test(r)?r.replace(Fn,cg):r}function mv(r){return r=nt(r),r&&jt.test(r)?r.replace(St,"\\$&"):r}var wv=Ei(function(r,i,a){return r+(a?"-":"")+i.toLowerCase()}),Ev=Ei(function(r,i,a){return r+(a?" ":"")+i.toLowerCase()}),Dv=kh("toLowerCase");function Sv(r,i,a){r=nt(r),i=Le(i);var h=i?gi(r):0;if(!i||h>=i)return r;var g=(i-h)/2;return _o(no(g),a)+r+_o(ro(g),a)}function xv(r,i,a){r=nt(r),i=Le(i);var h=i?gi(r):0;return i&&h<i?r+_o(i-h,a):r}function Iv(r,i,a){r=nt(r),i=Le(i);var h=i?gi(r):0;return i&&h<i?_o(i-h,a)+r:r}function Ov(r,i,a){return a||i==null?i=0:i&&(i=+i),$g(nt(r).replace(xt,""),i||0)}function Pv(r,i,a){return(a?ir(r,i,a):i===t)?i=1:i=Le(i),Ga(nt(r),i)}function Cv(){var r=arguments,i=nt(r[0]);return r.length<3?i:i.replace(r[1],r[2])}var Av=Ei(function(r,i,a){return r+(a?"_":"")+i.toLowerCase()});function Tv(r,i,a){return a&&typeof a!="number"&&ir(r,i,a)&&(i=a=t),a=a===t?re:a>>>0,a?(r=nt(r),r&&(typeof i=="string"||i!=null&&!yc(i))&&(i=Er(i),!i&&pi(r))?Pn(qr(r),0,a):r.split(i,a)):[]}var Rv=Ei(function(r,i,a){return r+(a?" ":"")+bc(i)});function Nv(r,i,a){return r=nt(r),a=a==null?0:Kn(Le(a),0,r.length),i=Er(i),r.slice(a,a+i.length)==i}function $v(r,i,a){var h=_.templateSettings;a&&ir(r,i,a)&&(i=t),r=nt(r),i=Co({},i,h,Zh);var g=Co({},i.imports,h.imports,Zh),v=kt(g),I=Aa(g,v),N,M,Q=0,Z=i.interpolate||oi,ne="__p += '",ue=Ra((i.escape||oi).source+"|"+Z.source+"|"+(Z===bt?ia:oi).source+"|"+(i.evaluate||oi).source+"|$","g"),ye="//# sourceURL="+(it.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ea+"]")+`
`;r.replace(ue,function(De,Ge,Qe,Sr,sr,xr){return Qe||(Qe=Sr),ne+=r.slice(Q,xr).replace(ha,ug),Ge&&(N=!0,ne+=`' +
__e(`+Ge+`) +
'`),sr&&(M=!0,ne+=`';
`+sr+`;
__p += '`),Qe&&(ne+=`' +
((__t = (`+Qe+`)) == null ? '' : __t) +
'`),Q=xr+De.length,De}),ne+=`';
`;var Ee=it.call(i,"variable")&&i.variable;if(!Ee)ne=`with (obj) {
`+ne+`
}
`;else if(ra.test(Ee))throw new Ae(f);ne=(M?ne.replace(kr,""):ne).replace(tr,"$1").replace(rn,"$1;"),ne="function("+(Ee||"obj")+`) {
`+(Ee?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(N?", __e = _.escape":"")+(M?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ne+`return __p
}`;var qe=Vl(function(){return rt(v,ye+"return "+ne).apply(t,I)});if(qe.source=ne,gc(qe))throw qe;return qe}function Fv(r){return nt(r).toLowerCase()}function Uv(r){return nt(r).toUpperCase()}function jv(r,i,a){if(r=nt(r),r&&(a||i===t))return eh(r);if(!r||!(i=Er(i)))return r;var h=qr(r),g=qr(i),v=th(h,g),I=rh(h,g)+1;return Pn(h,v,I).join("")}function Lv(r,i,a){if(r=nt(r),r&&(a||i===t))return r.slice(0,ih(r)+1);if(!r||!(i=Er(i)))return r;var h=qr(r),g=rh(h,qr(i))+1;return Pn(h,0,g).join("")}function Mv(r,i,a){if(r=nt(r),r&&(a||i===t))return r.replace(xt,"");if(!r||!(i=Er(i)))return r;var h=qr(r),g=th(h,qr(i));return Pn(h,g).join("")}function Bv(r,i){var a=W,h=se;if(mt(i)){var g="separator"in i?i.separator:g;a="length"in i?Le(i.length):a,h="omission"in i?Er(i.omission):h}r=nt(r);var v=r.length;if(pi(r)){var I=qr(r);v=I.length}if(a>=v)return r;var N=a-gi(h);if(N<1)return h;var M=I?Pn(I,0,N).join(""):r.slice(0,N);if(g===t)return M+h;if(I&&(N+=M.length-N),yc(g)){if(r.slice(N).search(g)){var Q,Z=M;for(g.global||(g=Ra(g.source,nt(Or.exec(g))+"g")),g.lastIndex=0;Q=g.exec(Z);)var ne=Q.index;M=M.slice(0,ne===t?N:ne)}}else if(r.indexOf(Er(g),N)!=N){var ue=M.lastIndexOf(g);ue>-1&&(M=M.slice(0,ue))}return M+h}function qv(r){return r=nt(r),r&&wt.test(r)?r.replace(bn,yg):r}var zv=Ei(function(r,i,a){return r+(a?" ":"")+i.toUpperCase()}),bc=kh("toUpperCase");function Kl(r,i,a){return r=nt(r),i=a?t:i,i===t?lg(r)?bg(r):rg(r):r.match(i)||[]}var Vl=Ke(function(r,i){try{return Vt(r,t,i)}catch(a){return gc(a)?a:new Ae(a)}}),Hv=hn(function(r,i){return Cr(i,function(a){a=Xr(a),cn(r,a,dc(r[a],r))}),r});function Kv(r){var i=r==null?0:r.length,a=be();return r=i?vt(r,function(h){if(typeof h[1]!="function")throw new Ar(l);return[a(h[0]),h[1]]}):[],Ke(function(h){for(var g=-1;++g<i;){var v=r[g];if(Vt(v[0],this,h))return Vt(v[1],this,h)}})}function Vv(r){return y0(Rr(r,A))}function mc(r){return function(){return r}}function kv(r,i){return r==null||r!==r?i:r}var Gv=Wh(),Wv=Wh(!0);function gr(r){return r}function wc(r){return Sh(typeof r=="function"?r:Rr(r,A))}function Yv(r){return Ih(Rr(r,A))}function Jv(r,i){return Oh(r,Rr(i,A))}var Xv=Ke(function(r,i){return function(a){return ki(a,r,i)}}),Qv=Ke(function(r,i){return function(a){return ki(r,a,i)}});function Ec(r,i,a){var h=kt(i),g=uo(i,h);a==null&&!(mt(i)&&(g.length||!h.length))&&(a=i,i=r,r=this,g=uo(i,kt(i)));var v=!(mt(a)&&"chain"in a)||!!a.chain,I=fn(r);return Cr(g,function(N){var M=i[N];r[N]=M,I&&(r.prototype[N]=function(){var Q=this.__chain__;if(v||Q){var Z=r(this.__wrapped__),ne=Z.__actions__=fr(this.__actions__);return ne.push({func:M,args:arguments,thisArg:r}),Z.__chain__=Q,Z}return M.apply(r,En([this.value()],arguments))})}),r}function Zv(){return Xe._===this&&(Xe._=xg),this}function Dc(){}function eb(r){return r=Le(r),Ke(function(i){return Ph(i,r)})}var tb=ec(vt),rb=ec(Yu),nb=ec(xa);function kl(r){return ac(r)?Ia(Xr(r)):N0(r)}function ib(r){return function(i){return r==null?t:Vn(r,i)}}var sb=Jh(),ob=Jh(!0);function Sc(){return[]}function xc(){return!1}function ab(){return{}}function cb(){return""}function ub(){return!0}function hb(r,i){if(r=Le(r),r<1||r>V)return[];var a=re,h=Xt(r,re);i=be(i),r-=re;for(var g=Ca(h,i);++a<r;)i(a);return g}function lb(r){return Re(r)?vt(r,Xr):Dr(r)?[r]:fr(fl(nt(r)))}function fb(r){var i=++Dg;return nt(r)+i}var db=yo(function(r,i){return r+i},0),pb=tc("ceil"),gb=yo(function(r,i){return r/i},1),yb=tc("floor");function _b(r){return r&&r.length?co(r,gr,Ba):t}function vb(r,i){return r&&r.length?co(r,be(i,2),Ba):t}function bb(r){return Qu(r,gr)}function mb(r,i){return Qu(r,be(i,2))}function wb(r){return r&&r.length?co(r,gr,Ka):t}function Eb(r,i){return r&&r.length?co(r,be(i,2),Ka):t}var Db=yo(function(r,i){return r*i},1),Sb=tc("round"),xb=yo(function(r,i){return r-i},0);function Ib(r){return r&&r.length?Pa(r,gr):0}function Ob(r,i){return r&&r.length?Pa(r,be(i,2)):0}return _.after=Y_,_.ary=Dl,_.assign=U1,_.assignIn=jl,_.assignInWith=Co,_.assignWith=j1,_.at=L1,_.before=Sl,_.bind=dc,_.bindAll=Hv,_.bindKey=xl,_.castArray=a1,_.chain=ml,_.chunk=yy,_.compact=_y,_.concat=vy,_.cond=Kv,_.conforms=Vv,_.constant=mc,_.countBy=I_,_.create=M1,_.curry=Il,_.curryRight=Ol,_.debounce=Pl,_.defaults=B1,_.defaultsDeep=q1,_.defer=J_,_.delay=X_,_.difference=by,_.differenceBy=my,_.differenceWith=wy,_.drop=Ey,_.dropRight=Dy,_.dropRightWhile=Sy,_.dropWhile=xy,_.fill=Iy,_.filter=P_,_.flatMap=T_,_.flatMapDeep=R_,_.flatMapDepth=N_,_.flatten=yl,_.flattenDeep=Oy,_.flattenDepth=Py,_.flip=Q_,_.flow=Gv,_.flowRight=Wv,_.fromPairs=Cy,_.functions=W1,_.functionsIn=Y1,_.groupBy=$_,_.initial=Ty,_.intersection=Ry,_.intersectionBy=Ny,_.intersectionWith=$y,_.invert=X1,_.invertBy=Q1,_.invokeMap=U_,_.iteratee=wc,_.keyBy=j_,_.keys=kt,_.keysIn=pr,_.map=Do,_.mapKeys=ev,_.mapValues=tv,_.matches=Yv,_.matchesProperty=Jv,_.memoize=xo,_.merge=rv,_.mergeWith=Ll,_.method=Xv,_.methodOf=Qv,_.mixin=Ec,_.negate=Io,_.nthArg=eb,_.omit=nv,_.omitBy=iv,_.once=Z_,_.orderBy=L_,_.over=tb,_.overArgs=e1,_.overEvery=rb,_.overSome=nb,_.partial=pc,_.partialRight=Cl,_.partition=M_,_.pick=sv,_.pickBy=Ml,_.property=kl,_.propertyOf=ib,_.pull=Ly,_.pullAll=vl,_.pullAllBy=My,_.pullAllWith=By,_.pullAt=qy,_.range=sb,_.rangeRight=ob,_.rearg=t1,_.reject=z_,_.remove=zy,_.rest=r1,_.reverse=lc,_.sampleSize=K_,_.set=av,_.setWith=cv,_.shuffle=V_,_.slice=Hy,_.sortBy=W_,_.sortedUniq=Jy,_.sortedUniqBy=Xy,_.split=Tv,_.spread=n1,_.tail=Qy,_.take=Zy,_.takeRight=e_,_.takeRightWhile=t_,_.takeWhile=r_,_.tap=__,_.throttle=i1,_.thru=Eo,_.toArray=$l,_.toPairs=Bl,_.toPairsIn=ql,_.toPath=lb,_.toPlainObject=Ul,_.transform=uv,_.unary=s1,_.union=n_,_.unionBy=i_,_.unionWith=s_,_.uniq=o_,_.uniqBy=a_,_.uniqWith=c_,_.unset=hv,_.unzip=fc,_.unzipWith=bl,_.update=lv,_.updateWith=fv,_.values=xi,_.valuesIn=dv,_.without=u_,_.words=Kl,_.wrap=o1,_.xor=h_,_.xorBy=l_,_.xorWith=f_,_.zip=d_,_.zipObject=p_,_.zipObjectDeep=g_,_.zipWith=y_,_.entries=Bl,_.entriesIn=ql,_.extend=jl,_.extendWith=Co,Ec(_,_),_.add=db,_.attempt=Vl,_.camelCase=_v,_.capitalize=zl,_.ceil=pb,_.clamp=pv,_.clone=c1,_.cloneDeep=h1,_.cloneDeepWith=l1,_.cloneWith=u1,_.conformsTo=f1,_.deburr=Hl,_.defaultTo=kv,_.divide=gb,_.endsWith=vv,_.eq=Hr,_.escape=bv,_.escapeRegExp=mv,_.every=O_,_.find=C_,_.findIndex=pl,_.findKey=z1,_.findLast=A_,_.findLastIndex=gl,_.findLastKey=H1,_.floor=yb,_.forEach=wl,_.forEachRight=El,_.forIn=K1,_.forInRight=V1,_.forOwn=k1,_.forOwnRight=G1,_.get=_c,_.gt=d1,_.gte=p1,_.has=J1,_.hasIn=vc,_.head=_l,_.identity=gr,_.includes=F_,_.indexOf=Ay,_.inRange=gv,_.invoke=Z1,_.isArguments=Wn,_.isArray=Re,_.isArrayBuffer=g1,_.isArrayLike=dr,_.isArrayLikeObject=Tt,_.isBoolean=y1,_.isBuffer=Cn,_.isDate=_1,_.isElement=v1,_.isEmpty=b1,_.isEqual=m1,_.isEqualWith=w1,_.isError=gc,_.isFinite=E1,_.isFunction=fn,_.isInteger=Al,_.isLength=Oo,_.isMap=Tl,_.isMatch=D1,_.isMatchWith=S1,_.isNaN=x1,_.isNative=I1,_.isNil=P1,_.isNull=O1,_.isNumber=Rl,_.isObject=mt,_.isObjectLike=Ot,_.isPlainObject=Qi,_.isRegExp=yc,_.isSafeInteger=C1,_.isSet=Nl,_.isString=Po,_.isSymbol=Dr,_.isTypedArray=Si,_.isUndefined=A1,_.isWeakMap=T1,_.isWeakSet=R1,_.join=Fy,_.kebabCase=wv,_.last=$r,_.lastIndexOf=Uy,_.lowerCase=Ev,_.lowerFirst=Dv,_.lt=N1,_.lte=$1,_.max=_b,_.maxBy=vb,_.mean=bb,_.meanBy=mb,_.min=wb,_.minBy=Eb,_.stubArray=Sc,_.stubFalse=xc,_.stubObject=ab,_.stubString=cb,_.stubTrue=ub,_.multiply=Db,_.nth=jy,_.noConflict=Zv,_.noop=Dc,_.now=So,_.pad=Sv,_.padEnd=xv,_.padStart=Iv,_.parseInt=Ov,_.random=yv,_.reduce=B_,_.reduceRight=q_,_.repeat=Pv,_.replace=Cv,_.result=ov,_.round=Sb,_.runInContext=L,_.sample=H_,_.size=k_,_.snakeCase=Av,_.some=G_,_.sortedIndex=Ky,_.sortedIndexBy=Vy,_.sortedIndexOf=ky,_.sortedLastIndex=Gy,_.sortedLastIndexBy=Wy,_.sortedLastIndexOf=Yy,_.startCase=Rv,_.startsWith=Nv,_.subtract=xb,_.sum=Ib,_.sumBy=Ob,_.template=$v,_.times=hb,_.toFinite=dn,_.toInteger=Le,_.toLength=Fl,_.toLower=Fv,_.toNumber=Fr,_.toSafeInteger=F1,_.toString=nt,_.toUpper=Uv,_.trim=jv,_.trimEnd=Lv,_.trimStart=Mv,_.truncate=Bv,_.unescape=qv,_.uniqueId=fb,_.upperCase=zv,_.upperFirst=bc,_.each=wl,_.eachRight=El,_.first=_l,Ec(_,function(){var r={};return Yr(_,function(i,a){it.call(_.prototype,a)||(r[a]=i)}),r}(),{chain:!1}),_.VERSION=s,Cr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(r){_[r].placeholder=_}),Cr(["drop","take"],function(r,i){Ye.prototype[r]=function(a){a=a===t?1:Kt(Le(a),0);var h=this.__filtered__&&!i?new Ye(this):this.clone();return h.__filtered__?h.__takeCount__=Xt(a,h.__takeCount__):h.__views__.push({size:Xt(a,re),type:r+(h.__dir__<0?"Right":"")}),h},Ye.prototype[r+"Right"]=function(a){return this.reverse()[r](a).reverse()}}),Cr(["filter","map","takeWhile"],function(r,i){var a=i+1,h=a==m||a==ee;Ye.prototype[r]=function(g){var v=this.clone();return v.__iteratees__.push({iteratee:be(g,3),type:a}),v.__filtered__=v.__filtered__||h,v}}),Cr(["head","last"],function(r,i){var a="take"+(i?"Right":"");Ye.prototype[r]=function(){return this[a](1).value()[0]}}),Cr(["initial","tail"],function(r,i){var a="drop"+(i?"":"Right");Ye.prototype[r]=function(){return this.__filtered__?new Ye(this):this[a](1)}}),Ye.prototype.compact=function(){return this.filter(gr)},Ye.prototype.find=function(r){return this.filter(r).head()},Ye.prototype.findLast=function(r){return this.reverse().find(r)},Ye.prototype.invokeMap=Ke(function(r,i){return typeof r=="function"?new Ye(this):this.map(function(a){return ki(a,r,i)})}),Ye.prototype.reject=function(r){return this.filter(Io(be(r)))},Ye.prototype.slice=function(r,i){r=Le(r);var a=this;return a.__filtered__&&(r>0||i<0)?new Ye(a):(r<0?a=a.takeRight(-r):r&&(a=a.drop(r)),i!==t&&(i=Le(i),a=i<0?a.dropRight(-i):a.take(i-r)),a)},Ye.prototype.takeRightWhile=function(r){return this.reverse().takeWhile(r).reverse()},Ye.prototype.toArray=function(){return this.take(re)},Yr(Ye.prototype,function(r,i){var a=/^(?:filter|find|map|reject)|While$/.test(i),h=/^(?:head|last)$/.test(i),g=_[h?"take"+(i=="last"?"Right":""):i],v=h||/^find/.test(i);g&&(_.prototype[i]=function(){var I=this.__wrapped__,N=h?[1]:arguments,M=I instanceof Ye,Q=N[0],Z=M||Re(I),ne=function(Ge){var Qe=g.apply(_,En([Ge],N));return h&&ue?Qe[0]:Qe};Z&&a&&typeof Q=="function"&&Q.length!=1&&(M=Z=!1);var ue=this.__chain__,ye=!!this.__actions__.length,Ee=v&&!ue,qe=M&&!ye;if(!v&&Z){I=qe?I:new Ye(this);var De=r.apply(I,N);return De.__actions__.push({func:Eo,args:[ne],thisArg:t}),new Tr(De,ue)}return Ee&&qe?r.apply(this,N):(De=this.thru(ne),Ee?h?De.value()[0]:De.value():De)})}),Cr(["pop","push","shift","sort","splice","unshift"],function(r){var i=Gs[r],a=/^(?:push|sort|unshift)$/.test(r)?"tap":"thru",h=/^(?:pop|shift)$/.test(r);_.prototype[r]=function(){var g=arguments;if(h&&!this.__chain__){var v=this.value();return i.apply(Re(v)?v:[],g)}return this[a](function(I){return i.apply(Re(I)?I:[],g)})}}),Yr(Ye.prototype,function(r,i){var a=_[i];if(a){var h=a.name+"";it.call(bi,h)||(bi[h]=[]),bi[h].push({name:i,func:a})}}),bi[go(t,ie).name]=[{name:"wrapper",func:t}],Ye.prototype.clone=qg,Ye.prototype.reverse=zg,Ye.prototype.value=Hg,_.prototype.at=v_,_.prototype.chain=b_,_.prototype.commit=m_,_.prototype.next=w_,_.prototype.plant=D_,_.prototype.reverse=S_,_.prototype.toJSON=_.prototype.valueOf=_.prototype.value=x_,_.prototype.first=_.prototype.head,Mi&&(_.prototype[Mi]=E_),_},yi=mg();At?((At.exports=yi)._=yi,ct._=yi):Xe._=yi}).call(hs)})(Eu,Eu.exports);var hx=Object.defineProperty,lx=Object.defineProperties,fx=Object.getOwnPropertyDescriptors,md=Object.getOwnPropertySymbols,dx=Object.prototype.hasOwnProperty,px=Object.prototype.propertyIsEnumerable,wd=(n,e,t)=>e in n?hx(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,To=(n,e)=>{for(var t in e||(e={}))dx.call(e,t)&&wd(n,t,e[t]);if(md)for(var t of md(e))px.call(e,t)&&wd(n,t,e[t]);return n},gx=(n,e)=>lx(n,fx(e));function Lr(n,e,t){let s;const o=Du(n);return e.rpcMap&&(s=e.rpcMap[o]),s||(s=`${ux}?chainId=eip155:${o}&projectId=${t}`),s}function Du(n){return n.includes("eip155")?Number(n.split(":")[1]):Number(n)}function yx(n){return n.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function _x(n,e){const t=Object.keys(e.namespaces).filter(o=>o.includes(n));if(!t.length)return[];const s=[];return t.forEach(o=>{const c=e.namespaces[o].accounts;s.push(...c)}),s}function vx(n,e={}){const t=Ed(n),s=Ed(e);return Eu.exports.merge(t,s)}function Ed(n){var e,t,s,o;const c={};if(!Ai(n))return c;for(const[l,f]of Object.entries(n)){const y=ap(l)?[l]:f.chains,p=f.methods||[],E=f.events||[],A=f.rpcMap||{},S=$o(l);c[S]=gx(To(To({},c[S]),f),{chains:Tc(y,(e=c[S])==null?void 0:e.chains),methods:Tc(p,(t=c[S])==null?void 0:t.methods),events:Tc(E,(s=c[S])==null?void 0:s.events),rpcMap:To(To({},A),(o=c[S])==null?void 0:o.rpcMap)})}return c}const Yp={},$t=n=>Yp[n],Hc=(n,e)=>{Yp[n]=e};class bx{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=$t("events"),this.client=$t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const s=t||Lr(`${this.name}:${e}`,this.namespace);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit($n.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||Lr(e,this.namespace);return typeof s>"u"?void 0:new Nn(new si(s,$t("disableProviderPing")))}}class mx{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=$t("events"),this.client=$t("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){const s=Du(e);if(!this.httpProviders[s]){const o=t||Lr(`${this.name}:${s}`,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${s}`);this.setHttpProvider(s,o)}this.chainId=s,this.events.emit($n.DEFAULT_CHAIN_CHANGED,`${this.name}:${s}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const s=t||Lr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Nn(new si(s,$t("disableProviderPing")))}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;const o=Du(t);e[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t;let s=e.request.params?(t=e.request.params[0])==null?void 0:t.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const o=parseInt(s,16);if(this.isChainApproved(o))this.setDefaultChain(`${o}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:e.chainId}),this.setDefaultChain(`${o}`);else throw new Error(`Failed to switch to chain 'eip155:${o}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}}class wx{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=$t("events"),this.client=$t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const s=t||Lr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit($n.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||Lr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Nn(new si(s,$t("disableProviderPing")))}}class Ex{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=$t("events"),this.client=$t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const s=t||Lr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit($n.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||Lr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Nn(new si(s,$t("disableProviderPing")))}}class Dx{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=$t("events"),this.client=$t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const s=t||this.getCardanoRPCUrl(e);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit($n.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{const s=this.getCardanoRPCUrl(t);e[t]=this.createHttpProvider(t,s)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||this.getCardanoRPCUrl(e);return typeof s>"u"?void 0:new Nn(new si(s,$t("disableProviderPing")))}}class Sx{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=$t("events"),this.client=$t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const s=t||Lr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit($n.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||Lr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Nn(new si(s,$t("disableProviderPing")))}}class xx{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=$t("events"),this.client=$t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const s=t||Lr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit($n.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||Lr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Nn(new si(s,$t("disableProviderPing")))}}var Ix=Object.defineProperty,Ox=Object.defineProperties,Px=Object.getOwnPropertyDescriptors,Dd=Object.getOwnPropertySymbols,Cx=Object.prototype.hasOwnProperty,Ax=Object.prototype.propertyIsEnumerable,Sd=(n,e,t)=>e in n?Ix(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ro=(n,e)=>{for(var t in e||(e={}))Cx.call(e,t)&&Sd(n,t,e[t]);if(Dd)for(var t of Dd(e))Ax.call(e,t)&&Sd(n,t,e[t]);return n},Kc=(n,e)=>Ox(n,Px(e));class Wu{constructor(e){this.events=new br,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=e,this.logger=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:Ze.pino(Ze.getDefaultLoggerOptions({level:e?.logger||vd})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){const t=new Wu(e);return await t.initialize(),t}async request(e,t){const[s,o]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:Ro({},e),chainId:`${s}:${o}`,topic:this.session.topic})}sendAsync(e,t,s){this.request(e,s).then(o=>t(null,o)).catch(o=>t(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Nt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let t=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(t>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:s,approval:o}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});s&&(this.uri=s,this.events.emit("display_uri",s)),await o().then(c=>{this.session=c}).catch(c=>{if(c.message!==Wp)throw c;t++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,t){try{const[s,o]=this.validateChain(e);this.getProvider(s).setDefaultChain(o,t)}catch(s){if(!/Please call connect/.test(s.message))throw s}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if(vn(t)){for(const s of t)e.deletePairings?this.client.core.expirer.set(s.topic,0):await this.client.core.relayer.subscriber.unsubscribe(s.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await Gu.init({logger:this.providerOpts.logger||vd,relayUrl:this.providerOpts.relayUrl||ox,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(t=>$o(t)))];Hc("client",this.client),Hc("events",this.events),Hc("disableProviderPing",this.disableProviderPing),e.forEach(t=>{if(!this.session)return;const s=_x(t,this.session),o=yx(s),c=vx(this.namespaces,this.optionalNamespaces),l=Kc(Ro({},c[t]),{accounts:s,chains:o});switch(t){case"eip155":this.rpcProviders[t]=new mx({namespace:l});break;case"solana":this.rpcProviders[t]=new wx({namespace:l});break;case"cosmos":this.rpcProviders[t]=new Ex({namespace:l});break;case"polkadot":this.rpcProviders[t]=new bx({namespace:l});break;case"cip34":this.rpcProviders[t]=new Dx({namespace:l});break;case"elrond":this.rpcProviders[t]=new Sx({namespace:l});break;case"multiversx":this.rpcProviders[t]=new xx({namespace:l});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:t}=e,{event:s}=t;s.name==="accountsChanged"?this.events.emit("accountsChanged",s.data):s.name==="chainChanged"?this.onChainChanged(t.chainId):this.events.emit(s.name,s.data),this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var s;const{namespaces:o}=t,c=(s=this.client)==null?void 0:s.session.get(e);this.session=Kc(Ro({},c),{namespaces:o}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",Kc(Ro({},Nt("USER_DISCONNECTED")),{data:e.topic}))}),this.on($n.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){if(!this.rpcProviders[e])throw new Error(`Provider not found: ${e}`);return this.rpcProviders[e]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace((t=this.session)==null?void 0:t.namespaces[e])})}setNamespaces(e){const{namespaces:t,optionalNamespaces:s,sessionProperties:o}=e;if(!t||!Object.keys(t).length)throw new Error("Namespaces must be not empty");this.namespaces=t,this.optionalNamespaces=s,this.sessionProperties=o,this.persist("namespaces",t),this.persist("optionalNamespaces",s)}validateChain(e){const[t,s]=e?.split(":")||["",""];if(t&&!Object.keys(this.namespaces).map(l=>$o(l)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&s)return[t,s];const o=$o(Object.keys(this.namespaces)[0]),c=this.rpcProviders[o].getDefaultChain();return[o,c]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,t=!1){var s;const[o,c]=this.validateChain(e);t||this.getProvider(o).setDefaultChain(c),((s=this.namespaces[o])!=null?s:this.namespaces[`${o}:${c}`]).defaultChain=c,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",c)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0})}persist(e,t){this.client.core.storage.setItem(`${bd}/${e}`,t)}async getFromStore(e){return await this.client.core.storage.getItem(`${bd}/${e}`)}}const Tx=Wu,Rx="wc",Nx="ethereum_provider",$x=`${Rx}@2:${Nx}:`,Fx="https://rpc.walletconnect.com/v1/",Su=["eth_sendTransaction","personal_sign"],Jx=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],xu=["chainChanged","accountsChanged"],Xx=["message","disconnect","connect"];var Ux=Object.defineProperty,jx=Object.defineProperties,Lx=Object.getOwnPropertyDescriptors,xd=Object.getOwnPropertySymbols,Mx=Object.prototype.hasOwnProperty,Bx=Object.prototype.propertyIsEnumerable,Id=(n,e,t)=>e in n?Ux(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Vc=(n,e)=>{for(var t in e||(e={}))Mx.call(e,t)&&Id(n,t,e[t]);if(xd)for(var t of xd(e))Bx.call(e,t)&&Id(n,t,e[t]);return n},Od=(n,e)=>jx(n,Lx(e));function Iu(n){return Number(n[0].split(":")[1])}function kc(n){return`0x${n.toString(16)}`}function qx(n){const{chains:e,optionalChains:t,methods:s,optionalMethods:o,events:c,optionalEvents:l,rpcMap:f}=n;if(!vn(e))throw new Error("Invalid chains");const y=e,p=s||Su,E=c||xu,A={[Iu(y)]:f[Iu(y)]},S={chains:y,methods:p,events:E,rpcMap:A},T=c?.filter(ie=>!xu.includes(ie)),R=s?.filter(ie=>!Su.includes(ie));if(!t&&!l&&!o&&!(T!=null&&T.length)&&!(R!=null&&R.length))return{required:S};const z=T?.length&&R?.length||!t,K={chains:[...new Set(z?y.concat(t||[]):t)],methods:[...new Set(p.concat(o||[]))],events:[...new Set(E.concat(l||[]))],rpcMap:f};return{required:S,optional:K}}class Jp{constructor(){this.events=new br,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=$x,this.on=(e,t)=>(this.events.on(e,t),this),this.once=(e,t)=>(this.events.once(e,t),this),this.removeListener=(e,t)=>(this.events.removeListener(e,t),this),this.off=(e,t)=>(this.events.off(e,t),this),this.parseAccount=e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e,this.signer={},this.rpc={}}static async init(e){const t=new Jp;return await t.initialize(e),t}async request(e){return await this.signer.request(e,this.formatChainId(this.chainId))}sendAsync(e,t){this.signer.sendAsync(e,t,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:t,optional:s}=qx(this.rpc);try{const o=await new Promise(async(l,f)=>{var y;this.rpc.showQrModal&&((y=this.modal)==null||y.subscribeModal(p=>{!p.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),f(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(Od(Vc({namespaces:{[this.namespace]:t}},s&&{optionalNamespaces:{[this.namespace]:s}}),{pairingTopic:e?.pairingTopic})).then(p=>{l(p)}).catch(p=>{f(new Error(p.message))})});if(!o)return;this.setChainIds(this.rpc.chains);const c=mE(o.namespaces,[this.namespace]);this.setAccounts(c),this.events.emit("connect",{chainId:kc(this.chainId)})}catch(o){throw this.signer.logger.error(o),o}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:t}=e,{event:s}=t;s.name==="accountsChanged"?(this.accounts=this.parseAccounts(s.data),this.events.emit("accountsChanged",this.accounts)):s.name==="chainChanged"?this.setChainId(this.formatChainId(s.data)):this.events.emit(s.name,s.data),this.events.emit("session_event",e)}),this.signer.on("chainChanged",e=>{const t=parseInt(e);this.chainId=t,this.events.emit("chainChanged",kc(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",Od(Vc({},Nt("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{var t,s;this.rpc.showQrModal&&((t=this.modal)==null||t.closeModal(),(s=this.modal)==null||s.openModal({uri:e})),this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const t=e.filter(s=>this.isCompatibleChainId(s)).map(s=>this.parseChainId(s));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",kc(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const t=this.parseChainId(e);this.chainId=t,this.switchEthereumChain(t)}}parseAccountId(e){const[t,s,o]=e.split(":");return{chainId:`${t}:${s}`,address:o}}setAccounts(e){this.accounts=e.filter(t=>this.parseChainId(this.parseAccountId(t).chainId)===this.chainId).map(t=>this.parseAccountId(t).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var t,s;return{chains:((t=e.chains)==null?void 0:t.map(o=>this.formatChainId(o)))||[`${this.namespace}:1`],optionalChains:e.optionalChains?e.optionalChains.map(o=>this.formatChainId(o)):void 0,methods:e?.methods||Su,events:e?.events||xu,optionalMethods:e?.optionalMethods||[],optionalEvents:e?.optionalEvents||[],rpcMap:e?.rpcMap||this.buildRpcMap(e.chains.concat(e.optionalChains||[]),e.projectId),showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:(s=e?.qrModalOptions)!=null?s:void 0,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,t){const s={};return e.forEach(o=>{s[o]=this.getRpcUrl(o,t)}),s}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=Iu(this.rpc.chains),this.signer=await Tx.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storageOptions:e.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let t;try{const{WalletConnectModal:s}=await import("./index-e5d47b5d.js").then(function(o){return o.a});t=s}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(t)try{this.modal=new t(Vc({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch(s){throw this.signer.logger.error(s),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:t,optionalChains:s,rpcMap:o}=e;t&&vn(t)&&(this.rpc.chains=t.map(c=>this.formatChainId(c)),t.forEach(c=>{this.rpc.rpcMap[c]=o?.[c]||this.getRpcUrl(c)})),s&&vn(s)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=s?.map(c=>this.formatChainId(c)),s.forEach(c=>{this.rpc.rpcMap[c]=o?.[c]||this.getRpcUrl(c)}))}getRpcUrl(e,t){var s;return((s=this.rpc.rpcMap)==null?void 0:s[e])||`${Fx}?chainId=eip155:${e}&projectId=${t||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),t=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:t?.accounts),this.setAccounts(t?.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(t=>this.parseAccount(t))}}export{Xx as OPTIONAL_EVENTS,Jx as OPTIONAL_METHODS,xu as REQUIRED_EVENTS,Su as REQUIRED_METHODS,Jp as default};
//# sourceMappingURL=index.es-6c0412fa.js.map
